<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>JavaScript çš„è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰ | Xuexiang&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="1. ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿè¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰ æ˜¯æŒ‡ å˜é‡çš„ä½œç”¨åŸŸ åœ¨ ä»£ç ç¼–å†™æ—¶ å°±å·²ç»ç¡®å®šï¼Œè€Œä¸æ˜¯åœ¨ä»£ç è¿è¡Œæ—¶åŠ¨æ€å†³å®šçš„ã€‚ æ¢å¥è¯è¯´ï¼Œä½œç”¨åŸŸç”±ä»£ç çš„åµŒå¥—ç»“æ„å†³å®šï¼Œè€Œä¸æ˜¯ç”±å‡½æ•°è°ƒç”¨æ–¹å¼å†³å®šã€‚  2. è¯æ³•ä½œç”¨åŸŸç¤ºä¾‹1234567891011function outer() &amp;#123;  let a &#x3D; &quot;Hello&quot;;    function inner(">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript çš„è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰">
<meta property="og:url" content="http://example.com/2025/02/06/js-lexical-scope/index.html">
<meta property="og:site_name" content="Xuexiang&#39;s Blog">
<meta property="og:description" content="1. ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿè¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰ æ˜¯æŒ‡ å˜é‡çš„ä½œç”¨åŸŸ åœ¨ ä»£ç ç¼–å†™æ—¶ å°±å·²ç»ç¡®å®šï¼Œè€Œä¸æ˜¯åœ¨ä»£ç è¿è¡Œæ—¶åŠ¨æ€å†³å®šçš„ã€‚ æ¢å¥è¯è¯´ï¼Œä½œç”¨åŸŸç”±ä»£ç çš„åµŒå¥—ç»“æ„å†³å®šï¼Œè€Œä¸æ˜¯ç”±å‡½æ•°è°ƒç”¨æ–¹å¼å†³å®šã€‚  2. è¯æ³•ä½œç”¨åŸŸç¤ºä¾‹1234567891011function outer() &amp;#123;  let a &#x3D; &quot;Hello&quot;;    function inner(">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-02-06T09:59:19.000Z">
<meta property="article:modified_time" content="2025-02-17T07:39:21.811Z">
<meta property="article:author" content="xuexiangxu">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Xuexiang's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<!-- hexo injector head_end start --><script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.esm.min.mjs">
    mermaid.initialize(
      startOnLoad: true,
    );
    </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xuexiang&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-js-lexical-scope" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/06/js-lexical-scope/" class="article-date">
  <time class="dt-published" datetime="2025-02-06T09:59:19.000Z" itemprop="datePublished">2025-02-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      JavaScript çš„è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="1-ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ"></a><strong>1. ä»€ä¹ˆæ˜¯è¯æ³•ä½œç”¨åŸŸï¼Ÿ</strong></h3><p><strong>è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰</strong> æ˜¯æŒ‡ <strong>å˜é‡çš„ä½œç”¨åŸŸ</strong> åœ¨ <strong>ä»£ç ç¼–å†™æ—¶</strong> å°±å·²ç»ç¡®å®šï¼Œè€Œä¸æ˜¯åœ¨ä»£ç è¿è¡Œæ—¶åŠ¨æ€å†³å®šçš„ã€‚</p>
<p>æ¢å¥è¯è¯´ï¼Œ<strong>ä½œç”¨åŸŸç”±ä»£ç çš„åµŒå¥—ç»“æ„å†³å®šï¼Œè€Œä¸æ˜¯ç”±å‡½æ•°è°ƒç”¨æ–¹å¼å†³å®š</strong>ã€‚</p>
<hr>
<h3 id="2-è¯æ³•ä½œç”¨åŸŸç¤ºä¾‹"><a href="#2-è¯æ³•ä½œç”¨åŸŸç¤ºä¾‹" class="headerlink" title="2. è¯æ³•ä½œç”¨åŸŸç¤ºä¾‹"></a><strong>2. è¯æ³•ä½œç”¨åŸŸç¤ºä¾‹</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// è¯æ³•ä½œç”¨åŸŸï¼šinner() å¯ä»¥è®¿é—® outer() é‡Œçš„å˜é‡ a</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">inner</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">outer</span>(); <span class="comment">// è¾“å‡ºï¼šHello</span></span><br></pre></td></tr></table></figure>
<p>ğŸ”¹ <strong>è§£é‡Šï¼š</strong></p>
<ul>
<li><code>inner()</code> æ˜¯ <strong>å®šä¹‰åœ¨ <code>outer()</code> å†…éƒ¨</strong> çš„ï¼Œæ‰€ä»¥ <code>inner()</code> å¯ä»¥è®¿é—® <code>outer()</code> ä½œç”¨åŸŸä¸­çš„å˜é‡ <code>a</code>ã€‚</li>
<li><code>a</code> åœ¨ <code>inner()</code> <strong>å¤–éƒ¨ä½œç”¨åŸŸå®šä¹‰ï¼Œä½†ä»ç„¶å¯ä»¥è¢«è®¿é—®</strong>ï¼Œè¿™å°±æ˜¯ <strong>è¯æ³•ä½œç”¨åŸŸ</strong>ã€‚</li>
</ul>
<hr>
<h3 id="3-è¯æ³•ä½œç”¨åŸŸ-vs-åŠ¨æ€ä½œç”¨åŸŸ"><a href="#3-è¯æ³•ä½œç”¨åŸŸ-vs-åŠ¨æ€ä½œç”¨åŸŸ" class="headerlink" title="3. è¯æ³•ä½œç”¨åŸŸ vs åŠ¨æ€ä½œç”¨åŸŸ"></a><strong>3. è¯æ³•ä½œç”¨åŸŸ vs åŠ¨æ€ä½œç”¨åŸŸ</strong></h3><h4 id="ğŸ”¹-è¯æ³•ä½œç”¨åŸŸï¼ˆJavaScript-ä½¿ç”¨ï¼‰"><a href="#ğŸ”¹-è¯æ³•ä½œç”¨åŸŸï¼ˆJavaScript-ä½¿ç”¨ï¼‰" class="headerlink" title="ğŸ”¹ è¯æ³•ä½œç”¨åŸŸï¼ˆJavaScript ä½¿ç”¨ï¼‰"></a><strong>ğŸ”¹ è¯æ³•ä½œç”¨åŸŸï¼ˆJavaScript ä½¿ç”¨ï¼‰</strong></h4><p>ä½œç”¨åŸŸåœ¨ <strong>å®šä¹‰æ—¶</strong> ç¡®å®šï¼Œä¸ <strong>è°ƒç”¨æ–¹å¼æ— å…³</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> inner;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = <span class="title function_">outer</span>(); <span class="comment">// `fn` ç°åœ¨æ˜¯ `inner` å‡½æ•°</span></span><br><span class="line"><span class="title function_">fn</span>(); <span class="comment">// è¾“å‡ºï¼šHello</span></span><br></pre></td></tr></table></figure>
<p>å³ä½¿ <code>fn</code> åœ¨ <code>outer()</code> æ‰§è¡Œå®Œåæ‰è°ƒç”¨ï¼Œå®ƒä»ç„¶èƒ½è®¿é—® <code>outer()</code> ä½œç”¨åŸŸä¸­çš„ <code>a</code>ï¼Œå› ä¸º <strong>ä½œç”¨åŸŸåœ¨å®šä¹‰æ—¶å°±å·²ç¡®å®š</strong>ã€‚</p>
<h4 id="ğŸ”¹-åŠ¨æ€ä½œç”¨åŸŸï¼ˆJavaScript-ä¸ä½¿ç”¨ï¼‰"><a href="#ğŸ”¹-åŠ¨æ€ä½œç”¨åŸŸï¼ˆJavaScript-ä¸ä½¿ç”¨ï¼‰" class="headerlink" title="ğŸ”¹ åŠ¨æ€ä½œç”¨åŸŸï¼ˆJavaScript ä¸ä½¿ç”¨ï¼‰"></a><strong>ğŸ”¹ åŠ¨æ€ä½œç”¨åŸŸï¼ˆJavaScript ä¸ä½¿ç”¨ï¼‰</strong></h4><p>ä¸€äº›ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ Bashã€Perl æ—©æœŸç‰ˆæœ¬ï¼‰ä½¿ç”¨ <strong>åŠ¨æ€ä½œç”¨åŸŸï¼ˆDynamic Scopeï¼‰</strong>ï¼Œå³ <strong>ä½œç”¨åŸŸå–å†³äºå‡½æ•°çš„è°ƒç”¨ä½ç½®</strong>ï¼Œè€Œä¸æ˜¯å®šä¹‰ä½ç½®ã€‚ä½† <strong>JavaScript ä¸ä½¿ç”¨åŠ¨æ€ä½œç”¨åŸŸ</strong>ï¼Œè€Œæ˜¯ <strong>è¯æ³•ä½œç”¨åŸŸ</strong>ã€‚</p>
<hr>
<h3 id="4-åµŒå¥—ä½œç”¨åŸŸï¼ˆä½œç”¨åŸŸé“¾ï¼‰"><a href="#4-åµŒå¥—ä½œç”¨åŸŸï¼ˆä½œç”¨åŸŸé“¾ï¼‰" class="headerlink" title="4. åµŒå¥—ä½œç”¨åŸŸï¼ˆä½œç”¨åŸŸé“¾ï¼‰"></a><strong>4. åµŒå¥—ä½œç”¨åŸŸï¼ˆä½œç”¨åŸŸé“¾ï¼‰</strong></h3><p>JavaScript çš„ä½œç”¨åŸŸæ˜¯ <strong>åµŒå¥—</strong> çš„ï¼Œæ¯ä¸ªå‡½æ•°å®šä¹‰æ—¶éƒ½ä¼šâ€œè®°ä½â€å®ƒåˆ›å»ºæ—¶çš„ä½œç”¨åŸŸã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> globalVar = <span class="string">&quot;I am global&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> outerVar = <span class="string">&quot;I am outer&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> innerVar = <span class="string">&quot;I am inner&quot;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(globalVar); <span class="comment">// âœ… è®¿é—®å…¨å±€ä½œç”¨åŸŸå˜é‡</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(outerVar);  <span class="comment">// âœ… è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸå˜é‡</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(innerVar);  <span class="comment">// âœ… è®¿é—®è‡ªèº«ä½œç”¨åŸŸå˜é‡</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">inner</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">outer</span>();</span><br></pre></td></tr></table></figure>
<p>ğŸ”¹ <strong>ä½œç”¨åŸŸé“¾æŸ¥æ‰¾é¡ºåºï¼š</strong></p>
<ol>
<li>å…ˆåœ¨ <code>inner()</code> å†…æŸ¥æ‰¾å˜é‡ã€‚</li>
<li>å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å¾€ <code>outer()</code> ä½œç”¨åŸŸæŸ¥æ‰¾ã€‚</li>
<li>å¦‚æœè¿˜æ‰¾ä¸åˆ°ï¼Œå°±å¾€ <strong>å…¨å±€ä½œç”¨åŸŸ</strong> æŸ¥æ‰¾ã€‚</li>
<li>æ‰¾ä¸åˆ°å°±æŠ¥é”™ <code>ReferenceError</code>ã€‚</li>
</ol>
<hr>
<h3 id="5-å—çº§ä½œç”¨åŸŸ"><a href="#5-å—çº§ä½œç”¨åŸŸ" class="headerlink" title="5. å—çº§ä½œç”¨åŸŸ"></a><strong>5. å—çº§ä½œç”¨åŸŸ</strong></h3><p>ES6 ä¹‹å‰ï¼ŒJavaScript åªæœ‰ <strong>å‡½æ•°ä½œç”¨åŸŸï¼ˆFunction Scopeï¼‰</strong>ï¼Œä½† ES6 å¼•å…¥äº† <code>let</code> å’Œ <code>const</code>ï¼Œæ”¯æŒ <strong>å—çº§ä½œç”¨åŸŸï¼ˆBlock Scopeï¼‰</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="keyword">let</span> x = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">const</span> y = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// âŒ ReferenceError: x is not defined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y); <span class="comment">// âŒ ReferenceError: y is not defined</span></span><br></pre></td></tr></table></figure>
<p>ğŸ”¹ <strong>ä½œç”¨åŸŸç±»å‹ï¼š</strong></p>
<ul>
<li><code>var</code>ï¼š<strong>å‡½æ•°ä½œç”¨åŸŸ</strong></li>
<li><code>let</code> &#x2F; <code>const</code>ï¼š<strong>å—çº§ä½œç”¨åŸŸ</strong></li>
<li><code>function</code>ï¼š<strong>å‡½æ•°ä½œç”¨åŸŸ</strong></li>
<li><code>&#123;&#125;</code>ï¼ˆä»£ç å—ï¼‰ï¼š<strong>å—çº§ä½œç”¨åŸŸï¼ˆä»… <code>let</code> å’Œ <code>const</code>ï¼‰</strong></li>
</ul>
<hr>
<h3 id="6-é—­åŒ…ä¸è¯æ³•ä½œç”¨åŸŸ"><a href="#6-é—­åŒ…ä¸è¯æ³•ä½œç”¨åŸŸ" class="headerlink" title="6. é—­åŒ…ä¸è¯æ³•ä½œç”¨åŸŸ"></a><strong>6. é—­åŒ…ä¸è¯æ³•ä½œç”¨åŸŸ</strong></h3><p><strong>é—­åŒ…ï¼ˆClosureï¼‰</strong> æ˜¯ <strong>å‡½æ•°å¯ä»¥â€œè®°ä½â€å…¶å®šä¹‰æ—¶çš„ä½œç”¨åŸŸï¼Œå³ä½¿å‡½æ•°åœ¨ä½œç”¨åŸŸå¤–è°ƒç”¨</strong>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;</span><br><span class="line">    count++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">outer</span>();</span><br><span class="line"><span class="title function_">counter</span>(); <span class="comment">// è¾“å‡ºï¼š1</span></span><br><span class="line"><span class="title function_">counter</span>(); <span class="comment">// è¾“å‡ºï¼š2</span></span><br></pre></td></tr></table></figure>
<p>ğŸ”¹ <code>inner()</code> è®°ä½äº† <code>outer()</code> çš„ä½œç”¨åŸŸï¼Œå³ä½¿ <code>outer()</code> å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œ<code>count</code> ä»ç„¶ä¿ç•™åœ¨å†…å­˜ä¸­ã€‚è¿™å°±æ˜¯ <strong>é—­åŒ…çš„ä½œç”¨</strong>ï¼Œå®ƒä¾èµ–äº <strong>è¯æ³•ä½œç”¨åŸŸ</strong>ã€‚</p>
<hr>
<h3 id="7-è¯æ³•ä½œç”¨åŸŸæ€»ç»“"><a href="#7-è¯æ³•ä½œç”¨åŸŸæ€»ç»“" class="headerlink" title="7. è¯æ³•ä½œç”¨åŸŸæ€»ç»“"></a><strong>7. è¯æ³•ä½œç”¨åŸŸæ€»ç»“</strong></h3><p>âœ… <strong>ä½œç”¨åŸŸåœ¨ä»£ç ç¼–å†™æ—¶å°±å·²ç¡®å®šï¼Œè€Œä¸æ˜¯è¿è¡Œæ—¶å†³å®š</strong>ã€‚<br>âœ… <strong>å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡ï¼ˆä½œç”¨åŸŸé“¾ï¼‰</strong>ã€‚<br>âœ… <strong>JavaScript ä¸æ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼Œè€Œæ˜¯è¯æ³•ä½œç”¨åŸŸ</strong>ã€‚<br>âœ… <strong>é—­åŒ…ï¼ˆClosureï¼‰ä¾èµ–è¯æ³•ä½œç”¨åŸŸï¼Œä½¿å¾—å‡½æ•°å¯ä»¥è®°ä½åˆ›å»ºæ—¶çš„ä½œç”¨åŸŸ</strong>ã€‚  </p>
<hr>
<h3 id="8-å¸¸è§é—®é¢˜"><a href="#8-å¸¸è§é—®é¢˜" class="headerlink" title="8. å¸¸è§é—®é¢˜"></a><strong>8. å¸¸è§é—®é¢˜</strong></h3><h4 id="1-ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#1-ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="(1) ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ"></a><strong>(1) ä¸‹é¢ä»£ç çš„è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();</span><br></pre></td></tr></table></figure>
<p>âœ… **è¾“å‡ºï¼š<code>undefined</code>**ï¼ˆä¸æ˜¯ <code>10</code>ï¼ï¼‰<br>ğŸ”¹ <strong>åŸå› </strong>ï¼š  </p>
<ul>
<li>JavaScript å˜é‡æå‡ï¼ˆHoistingï¼‰ï¼š<code>var a</code> è¢«æå‡åˆ° <code>test()</code> ä½œç”¨åŸŸé¡¶éƒ¨ï¼Œé»˜è®¤ä¸º <code>undefined</code>ï¼Œä½†èµ‹å€¼ <code>20</code> å‘ç”Ÿåœ¨ <code>console.log(a)</code> ä¹‹åã€‚</li>
</ul>
<p>ç­‰ä»·äºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> a; <span class="comment">// å˜é‡æå‡ï¼Œé»˜è®¤å€¼ `undefined`</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// undefined</span></span><br><span class="line">  a = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-å¦‚ä½•è®©-setTimeout-å¾ªç¯æ­£ç¡®æ‰“å°-0-1-2-3-4ï¼Ÿ"><a href="#2-å¦‚ä½•è®©-setTimeout-å¾ªç¯æ­£ç¡®æ‰“å°-0-1-2-3-4ï¼Ÿ" class="headerlink" title="(2) å¦‚ä½•è®© setTimeout å¾ªç¯æ­£ç¡®æ‰“å° 0, 1, 2, 3, 4ï¼Ÿ"></a><strong>(2) å¦‚ä½•è®© <code>setTimeout</code> å¾ªç¯æ­£ç¡®æ‰“å° <code>0, 1, 2, 3, 4</code>ï¼Ÿ</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i), <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ğŸ”´ <strong>é”™è¯¯è¾“å‡ºï¼š<code>5, 5, 5, 5, 5</code></strong></p>
<ul>
<li>å› ä¸º <code>var</code> æ˜¯ <strong>å‡½æ•°ä½œç”¨åŸŸ</strong>ï¼Œå¾ªç¯ç»“æŸåï¼Œ<code>i</code> çš„å€¼æ˜¯ <code>5</code>ï¼Œæ‰€æœ‰ <code>setTimeout</code> å…±äº«åŒä¸€ä¸ª <code>i</code>ã€‚</li>
</ul>
<p>âœ… <strong>è§£å†³æ–¹æ³•ï¼šä½¿ç”¨ <code>let</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(i), <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>âœ… <strong>æˆ–è€…ä½¿ç”¨é—­åŒ…</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  (<span class="keyword">function</span> (<span class="params">j</span>) &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(j), <span class="number">1000</span>);</span><br><span class="line">  &#125;)(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/06/js-lexical-scope/" data-id="cm78qvrev000vngq2e9p4eswb" data-title="JavaScript çš„è¯æ³•ä½œç”¨åŸŸï¼ˆLexical Scopeï¼‰" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2025/02/10/js-hoisting/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          JavaScript æå‡ï¼ˆHoistingï¼‰
        
      </div>
    </a>
  
  
    <a href="/2025/02/05/js-lhs-rhs/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">JavaScriptä¸­LHSå’ŒRHSçš„åŒºåˆ«</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/">Swift</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bug/" rel="tag">Bug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend/" rel="tag">Frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPA/" rel="tag">SPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/DOM/" style="font-size: 13.33px;">DOM</a> <a href="/tags/Frontend/" style="font-size: 10px;">Frontend</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/iOS/" style="font-size: 16.67px;">iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/02/17/spa-first-paint/">SPAé¦–å±åŠ è½½ä¼˜åŒ–</a>
          </li>
        
          <li>
            <a href="/2025/02/14/dom-event-target/">event.target å’Œ event.currentTarget</a>
          </li>
        
          <li>
            <a href="/2025/02/14/dom-event-bubbling/">äº‹ä»¶å†’æ³¡</a>
          </li>
        
          <li>
            <a href="/2025/02/12/js-debounce-throttle/">JavaScript é˜²æŠ–ï¼ˆDebounceï¼‰å’ŒèŠ‚æµï¼ˆThrottleï¼‰</a>
          </li>
        
          <li>
            <a href="/2025/02/12/js-iterator-generator/">JavaScriptä¸­çš„è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 xuexiangxu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>