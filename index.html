<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Xuexiang&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Xuexiang&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Xuexiang&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="xuexiangxu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Xuexiang's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<!-- hexo injector head_end start --><script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.esm.min.mjs">
    mermaid.initialize(
      startOnLoad: true,
    );
    </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xuexiang&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-js-lhs-rhs" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/05/js-lhs-rhs/" class="article-date">
  <time class="dt-published" datetime="2025-02-05T17:29:07.000Z" itemprop="datePublished">2025-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/05/js-lhs-rhs/">JavaScriptä¸­LHSå’ŒRHSçš„åŒºåˆ«</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ JavaScript ä¸­ï¼Œ<strong>LHSï¼ˆLeft-Hand Sideï¼‰</strong> å’Œ <strong>RHSï¼ˆRight-Hand Sideï¼‰</strong> ä¸»è¦ç”¨äºæè¿°å˜é‡æŸ¥è¯¢çš„ç±»å‹ï¼Œé€šå¸¸å‡ºç°åœ¨ <strong>ä½œç”¨åŸŸè§£æï¼ˆScope Resolutionï¼‰</strong> è¿‡ç¨‹ä¸­ã€‚å®ƒä»¬çš„æ¦‚å¿µæ¥è‡ªäº JavaScript å¼•æ“åœ¨æ‰§è¡Œä»£ç æ—¶æŸ¥æ‰¾å˜é‡çš„æ–¹å¼ã€‚</p>
<hr>
<h2 id="LHS-æŸ¥è¯¢"><a href="#LHS-æŸ¥è¯¢" class="headerlink" title="LHS æŸ¥è¯¢"></a><strong>LHS æŸ¥è¯¢</strong></h2><p>LHSï¼ˆå·¦ä¾§æŸ¥è¯¢ï¼‰ç”¨äºæŸ¥æ‰¾<strong>å˜é‡çš„èµ‹å€¼ç›®æ ‡</strong>ï¼Œå³<strong>å˜é‡å‡ºç°åœ¨èµ‹å€¼è¿ç®—ç¬¦çš„å·¦ä¾§</strong>ã€‚</p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">10</span>; <span class="comment">// &#x27;a&#x27; è¿›è¡Œ LHS æŸ¥è¯¢</span></span><br><span class="line">    b = <span class="number">20</span>; <span class="comment">// &#x27;b&#x27; è¿›è¡Œ LHS æŸ¥è¯¢ï¼ˆä½† &#x27;b&#x27; æœªå£°æ˜ï¼Œä¼šå˜æˆå…¨å±€å˜é‡æˆ–æŠ¥é”™ï¼‰</span></span><br><span class="line">    a++; <span class="comment">// &#x27;a&#x27; è¿›è¡Œ LHS æŸ¥è¯¢ï¼ˆç›¸å½“äº a = a + 1ï¼‰</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>LHS æŸ¥è¯¢çš„ç›®æ ‡æ˜¯<strong>æ‰¾åˆ°å˜é‡çš„å®¹å™¨ï¼Œä»¥ä¾¿å¯¹å…¶èµ‹å€¼</strong>ã€‚</p>
<h3 id="RHS-æŸ¥è¯¢"><a href="#RHS-æŸ¥è¯¢" class="headerlink" title="RHS æŸ¥è¯¢"></a><strong>RHS æŸ¥è¯¢</strong></h3><p>RHSï¼ˆå³ä¾§æŸ¥è¯¢ï¼‰ç”¨äº<strong>è·å–å˜é‡çš„å€¼</strong>ï¼Œå³<strong>å˜é‡å‡ºç°åœ¨èµ‹å€¼è¿ç®—ç¬¦çš„å³ä¾§æˆ–ä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†</strong>ã€‚</p>
<h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> x = <span class="number">5</span>; <span class="comment">// &#x27;x&#x27; è¿›è¡Œ LHS æŸ¥è¯¢</span></span><br><span class="line">    <span class="keyword">var</span> y = x + <span class="number">10</span>; <span class="comment">// &#x27;x&#x27; è¿›è¡Œ RHS æŸ¥è¯¢ï¼Œå› ä¸ºéœ€è¦è·å– x çš„å€¼</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(y); <span class="comment">// &#x27;y&#x27; è¿›è¡Œ RHS æŸ¥è¯¢ï¼Œå› ä¸º console.log éœ€è¦ y çš„å€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>RHS æŸ¥è¯¢çš„ç›®æ ‡æ˜¯<strong>æ‰¾åˆ°å˜é‡çš„å€¼ï¼Œä»¥ä¾¿ä½¿ç”¨å®ƒ</strong>ã€‚</p>
<h3 id="LHS-vs-RHS-å…·ä½“ç¤ºä¾‹"><a href="#LHS-vs-RHS-å…·ä½“ç¤ºä¾‹" class="headerlink" title="LHS vs RHS å…·ä½“ç¤ºä¾‹"></a><strong>LHS vs RHS å…·ä½“ç¤ºä¾‹</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">5</span>;    <span class="comment">// &#x27;a&#x27; è¿›è¡Œ LHS æŸ¥è¯¢</span></span><br><span class="line">    <span class="keyword">var</span> b = a + <span class="number">2</span>; <span class="comment">// &#x27;a&#x27; è¿›è¡Œ RHS æŸ¥è¯¢ï¼Œ&#x27;b&#x27; è¿›è¡Œ LHS æŸ¥è¯¢</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// &#x27;b&#x27; è¿›è¡Œ RHS æŸ¥è¯¢</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>ä»£ç </th>
<th>LHS æŸ¥è¯¢</th>
<th>RHS æŸ¥è¯¢</th>
</tr>
</thead>
<tbody><tr>
<td><code>var a = 5;</code></td>
<td><code>a</code></td>
<td>æ— </td>
</tr>
<tr>
<td><code>var b = a + 2;</code></td>
<td><code>b</code></td>
<td><code>a</code></td>
</tr>
<tr>
<td><code>console.log(b);</code></td>
<td>æ— </td>
<td><code>b</code></td>
</tr>
</tbody></table>
<h2 id="LHS-æŸ¥è¯¢å¤±è´¥çš„åæœ"><a href="#LHS-æŸ¥è¯¢å¤±è´¥çš„åæœ" class="headerlink" title="LHS æŸ¥è¯¢å¤±è´¥çš„åæœ"></a><strong>LHS æŸ¥è¯¢å¤±è´¥çš„åæœ</strong></h2><h3 id="1-åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆé-use-strictï¼‰"><a href="#1-åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆé-use-strictï¼‰" class="headerlink" title="1. åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆé use strictï¼‰"></a><strong>1. åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆé <code>use strict</code>ï¼‰</strong></h3><ul>
<li>å¦‚æœ LHS æŸ¥è¯¢çš„å˜é‡æœªå£°æ˜ï¼ŒJavaScript ä¼š<strong>é»˜è®¤åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡</strong>ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">    x = <span class="number">100</span>; <span class="comment">// &#x27;x&#x27; è¿›è¡Œ LHS æŸ¥è¯¢ï¼Œä½†æœªå£°æ˜ï¼Œå› æ­¤å˜æˆå…¨å±€å˜é‡</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// 100 ï¼ˆx å˜æˆäº†å…¨å±€å˜é‡ï¼‰</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆuse-strictï¼‰"><a href="#2-åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆuse-strictï¼‰" class="headerlink" title="2. åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆuse strictï¼‰"></a><strong>2. åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ˆ<code>use strict</code>ï¼‰</strong></h3><ul>
<li>LHS æŸ¥è¯¢æ‰¾ä¸åˆ°å˜é‡æ—¶ä¼šæŠ›å‡º <code>ReferenceError</code>ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">    y = <span class="number">200</span>; <span class="comment">// LHS æŸ¥è¯¢å¤±è´¥ï¼ŒæŠ›å‡º ReferenceError</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>(); <span class="comment">// Uncaught ReferenceError: y is not defined</span></span><br></pre></td></tr></table></figure></li>
</ul>
<hr>
<h2 id="RHS-æŸ¥è¯¢å¤±è´¥çš„åæœ"><a href="#RHS-æŸ¥è¯¢å¤±è´¥çš„åæœ" class="headerlink" title="RHS æŸ¥è¯¢å¤±è´¥çš„åæœ"></a><strong>RHS æŸ¥è¯¢å¤±è´¥çš„åæœ</strong></h2><ul>
<li>**å¦‚æœ RHS æŸ¥è¯¢çš„å˜é‡æœªæ‰¾åˆ°ï¼ŒJavaScript ä¼šæŠ›å‡º <code>ReferenceError</code>**ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(z); <span class="comment">// RHS æŸ¥è¯¢å¤±è´¥ï¼ŒæŠ›å‡º ReferenceError</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">test</span>(); <span class="comment">// Uncaught ReferenceError: z is not defined</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><table>
<thead>
<tr>
<th>æŸ¥è¯¢ç±»å‹</th>
<th>ä½œç”¨</th>
<th>å¤±è´¥æ—¶çš„è¡Œä¸º</th>
</tr>
</thead>
<tbody><tr>
<td><strong>LHS æŸ¥è¯¢</strong></td>
<td>æŸ¥æ‰¾<strong>å˜é‡çš„å­˜å‚¨ä½ç½®</strong>ï¼Œç”¨äº<strong>èµ‹å€¼</strong></td>
<td><strong>éä¸¥æ ¼æ¨¡å¼</strong>ï¼šåˆ›å»ºå…¨å±€å˜é‡<br><strong>ä¸¥æ ¼æ¨¡å¼</strong>ï¼š<code>ReferenceError</code></td>
</tr>
<tr>
<td><strong>RHS æŸ¥è¯¢</strong></td>
<td>æŸ¥æ‰¾<strong>å˜é‡çš„å€¼</strong>ï¼Œç”¨äº<strong>è¯»å–</strong></td>
<td><code>ReferenceError</code></td>
</tr>
</tbody></table>
<p>LHS ä¸»è¦ç”¨äºèµ‹å€¼æ“ä½œï¼Œè€Œ RHS ä¸»è¦ç”¨äºå–å€¼æ“ä½œã€‚ç†è§£å®ƒä»¬å¯¹äº<strong>ä½œç”¨åŸŸè§£æ</strong>å’Œ<strong>é”™è¯¯è°ƒè¯•</strong>éå¸¸é‡è¦ï¼ ğŸš€</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/05/js-lhs-rhs/" data-id="cm6rqgi2c000am6q2condb97x" data-title="JavaScriptä¸­LHSå’ŒRHSçš„åŒºåˆ«" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-redis-skip-list" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/18/redis-skip-list/" class="article-date">
  <time class="dt-published" datetime="2024-11-18T20:58:57.000Z" itemprop="datePublished">2024-11-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Redis/">Redis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/11/18/redis-skip-list/">Redisä¸­çš„è·³è·ƒè¡¨(skiplist)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>è·³è·ƒè¡¨(skiplist)æ˜¯ä¸€ç§æœ‰åºæ•°æ®ç»“æ„ï¼Œæ”¯æŒå¹³å‡O(log(N))ï¼Œæœ€åO(N)å¤æ‚åº¦çš„èŠ‚ç‚¹æŸ¥æ‰¾</p>
<p>æŸ¥æ‰¾ï¼šå¹³å‡O(log(N))<br>æ’å…¥ï¼šå¹³å‡O(log(N))</p>
<p>Redisä½¿ç”¨è·³è·ƒè¡¨ä½œä¸ºæœ‰åºé›†åˆé”®çš„åº•å±‚å®ç°ä¹‹ä¸€ï¼Œå¦‚æœä¸€ä¸ªæœ‰åºé›†åˆåŒ…å«çš„å…ƒç´ æ•°é‡æ¯”è¾ƒå¤šï¼Œæˆ–è€…æˆå‘˜æ˜¯æ¯”è¾ƒé•¿çš„å­—ç¬¦ä¸²æ—¶ï¼ŒRediså°±ä¼šä½¿ç”¨è·³è·ƒè¡¨æ¥ä½œä¸ºæœ‰åºé›†åˆé”®çš„åº•å±‚å®ç°</p>
<h1 id="åˆ›å»ºè·³è·ƒè¡¨"><a href="#åˆ›å»ºè·³è·ƒè¡¨" class="headerlink" title="åˆ›å»ºè·³è·ƒè¡¨"></a>åˆ›å»ºè·³è·ƒè¡¨</h1><p>ä¸€å¼€å§‹æœ‰Nä¸ªå…ƒç´ ï¼ŒæŒ‰ç…§ä»å°åˆ°å¤§æ’åˆ—ï¼š</p>
<p>2 -&gt; 8 -&gt; 10 -&gt; 11 -&gt; 13 -&gt; 19 -&gt; 20 -&gt; 22 -&gt; 26 -&gt; 30</p>
<p>å¯ä»¥ç”¨å•å‘åˆ—è¡¨æ¥å­˜å‚¨ï¼Œé“¾è¡¨çš„ç¼ºç‚¹åœ¨äºæ— æ³•éšæœºè®¿é—®ï¼ŒæŸ¥æ‰¾å¾ˆæ…¢</p>
<p>ç°åœ¨åœ¨é“¾è¡¨çš„åŸºç¡€ä¸Šæ”¹è¿›ï¼Œé¦–å…ˆåœ¨å¼€å¤´åŠ ä¸€ä¸ªèŠ‚ç‚¹Sentinel</p>
<img src="/2024/11/18/redis-skip-list/skiplist-l0.png" class="">

<p>L0å±‚çš„æŒ‡é’ˆä¸€ä¸ªæ¥ä¸€ä¸ªï¼Œæ²¡æœ‰è·³è·ƒ<br>ä»L1å±‚å¼€å§‹æœ‰è·³è·ƒï¼Œç°åœ¨å¼€å§‹æ·»åŠ L1å±‚çš„æŒ‡é’ˆ</p>
<p>è·³è·ƒè¡¨éšæœºå†³å®šèŠ‚ç‚¹é«˜åº¦æ˜¯å¦å¢é•¿ï¼Œè¿›è¿‡ä¸€è½®å¾ªç¯ï¼Œå¾—åˆ°L1å±‚ï¼š</p>
<img src="/2024/11/18/redis-skip-list/skiplist-l1.png" class="">

<p>å†ç»è¿‡ä¸€è½®å¾ªç¯ï¼Œå¾—åˆ°L2å±‚ï¼š</p>
<img src="/2024/11/18/redis-skip-list/skiplist-l2.png" class="">

<p>å†ç»è¿‡ä¸€è½®å¾ªç¯ï¼Œå¾—åˆ°L3å±‚ï¼š</p>
<img src="/2024/11/18/redis-skip-list/skiplist-l3.png" class="">

<p>è·³è·ƒåˆ—è¡¨çš„å±‚æ•°ç”±ç”¨æˆ·è‡ªå·±å†³å®š<br>æœ€å¥½ç”¨log(N)å±‚ï¼Œå¯ä»¥ä¿è¯æŸ¥æ‰¾å’Œæ’å…¥å¤æ‚åº¦éƒ½æ˜¯log(N)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/11/18/redis-skip-list/" data-id="cm6rqgi2m0015m6q2ff97f4wf" data-title="Redisä¸­çš„è·³è·ƒè¡¨(skiplist)" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-android-appcrash-nullexception" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/11/17/android-appcrash-nullexception/" class="article-date">
  <time class="dt-published" datetime="2024-11-17T22:10:35.000Z" itemprop="datePublished">2024-11-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/11/17/android-appcrash-nullexception/">Androidå¼€å‘ä¸­java.lang.NullableExceptionå¯¼è‡´çš„app crash</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>è®°å½•é‡åˆ°çš„ä¸€ä¸ªBug:</p>
<p>åœ¨å†™Android Appæ—¶å‡ºç°äº†ä¸€ä¸ªapp crashï¼Œ<br>å¼‚å¸¸ä¿¡æ¯æ˜¯<code>java.lang.NullPointerException</code></p>
<p>å› ä¸ºæ–°é¡¹ç›®ç”¨çš„Kotlinï¼Œè€ŒåŒæ—¶éœ€è¦ç”¨åˆ°è€çš„Javaä»£ç </p>
<p>åŸæœ¬Javaä»£ç æœ‰ä¸€ä¸ªInterfaceï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MetaDataRefreshCallback</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onComplete</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">onError</span><span class="params">(Exception error)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ–°çš„Kotlinä»£ç é‡Œå®ç°äº†è¿™ä¸ªæ¥å£ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> callback = <span class="keyword">object</span> : MetadataRefreshCallback &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onComplete</span><span class="params">()</span></span> &#123;</span><br><span class="line">        continuation.resume(<span class="built_in">Unit</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(error: <span class="type">Exception</span>)</span></span> &#123;</span><br><span class="line">        continuation.resumeWithException(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜å°±å‡ºåœ¨Javaçš„Exceptionç±»å‹å¯èƒ½æ˜¯nullï¼Œè€ŒKotlinå¦‚æœæ²¡æœ‰å£°æ˜ç±»å‹ä¸ºNullableï¼Œé»˜è®¤ä¸ä¼šæ˜¯nullçš„ã€‚å¦‚æœä¼ äº†nullè¿›å»ï¼Œå°±ä¼šæŠ›å¼‚å¸¸</p>
<p>è€Œè¿™é‡Œçš„å¼‚å¸¸ä¸ä¼šè¢«å¤–å±‚çš„<code>try-catch</code>æ•è·ï¼Œä»è€Œå¯¼è‡´app crash</p>
<p>Fixçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> callback = <span class="keyword">object</span> : MetadataRefreshCallback &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onComplete</span><span class="params">()</span></span> &#123;</span><br><span class="line">        continuation.resume(<span class="built_in">Unit</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(error: <span class="type">Exception</span>?)</span></span> &#123;</span><br><span class="line">        continuation.resumeWithException(error ?: Exception(<span class="string">&quot;Error in refreshing items&quot;</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åœ¨æŠŠJavaä»£ç è½¬åŒ–æˆKotlinæ—¶ï¼Œè¦æ³¨æ„å¯¹è±¡çš„nullå€¼ï¼ŒJavaé‡Œæ²¡æœ‰Nullableç±»å‹ï¼Œå¦‚æœKotlinä¸è®¾ç½®æˆNullableï¼Œä¼šè®¤ä¸ºè¯¥å¯¹è±¡ä¸å¯èƒ½ä¸ºnullï¼Œå¦‚æœè¿è¡Œæ—¶å‡ºç°äº†nullï¼Œåˆ™ä¼šæŠ›<code>java.lang.NullableException</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/11/17/android-appcrash-nullexception/" data-id="cm6rqgi210000m6q2gu7jd6bx" data-title="Androidå¼€å‘ä¸­java.lang.NullableExceptionå¯¼è‡´çš„app crash" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Bug/" rel="tag">Bug</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-auto-layout" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/07/auto-layout/" class="article-date">
  <time class="dt-published" datetime="2023-08-07T16:16:38.000Z" itemprop="datePublished">2023-08-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/07/auto-layout/">iOSä¸­çš„Auto Layout</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>æˆ‘ä»¬æ¥åŠ¨æ‰‹å®ç°ä¸€ä¸ªAuto layout</p>
<h2 id="1-åˆå§‹åŒ–ä¸€ä¸ªiOS-App"><a href="#1-åˆå§‹åŒ–ä¸€ä¸ªiOS-App" class="headerlink" title="1. åˆå§‹åŒ–ä¸€ä¸ªiOS App"></a>1. åˆå§‹åŒ–ä¸€ä¸ªiOS App</h2><p>æˆ‘ä»¬æ‰“ç®—ç”¨ä»£ç æ¥å®ç°ä¸€ä¸ªAuto Layoutï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨Storyboardï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™æŠŠStoryboardå»æ‰<br>åŒæ—¶ä¿®æ”¹<code>SceneDelegate.swift</code>ï¼Œå®šä¹‰<code>UIWindow</code>ï¼Œå¹¶ä¸”ç»™windowæŒ‡å®šä¸€ä¸ª<code>rootViewController</code>ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">func</span> <span class="title function_">scene</span>(<span class="keyword">_</span> <span class="params">scene</span>: <span class="type">UIScene</span>, <span class="params">willConnectTo</span> <span class="params">session</span>: <span class="type">UISceneSession</span>, <span class="params">options</span> <span class="params">connectionOptions</span>: <span class="type">UIScene</span>.<span class="type">ConnectionOptions</span>) &#123;</span><br><span class="line">    <span class="comment">// Use this method to optionally configure and attach the UIWindow `window` to the provided UIWindowScene `scene`.</span></span><br><span class="line">    <span class="comment">// If using a storyboard, the `window` property will automatically be initialized and attached to the scene.</span></span><br><span class="line">    <span class="comment">// This delegate does not imply the connecting scene or session are new (see `application:configurationForConnectingSceneSession` instead).</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> windowScene <span class="operator">=</span> (scene <span class="keyword">as?</span> <span class="type">UIWindowScene</span>) <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">    window <span class="operator">=</span> <span class="type">UIWindow</span>(windowScene: windowScene)</span><br><span class="line">    </span><br><span class="line">    window<span class="operator">?</span>.rootViewController <span class="operator">=</span> <span class="type">ViewController</span>()</span><br><span class="line">    window<span class="operator">?</span>.makeKeyAndVisible()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-æ·»åŠ ä¸€ä¸ªImageView"><a href="#2-æ·»åŠ ä¸€ä¸ªImageView" class="headerlink" title="2. æ·»åŠ ä¸€ä¸ªImageView"></a>2. æ·»åŠ ä¸€ä¸ªImageView</h2><p>æˆ‘ä»¬åœ¨<code>ViewController</code>çš„<code>viewDidLoad</code>æ–¹æ³•é‡Œæ·»åŠ ä¸€ä¸ª<code>UIImageView</code>ï¼Œå¹¶ä¸”è®¾ç½®å®ƒçš„<code>image</code>å±æ€§ä¸º<code>UIImage(named: &quot;image&quot;)</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        imageView.frame <span class="operator">=</span> <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">200</span>, height: <span class="number">200</span>)</span><br><span class="line">        view.addSubview(imageView)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-01.png" class="" width="300">

<p>è¿™é‡Œä½¿ç”¨çš„æ˜¯åŸºäºframeçš„layoutï¼Œéœ€è¦æ‰‹åŠ¨è®¡ç®—å’Œè°ƒæ•´ä½ç½®</p>
<h2 id="3-ä½¿ç”¨Auto-Layout"><a href="#3-ä½¿ç”¨Auto-Layout" class="headerlink" title="3. ä½¿ç”¨Auto Layout"></a>3. ä½¿ç”¨Auto Layout</h2><p>æˆ‘ä»¬æ¥æ·»åŠ ä¸€äº›çº¦æŸï¼Œä½¿ç”¨Auto Layoutæ¥å®ç°å¸ƒå±€</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        view.addSubview(imageView)</span><br><span class="line">        </span><br><span class="line">        imageView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        imageView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        imageView.centerYAnchor.constraint(equalTo: view.centerYAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        imageView.heightAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        imageView.widthAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¾—åˆ°çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-02.png" class="" width="300">

<p>æˆ‘ä»¬å¹¶ä¸æƒ³æŠŠImageæ”¾åœ¨æ­£ä¸­å¿ƒï¼Œè€Œæ˜¯ä¸­å¿ƒåä¸Šçš„éƒ¨åˆ†ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨<code>topAnchor</code>:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        view.addSubview(imageView)</span><br><span class="line">        </span><br><span class="line">        imageView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        imageView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        imageView.topAnchor.constraint(equalTo: view.topAnchor, constant: <span class="number">100</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        imageView.heightAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        imageView.widthAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-03.png" class="" width="300">

<h2 id="4-æ•´ç†ä»£ç "><a href="#4-æ•´ç†ä»£ç " class="headerlink" title="4. æ•´ç†ä»£ç "></a>4. æ•´ç†ä»£ç </h2><p>æˆ‘ä»¬å¯ä»¥æŠŠåˆ›å»º<code>UIImageView</code>çš„ä»£ç æå–å‡ºæ¥ï¼Œæ”¾åˆ°<code>viewDidLoad</code>ä¹‹å¤–ï¼Œè¿™æ ·ä»£ç çœ‹èµ·æ¥æ›´æ•´æ´ä¸€äº›</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dogeImageView: <span class="type">UIImageView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        imageView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">return</span> imageView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        view.addSubview(dogeImageView)</span><br><span class="line">        configureLayout()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">configureLayout</span>() &#123;</span><br><span class="line">        dogeImageView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.topAnchor.constraint(equalTo: view.topAnchor, constant: <span class="number">100</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.heightAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.widthAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°çš„ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-04.png" class="" width="300">

<p>å†åŠ ä¸Šä¸€äº›styleï¼š<br><code>textAlignment</code>ï¼šæ–‡å­—å¯¹é½æ–¹å¼<br><code>isEditable</code>ï¼šæ˜¯å¦å¯ä»¥ç¼–è¾‘ï¼Œé»˜è®¤æ˜¯true<br><code>isScrollEnabled</code>ï¼šæ˜¯å¦å¯ä»¥æ»šåŠ¨ï¼Œé»˜è®¤æ˜¯true</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dogeImageView: <span class="type">UIImageView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        imageView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">return</span> imageView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> descriptionTextView: <span class="type">UITextView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textView <span class="operator">=</span> <span class="type">UITextView</span>()</span><br><span class="line">        textView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.text <span class="operator">=</span> <span class="string">&quot;Join us today in our fun and games!&quot;</span></span><br><span class="line">        textView.font <span class="operator">=</span> <span class="type">UIFont</span>.boldSystemFont(ofSize: <span class="number">18</span>)</span><br><span class="line">        textView.textAlignment <span class="operator">=</span> .center</span><br><span class="line">        textView.isEditable <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.isScrollEnabled <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        <span class="keyword">return</span> textView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        view.addSubview(dogeImageView)</span><br><span class="line">        view.addSubview(descriptionTextView)</span><br><span class="line">        configureLayout()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">configureLayout</span>() &#123;</span><br><span class="line">        dogeImageView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.topAnchor.constraint(equalTo: view.topAnchor, constant: <span class="number">100</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.heightAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.widthAnchor.constraint(equalToConstant: <span class="number">200</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        </span><br><span class="line">        descriptionTextView.topAnchor.constraint(equalTo: dogeImageView.bottomAnchor, constant: <span class="number">150</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.leadingAnchor.constraint(equalTo: view.leadingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.trailingAnchor.constraint(equalTo: view.trailingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-05.png" class="" width="300">

<h2 id="5-æ”¯æŒæ—‹è½¬"><a href="#5-æ”¯æŒæ—‹è½¬" class="headerlink" title="5. æ”¯æŒæ—‹è½¬"></a>5. æ”¯æŒæ—‹è½¬</h2><p>åœ¨æ—‹è½¬æˆæ¨ªå±åï¼Œå›¾ç‰‡ä¼šè¢«å‹ç¼©å˜å½¢ï¼Œå¹¶ä¸”æ–‡å­—ä¼šè¢«é®æŒ¡ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œè°ƒæ•´</p>
<img src="/2023/08/07/auto-layout/auto-layout-06.png" class="" title="height&#x3D;200">

<p>è§£å†³å›¾ç‰‡å‹ç¼©ï¼Œå¯ä»¥è®¾ç½®<code>contentMode</code>ä¸º<code>.scaleAspectFit</code>ï¼Œè®©å›¾ç‰‡çš„å®½é«˜æ¯”ä¿æŒä¸å˜<br>è§£å†³æ–‡å­—è¢«é®æŒ¡ï¼Œä¸€ä¸ªæ–¹æ³•æ˜¯ä½¿ç”¨container viewï¼Œè®©å®ƒåªå å±å¹•çš„ä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œç„¶åæŠŠå›¾ç‰‡æ”¾åœ¨container viewé‡Œï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æœ‰è¶³å¤Ÿçš„ç©ºé—´æ¥æ˜¾ç¤ºæ–‡å­—</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> dogeImageView: <span class="type">UIImageView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        imageView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        imageView.contentMode <span class="operator">=</span> .scaleAspectFit</span><br><span class="line">        <span class="keyword">return</span> imageView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> descriptionTextView: <span class="type">UITextView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textView <span class="operator">=</span> <span class="type">UITextView</span>()</span><br><span class="line">        textView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.text <span class="operator">=</span> <span class="string">&quot;Join us today in our fun and games!&quot;</span></span><br><span class="line">        textView.font <span class="operator">=</span> <span class="type">UIFont</span>.boldSystemFont(ofSize: <span class="number">18</span>)</span><br><span class="line">        textView.textAlignment <span class="operator">=</span> .center</span><br><span class="line">        textView.isEditable <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.isScrollEnabled <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        <span class="keyword">return</span> textView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        view.addSubview(descriptionTextView)</span><br><span class="line">        configureLayout()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">configureLayout</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> topImageContainerView <span class="operator">=</span> <span class="type">UIView</span>()</span><br><span class="line">        view.addSubview(topImageContainerView)</span><br><span class="line">        topImageContainerView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        </span><br><span class="line">        topImageContainerView.topAnchor.constraint(equalTo: view.topAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.leadingAnchor.constraint(equalTo: view.leadingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.trailingAnchor.constraint(equalTo: view.trailingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.heightAnchor.constraint(equalTo: view.heightAnchor, multiplier: <span class="number">0.5</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.addSubview(dogeImageView)</span><br><span class="line">        </span><br><span class="line">        dogeImageView.centerXAnchor.constraint(equalTo: topImageContainerView.centerXAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.centerYAnchor.constraint(equalTo: topImageContainerView.centerYAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.heightAnchor.constraint(equalTo: topImageContainerView.heightAnchor, multiplier: <span class="number">0.5</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        </span><br><span class="line">        descriptionTextView.topAnchor.constraint(equalTo: topImageContainerView.bottomAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.leadingAnchor.constraint(equalTo: view.leadingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.trailingAnchor.constraint(equalTo: view.trailingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚å›¾ï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-07.png" class="" title="height&#x3D;200">

<h2 id="6-ä½¿ç”¨attributedTextæ·»åŠ å‰¯æ ‡é¢˜"><a href="#6-ä½¿ç”¨attributedTextæ·»åŠ å‰¯æ ‡é¢˜" class="headerlink" title="6. ä½¿ç”¨attributedTextæ·»åŠ å‰¯æ ‡é¢˜"></a>6. ä½¿ç”¨<code>attributedText</code>æ·»åŠ å‰¯æ ‡é¢˜</h2><p><code>UITextView</code>çš„<code>text</code>å±æ€§æ˜¯<code>String</code>ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨æ–‡å­—ä¸­æ·»åŠ ä¸€äº›æ ·å¼ï¼Œæ¯”å¦‚é¢œè‰²ã€å­—ä½“ç­‰ï¼Œå°±éœ€è¦ä½¿ç”¨<code>attributedText</code>å±æ€§ï¼Œå®ƒçš„ç±»å‹æ˜¯<code>NSAttributedString</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>NSMutableAttributedString</code>æ¥åˆ›å»ºå®ƒ</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> dogeImageView: <span class="type">UIImageView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        imageView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        imageView.contentMode <span class="operator">=</span> .scaleAspectFit</span><br><span class="line">        <span class="keyword">return</span> imageView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> descriptionTextView: <span class="type">UITextView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textView <span class="operator">=</span> <span class="type">UITextView</span>()</span><br><span class="line">        <span class="keyword">let</span> attributedText <span class="operator">=</span> <span class="type">NSMutableAttributedString</span>(</span><br><span class="line">            string: <span class="string">&quot;Join us today in our fun and games!&quot;</span>,</span><br><span class="line">            attributes: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">UIFont</span>.boldSystemFont(ofSize: <span class="number">18</span>)])</span><br><span class="line">        </span><br><span class="line">        attributedText.append(<span class="type">NSMutableAttributedString</span>(</span><br><span class="line">            string: <span class="string">&quot;<span class="subst">\n</span><span class="subst">\n</span><span class="subst">\n</span>Are you ready for loads and loads of fun? Don&#x27;t wait any longer! We hope to see you in our stores soon.&quot;</span>,</span><br><span class="line">            attributes: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">UIFont</span>.systemFont(ofSize: <span class="number">13</span>),</span><br><span class="line">                         <span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">UIColor</span>.gray]))</span><br><span class="line">        textView.attributedText <span class="operator">=</span> attributedText</span><br><span class="line">        </span><br><span class="line">        textView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.textAlignment <span class="operator">=</span> .center</span><br><span class="line">        textView.isEditable <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.isScrollEnabled <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        <span class="keyword">return</span> textView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        view.addSubview(descriptionTextView)</span><br><span class="line">        configureLayout()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">configureLayout</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> topImageContainerView <span class="operator">=</span> <span class="type">UIView</span>()</span><br><span class="line">        view.addSubview(topImageContainerView)</span><br><span class="line">        topImageContainerView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        </span><br><span class="line">        topImageContainerView.topAnchor.constraint(equalTo: view.topAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.leadingAnchor.constraint(equalTo: view.leadingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.trailingAnchor.constraint(equalTo: view.trailingAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.heightAnchor.constraint(equalTo: view.heightAnchor, multiplier: <span class="number">0.5</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        topImageContainerView.addSubview(dogeImageView)</span><br><span class="line">        </span><br><span class="line">        dogeImageView.centerXAnchor.constraint(equalTo: topImageContainerView.centerXAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.centerYAnchor.constraint(equalTo: topImageContainerView.centerYAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        dogeImageView.heightAnchor.constraint(equalTo: topImageContainerView.heightAnchor, multiplier: <span class="number">0.5</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        </span><br><span class="line">        descriptionTextView.topAnchor.constraint(equalTo: topImageContainerView.bottomAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: <span class="number">24</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: <span class="operator">-</span><span class="number">24</span>).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        descriptionTextView.bottomAnchor.constraint(equalTo: view.bottomAnchor).isActive <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚å›¾ï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-08.png" class="" width="300">

<h2 id="7-æ·»åŠ æŒ‰é’®"><a href="#7-æ·»åŠ æŒ‰é’®" class="headerlink" title="7. æ·»åŠ æŒ‰é’®"></a>7. æ·»åŠ æŒ‰é’®</h2><p>StackViewå¯ä»¥å¸®åŠ©è§£å†³safeAreaçš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæŒ‰é’®æ”¾åœ¨ä¸€ä¸ªStackViewä¸­ï¼Œç„¶åæŠŠStackViewæ”¾åœ¨åº•éƒ¨ï¼Œè¿™æ ·å°±ä¸ç”¨è€ƒè™‘safeAreaçš„é—®é¢˜äº†</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ViewController</span>: <span class="title class_">UIViewController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> dogeImageView: <span class="type">UIImageView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> imageView <span class="operator">=</span> <span class="type">UIImageView</span>(image: <span class="type">UIImage</span>(named: <span class="string">&quot;doge&quot;</span>))</span><br><span class="line">        imageView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        imageView.contentMode <span class="operator">=</span> .scaleAspectFit</span><br><span class="line">        <span class="keyword">return</span> imageView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> descriptionTextView: <span class="type">UITextView</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> textView <span class="operator">=</span> <span class="type">UITextView</span>()</span><br><span class="line">        <span class="keyword">let</span> attributedText <span class="operator">=</span> <span class="type">NSMutableAttributedString</span>(</span><br><span class="line">            string: <span class="string">&quot;Join us today in our fun and games!&quot;</span>,</span><br><span class="line">            attributes: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">UIFont</span>.boldSystemFont(ofSize: <span class="number">18</span>)])</span><br><span class="line">        </span><br><span class="line">        attributedText.append(<span class="type">NSMutableAttributedString</span>(</span><br><span class="line">            string: <span class="string">&quot;<span class="subst">\n</span><span class="subst">\n</span><span class="subst">\n</span>Are you ready for loads and loads of fun? Don&#x27;t wait any longer! We hope to see you in our stores soon.&quot;</span>,</span><br><span class="line">            attributes: [<span class="type">NSAttributedString</span>.<span class="type">Key</span>.font: <span class="type">UIFont</span>.systemFont(ofSize: <span class="number">13</span>),</span><br><span class="line">                         <span class="type">NSAttributedString</span>.<span class="type">Key</span>.foregroundColor: <span class="type">UIColor</span>.gray]))</span><br><span class="line">        textView.attributedText <span class="operator">=</span> attributedText</span><br><span class="line">        </span><br><span class="line">        textView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.textAlignment <span class="operator">=</span> .center</span><br><span class="line">        textView.isEditable <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.isScrollEnabled <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        textView.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        <span class="keyword">return</span> textView</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> previousButton: <span class="type">UIButton</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> button <span class="operator">=</span> <span class="type">UIButton</span>(type: .system)</span><br><span class="line">        button.setTitle(<span class="string">&quot;Prev&quot;</span>, for: .normal)</span><br><span class="line">        button.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        button.titleLabel<span class="operator">?</span>.font <span class="operator">=</span> <span class="type">UIFont</span>.boldSystemFont(ofSize: <span class="number">14</span>)</span><br><span class="line">        button.setTitleColor(.gray, for: .normal)</span><br><span class="line">        <span class="keyword">return</span> button</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> nextButton: <span class="type">UIButton</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> button <span class="operator">=</span> <span class="type">UIButton</span>(type: .system)</span><br><span class="line">        button.setTitle(<span class="string">&quot;Next&quot;</span>, for: .normal)</span><br><span class="line">        button.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        button.titleLabel<span class="operator">?</span>.font <span class="operator">=</span> <span class="type">UIFont</span>.boldSystemFont(ofSize: <span class="number">14</span>)</span><br><span class="line">        button.setTitleColor(.red, for: .normal)</span><br><span class="line">        <span class="keyword">return</span> button</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> pageControl: <span class="type">UIPageControl</span> <span class="operator">=</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> pc <span class="operator">=</span> <span class="type">UIPageControl</span>()</span><br><span class="line">        pc.currentPage <span class="operator">=</span> <span class="number">0</span></span><br><span class="line">        pc.numberOfPages <span class="operator">=</span> <span class="number">4</span></span><br><span class="line">        pc.currentPageIndicatorTintColor <span class="operator">=</span> .red</span><br><span class="line">        pc.pageIndicatorTintColor <span class="operator">=</span> .gray</span><br><span class="line">        <span class="keyword">return</span> pc</span><br><span class="line">    &#125;()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">func</span> <span class="title function_">viewDidLoad</span>() &#123;</span><br><span class="line">        <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">        <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">        view.backgroundColor <span class="operator">=</span> .systemYellow</span><br><span class="line">        view.addSubview(descriptionTextView)</span><br><span class="line">        </span><br><span class="line">        configureBottomControls()</span><br><span class="line">        </span><br><span class="line">        configureLayout()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="keyword">func</span> <span class="title function_">configureBottomControls</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> bottomControlsStackView <span class="operator">=</span> <span class="type">UIStackView</span>(arrangedSubviews: [previousButton, pageControl, nextButton])</span><br><span class="line">        bottomControlsStackView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        bottomControlsStackView.distribution <span class="operator">=</span> .fillEqually</span><br><span class="line">        bottomControlsStackView.axis <span class="operator">=</span> .horizontal</span><br><span class="line">        </span><br><span class="line">        view.addSubview(bottomControlsStackView)</span><br><span class="line">        </span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.activate([</span><br><span class="line">            bottomControlsStackView.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor),</span><br><span class="line">            bottomControlsStackView.leadingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.leadingAnchor),</span><br><span class="line">            bottomControlsStackView.trailingAnchor.constraint(equalTo: view.safeAreaLayoutGuide.trailingAnchor),</span><br><span class="line">            bottomControlsStackView.heightAnchor.constraint(equalToConstant: <span class="number">50</span>)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">func</span> <span class="title function_">configureLayout</span>() &#123;</span><br><span class="line">        <span class="keyword">let</span> topImageContainerView <span class="operator">=</span> <span class="type">UIView</span>()</span><br><span class="line">        view.addSubview(topImageContainerView)</span><br><span class="line">        topImageContainerView.translatesAutoresizingMaskIntoConstraints <span class="operator">=</span> <span class="literal">false</span></span><br><span class="line">        </span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.activate([</span><br><span class="line">            topImageContainerView.topAnchor.constraint(equalTo: view.topAnchor),</span><br><span class="line">            topImageContainerView.leadingAnchor.constraint(equalTo: view.leadingAnchor),</span><br><span class="line">            topImageContainerView.trailingAnchor.constraint(equalTo: view.trailingAnchor),</span><br><span class="line">            topImageContainerView.heightAnchor.constraint(equalTo: view.heightAnchor, multiplier: <span class="number">0.5</span>)</span><br><span class="line">        ])</span><br><span class="line">        topImageContainerView.addSubview(dogeImageView)</span><br><span class="line">        </span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.activate([</span><br><span class="line">            dogeImageView.centerXAnchor.constraint(equalTo: topImageContainerView.centerXAnchor),</span><br><span class="line">            dogeImageView.centerYAnchor.constraint(equalTo: topImageContainerView.centerYAnchor),</span><br><span class="line">            dogeImageView.heightAnchor.constraint(equalTo: topImageContainerView.heightAnchor, multiplier: <span class="number">0.5</span>)</span><br><span class="line">        ])</span><br><span class="line">        </span><br><span class="line">        <span class="type">NSLayoutConstraint</span>.activate([</span><br><span class="line">            descriptionTextView.topAnchor.constraint(equalTo: topImageContainerView.bottomAnchor),</span><br><span class="line">            descriptionTextView.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: <span class="number">24</span>),</span><br><span class="line">            descriptionTextView.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: <span class="operator">-</span><span class="number">24</span>),</span><br><span class="line">            descriptionTextView.bottomAnchor.constraint(equalTo: view.bottomAnchor)</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚å›¾ï¼š</p>
<img src="/2023/08/07/auto-layout/auto-layout-09.png" class="" width="300">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/07/auto-layout/" data-id="cm6rqgi250001m6q21ono3nv6" data-title="iOSä¸­çš„Auto Layout" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-react-children-re-render" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/04/react-children-re-render/" class="article-date">
  <time class="dt-published" datetime="2023-08-04T21:10:09.000Z" itemprop="datePublished">2023-08-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/React/">React</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/04/react-children-re-render/">React Component - å­ç»„ä»¶ä»€ä¹ˆæ—¶å€™ä¼šre-render</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://whereisthemouse.com/react-components-when-do-children-re-render">https://whereisthemouse.com/react-components-when-do-children-re-render</a></p>
<p>React childrenä»€ä¹ˆæ—¶å€™re-renderï¼Ÿ<br>ç­”æ¡ˆä¼¼ä¹å¾ˆç®€å•ï¼š</p>
<ul>
<li>å®ƒä»¬çš„props&#x2F;stateå‘ç”Ÿæ”¹å˜</li>
<li>å®ƒä»¬çš„parent component re-render</li>
</ul>
<p>ç„¶è€Œï¼Œè¿˜æœ‰æ›´å¤š</p>
<h2 id="é€šå¸¸çš„æƒ…å†µ"><a href="#é€šå¸¸çš„æƒ…å†µ" class="headerlink" title="é€šå¸¸çš„æƒ…å†µ"></a>é€šå¸¸çš„æƒ…å†µ</h2><p>å½“æˆ‘ä»¬ç‚¹å‡»ParentComponentçš„Buttonæ—¶ï¼ŒChildComponentä¼šre-renderå—ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ChildComponent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I re-rendered&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ParentComponent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(number + 1)&#125;&gt;&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildComponent</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">ParentComponent</span>;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä¼šçš„ï¼<br>ä½†æ˜¯ï¼ŒChildComponentå®åœ¨æ˜¯ä¸å¿…è¦å»re-renderã€‚é‚£ä¹ˆè¯¥æ€ä¹ˆåšï¼Ÿ</p>
<h2 id="æ–¹æ³•ä¸€-React-memo"><a href="#æ–¹æ³•ä¸€-React-memo" class="headerlink" title="æ–¹æ³•ä¸€ React.memo"></a>æ–¹æ³•ä¸€ React.memo</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; memo &#125; <span class="keyword">from</span> <span class="string">&#x27;React&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ChildComponent</span> = <span class="title function_">memo</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I re-rendered&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="æ–¹æ³•äºŒ-children-as-a-prop"><a href="#æ–¹æ³•äºŒ-children-as-a-prop" class="headerlink" title="æ–¹æ³•äºŒ children as a prop"></a>æ–¹æ³•äºŒ children as a prop</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ChildComponent</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;I re-rendered&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ParentComponent</span> = (<span class="params">&#123; children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(number + 1)&#125;&gt;&#123;number&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ParentComponent</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildComponent</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ParentComponent</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>

<h2 id="åº”ç”¨-React-Context"><a href="#åº”ç”¨-React-Context" class="headerlink" title="åº”ç”¨ - React Context"></a>åº”ç”¨ - React Context</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªéå¸¸é‡çš„React subtreeï¼Œæˆ‘ä»¬ä¸æƒ³ç»å¸¸re-renderå®ƒ<br>ä¸‹é¢ä»£ç ï¼Œåœ¨æ¯ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®éƒ½ä¼šå¯¼è‡´ä¸¤ä¸ªChildç»„ä»¶re-render</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useContext, createContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Context</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ChildWithCount</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count, setCount &#125; = <span class="title function_">useContext</span>(<span class="title class_">Context</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ChildWithCount re-renders&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ExpensiveChild</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ExpensiveChild re-renders&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Expensive child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">CountContext</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> contextValue = &#123; count, setCount &#125;;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Context.Provider</span> <span class="attr">value</span>=<span class="string">&#123;contextValue&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildWithCount</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ExpensiveChild</span> /&gt;</span> // Imagine re-rendering this component is expensive</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Context.Provider</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">CountContext</span> /&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¹‹å‰æ‰€æåˆ°çš„æ–¹æ³•æ”¹å˜å®ƒä»¬çš„ç»“æ„ï¼ŒæŠŠchildrenä½œä¸ºä¸€ä¸ªpropï¼Œä»è€Œé¿å…æ— å…³çš„åŒçº§ç»„ä»¶re-render</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useState, useContext, createContext &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Context</span> = <span class="title function_">createContext</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ChildWithCount</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; count, setCount &#125; = <span class="title function_">useContext</span>(<span class="title class_">Context</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ChildWithCount re-renders&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setCount(count + 1)&#125;&gt;&#123;count&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>Child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">ExpensiveChild</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ExpensiveChild re-renders&#x27;</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Expensive child<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">CountContext</span> = (<span class="params">&#123; children &#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> contextValue = &#123; count, setCount &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">Context.Provider</span> <span class="attr">value</span>=<span class="string">&#123;contextValue&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">Context.Provider</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">App</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">CountContext</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ChildWithCount</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">ExpensiveChild</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">CountContext</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/04/react-children-re-render/" data-id="cm6rqgi2e000dm6q27x0t66ti" data-title="React Component - å­ç»„ä»¶ä»€ä¹ˆæ—¶å€™ä¼šre-render" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ui-vc-lifecycle" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/04/ui-vc-lifecycle/" class="article-date">
  <time class="dt-published" datetime="2023-08-04T13:33:28.000Z" itemprop="datePublished">2023-08-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/04/ui-vc-lifecycle/">iOSä¸­çš„UIViewControllerç”Ÿå‘½å‘¨æœŸ</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="viewDidLoad"><a href="#viewDidLoad" class="headerlink" title="viewDidLoad()"></a><code>viewDidLoad()</code></h2><p>åœ¨content viewåœ¨å†…å­˜ä¸­è¢«åˆ›å»ºï¼Œæˆ–è€…ä»StoryboardåŠ è½½æ—¶è°ƒç”¨<br>é€‚åˆè®¾ç½®Notificationã€ä»InternetåŠ è½½æ•°æ®ï¼Œè®¾ç½®ä¸€äº›UIçš„åˆå§‹çŠ¶æ€</p>
<h2 id="viewWillAppear-animated-Bool"><a href="#viewWillAppear-animated-Bool" class="headerlink" title="viewWillAppear(_ animated: Bool)"></a><code>viewWillAppear(_ animated: Bool)</code></h2><p>åœ¨content viewå°†è¦è¢«åŠ è½½åˆ°View hierarchyä¸­æ—¶è°ƒç”¨<br>ä¸æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æƒ…å†µï¼š</p>
<ul>
<li>å½“å‰view controllerçš„viewè¢«å¦ä¸€ä¸ªview controllerçš„viewè¦†ç›–</li>
<li>å½“å‰view controllerçš„viewçš„IsHiddenå±æ€§è¢«è®¾ç½®ä¸ºtrue</li>
</ul>
<h2 id="viewDidAppear-animated-Bool"><a href="#viewDidAppear-animated-Bool" class="headerlink" title="viewDidAppear(_ animated: Bool)"></a><code>viewDidAppear(_ animated: Bool)</code></h2><p>åœ¨content viewå·²ç»è¢«åŠ è½½åˆ°View hierarchyä¸­æ—¶è°ƒç”¨<br>é€‚åˆæ‰§è¡Œä¸€äº›åŠ¨ç”»ï¼Œä»¥åŠé€šè¿‡APIåŠ è½½æ•°æ®</p>
<h2 id="viewWillDisappear-animated-Bool"><a href="#viewWillDisappear-animated-Bool" class="headerlink" title="viewWillDisappear(_ animated: Bool)"></a><code>viewWillDisappear(_ animated: Bool)</code></h2><p>åœ¨content viewå°†è¦ä»View hierarchyä¸­ç§»é™¤æ—¶è°ƒç”¨</p>
<h2 id="viewDidDisappear-animated-Bool"><a href="#viewDidDisappear-animated-Bool" class="headerlink" title="viewDidDisappear(_ animated: Bool)"></a><code>viewDidDisappear(_ animated: Bool)</code></h2><p>åœ¨content viewå·²ç»ä»View hierarchyä¸­ç§»é™¤æ—¶è°ƒç”¨</p>
<h2 id="viewWillLayoutSubviews"><a href="#viewWillLayoutSubviews" class="headerlink" title="viewWillLayoutSubviews()"></a><code>viewWillLayoutSubviews()</code></h2><p>åœ¨content viewçš„boundså‘ç”Ÿæ”¹å˜æ—¶ï¼Œä½†lays outå®ƒçš„subviewsä¹‹å‰è°ƒç”¨<br>æ¯”å¦‚ï¼šå½“è®¾å¤‡æ—‹è½¬æ—¶ï¼Œä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•</p>
<h2 id="viewDidLayoutSubviews"><a href="#viewDidLayoutSubviews" class="headerlink" title="viewDidLayoutSubviews()"></a><code>viewDidLayoutSubviews()</code></h2><p>åœ¨content viewçš„boundså‘ç”Ÿæ”¹å˜æ—¶ï¼Œä½†lays outå®ƒçš„subviewsä¹‹åè°ƒç”¨</p>
<img src="/2023/08/04/ui-vc-lifecycle/view-lifecycle.png" class="">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/04/ui-vc-lifecycle/" data-id="cm6rqgi2n0018m6q2g7ov4gdp" data-title="iOSä¸­çš„UIViewControllerç”Ÿå‘½å‘¨æœŸ" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ios-tips" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/03/ios-tips/" class="article-date">
  <time class="dt-published" datetime="2023-08-03T17:15:03.000Z" itemprop="datePublished">2023-08-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/03/ios-tips/">iOSä¸­çš„translatesAutoresizingMaskIntoConstraintsçš„ä½¿ç”¨</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="translatesAutoresizingMaskIntoConstraints"><a href="#translatesAutoresizingMaskIntoConstraints" class="headerlink" title="translatesAutoresizingMaskIntoConstraints"></a><code>translatesAutoresizingMaskIntoConstraints</code></h2><p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/47800210/when-should-translatesautoresizingmaskintoconstraints-be-set-to-true">https://stackoverflow.com/questions/47800210/when-should-translatesautoresizingmaskintoconstraints-be-set-to-true</a></p>
<ul>
<li>ä»£ç åˆ›å»ºViewæ—¶ï¼ŒViewçš„<code>translatesAutoresizingMaskIntoConstraints</code>å±æ€§é»˜è®¤ä¸ºtrue</li>
<li>Interface Builderåˆ›å»ºViewæ—¶ï¼ŒViewçš„<code>translatesAutoresizingMaskIntoConstraints</code>å±æ€§é»˜è®¤ä¸ºfalse</li>
<li>ä»£ç åˆ›å»ºçš„Viewï¼Œä½¿ç”¨frameè¿›è¡Œå¸ƒå±€æ—¶ï¼Œä¸èƒ½æ·»åŠ é¢å¤–çš„çº¦æŸï¼Œå¦åˆ™ä¼šå¯¼è‡´çº¦æŸå†²çª</li>
<li>ä»£ç åˆ›å»ºçš„Viewï¼Œä½¿ç”¨Auto Layoutè¿›è¡Œå¸ƒå±€æ—¶ï¼Œå¿…é¡»å°†<code>translatesAutoresizingMaskIntoConstraints</code>å±æ€§è®¾ç½®ä¸ºfalse</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/03/ios-tips/" data-id="cm6rqgi280003m6q221e29h01" data-title="iOSä¸­çš„translatesAutoresizingMaskIntoConstraintsçš„ä½¿ç”¨" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ios-ui-stack-view" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/03/ios-ui-stack-view/" class="article-date">
  <time class="dt-published" datetime="2023-08-03T16:30:17.000Z" itemprop="datePublished">2023-08-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/03/ios-ui-stack-view/">iOSä¸­çš„Stack View</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Stack Viewèƒ½å¤Ÿä½¿ç”¨Auto Layoutçš„èƒ½åŠ›ï¼Œåˆ›å»ºè‡ªé€‚åº”è®¾å¤‡æ–¹å‘ã€å±å¹•å°ºå¯¸å’Œå†…å®¹å˜åŒ–çš„UIã€‚</p>
<p>é€šè¿‡<code>arrangedSubviews</code>å±æ€§ç®¡ç†æ‰€æœ‰Viewçš„å¸ƒå±€</p>
<p>è¿™äº›Viewæ²¿ç€Stack Viewçš„è½´çº¿æ’åˆ—ï¼Œå¹¶ä¸”æŒ‰ç…§å®ƒä»¬åœ¨<code>arrangedSubviews</code>æ•°ç»„é‡Œçš„é¡ºåºè¿›è¡Œå¸ƒå±€ã€‚</p>
<p>å…·ä½“çš„å¸ƒå±€å–å†³äºï¼š</p>
<ul>
<li>axis</li>
<li>distribution</li>
<li>alignment</li>
<li>spacing</li>
</ul>
<p>ä»¥åŠå…¶ä»–å±æ€§</p>
<img src="/2023/08/03/ios-ui-stack-view/ui-stack-view@2x.png" class="">

<p>æ³¨æ„ï¼šä½ çš„èŒè´£æ˜¯å®šä¹‰Stack Viewçš„positionå’Œsizeï¼ˆå¯é€‰çš„ï¼‰ï¼Œç„¶åStack Viewä¼šç®¡ç†layoutå’Œå†…å®¹çš„å¤§å°</p>
<h2 id="Stack-Viewå’Œè‡ªåŠ¨å¸ƒå±€ï¼ˆAuto-Layoutï¼‰"><a href="#Stack-Viewå’Œè‡ªåŠ¨å¸ƒå±€ï¼ˆAuto-Layoutï¼‰" class="headerlink" title="Stack Viewå’Œè‡ªåŠ¨å¸ƒå±€ï¼ˆAuto Layoutï¼‰"></a>Stack Viewå’Œè‡ªåŠ¨å¸ƒå±€ï¼ˆAuto Layoutï¼‰</h2><p>Stack ViewæŠŠå®ƒç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªViewä¸Stackçš„è½´çš„è¾¹ç•Œï¼ˆedgeï¼‰å¯¹é½</p>
<p>å¦‚æœè®¾ç½®äº†<code>isLayoutMarginsRelativeArrangement</code>å±æ€§ä¸ºtrueï¼ŒStack Viewä¼šåŒ…å«marginçš„ç©ºé—´</p>
<p>å¯¹äºé™¤äº†<code>UIStackView.Distribution.fillEqually</code>ä»¥å¤–çš„distributionï¼ŒStack Viewä¼šæ ¹æ®æ¯ä¸ªarranged viewåˆ°<code>intrinsiceContentSize</code>çš„å±æ€§æ¥è®¡ç®—å®ƒæ²¿ç€Stackè½´åˆ°å¤§å°</p>
<p>è€Œå¯¹äº<code>UIStackView.Distribution.fillEqually</code>ï¼Œåˆ™ä¼šresizeæ‰€æœ‰çš„arranged viewï¼Œä½¿å®ƒä»¬çš„å¤§å°ç›¸ç­‰</p>
<p>Stack Viewä¼šä¼¸å±•æ‰€æœ‰çš„arranged viewsï¼Œæ¥åŒ¹é…æ²¿ç€Stackè½´çš„æœ€é•¿intrinsic size</p>
<h2 id="å¸¸ç”¨çš„Stack-Viewå¸ƒå±€å®šä¹‰"><a href="#å¸¸ç”¨çš„Stack-Viewå¸ƒå±€å®šä¹‰" class="headerlink" title="å¸¸ç”¨çš„Stack Viewå¸ƒå±€å®šä¹‰"></a>å¸¸ç”¨çš„Stack Viewå¸ƒå±€å®šä¹‰</h2><h3 id="åªå®šä¹‰position"><a href="#åªå®šä¹‰position" class="headerlink" title="åªå®šä¹‰position"></a>åªå®šä¹‰position</h3><img src="/2023/08/03/ios-ui-stack-view/position-only.png" class="">
<h3 id="å®šä¹‰æ²¿ç€è½´çš„size"><a href="#å®šä¹‰æ²¿ç€è½´çš„size" class="headerlink" title="å®šä¹‰æ²¿ç€è½´çš„size"></a>å®šä¹‰æ²¿ç€è½´çš„size</h3><img src="/2023/08/03/ios-ui-stack-view/size-along-axis.png" class="">
<h3 id="å®šä¹‰å‚ç›´äºè½´çš„size"><a href="#å®šä¹‰å‚ç›´äºè½´çš„size" class="headerlink" title="å®šä¹‰å‚ç›´äºè½´çš„size"></a>å®šä¹‰å‚ç›´äºè½´çš„size</h3><img src="/2023/08/03/ios-ui-stack-view/size-perpendicular-axis.png" class="">
<h3 id="å®šä¹‰sizeå’Œposition"><a href="#å®šä¹‰sizeå’Œposition" class="headerlink" title="å®šä¹‰sizeå’Œposition"></a>å®šä¹‰sizeå’Œposition</h3><img src="/2023/08/03/ios-ui-stack-view/size-position.png" class="">
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/03/ios-ui-stack-view/" data-id="cm6rqgi290005m6q2e846et2r" data-title="iOSä¸­çš„Stack View" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ios-ui-view" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/02/ios-ui-view/" class="article-date">
  <time class="dt-published" datetime="2023-08-02T11:48:26.000Z" itemprop="datePublished">2023-08-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/02/ios-ui-view/">iOSä¸­çš„View</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Viewå’ŒControlæ˜¯appçš„UIçš„åŸºæœ¬å…ƒç´ ã€‚</p>
<p>Viewé‡Œé¢å¯ä»¥åŒ…å«å…¶ä»–çš„View ï¼ˆSuperviewï¼ŒSubviewï¼‰</p>
<ul>
<li>UIViewï¼šæ‰€æœ‰Viewçš„åŸºç±»</li>
<li>UIControlï¼šcontrolçš„åŸºç±»ï¼ŒåŒ…å«buttonã€switchã€sliderç­‰</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MainActor</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UIView</span>: <span class="title class_">UIResponder</span></span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MainActor</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UIControl</span>: <span class="title class_">UIView</span></span><br></pre></td></tr></table></figure>

<h2 id="Viewå¯¹è±¡çš„èŒè´£ï¼š"><a href="#Viewå¯¹è±¡çš„èŒè´£ï¼š" class="headerlink" title="Viewå¯¹è±¡çš„èŒè´£ï¼š"></a>Viewå¯¹è±¡çš„èŒè´£ï¼š</h2><ul>
<li>ç»˜åˆ¶å’ŒåŠ¨ç”»<ul>
<li>Viewä½¿ç”¨UIKitæˆ–è€…Core Graphicsåœ¨è‡ªå·±çš„çŸ©å½¢ä¸­ç»˜åˆ¶å†…å®¹</li>
<li>å¯ä»¥æ”¹å˜å±æ€§æ¥æ§åˆ¶åŠ¨ç”»</li>
</ul>
</li>
<li>å¸ƒå±€å’Œå­è§†å›¾ç®¡ç†<ul>
<li>Viewå¯ä»¥åŒ…å«å…¶ä»–çš„View</li>
<li>Viewå¯ä»¥ç®¡ç†å­è§†å›¾çš„ä½ç½®å’Œå¤§å°</li>
<li>ä½¿ç”¨Auto Layoutæ¥å®šä¹‰Viewçš„resizingå’Œreposioningè§„åˆ™æ¥å“åº”view hierarchyçš„å˜åŒ–</li>
</ul>
</li>
<li>äº‹ä»¶å¤„ç†<ul>
<li>Viewæ˜¯UIResponderçš„å­ç±»ï¼Œå¯ä»¥å¤„ç†è§¦æ‘¸äº‹ä»¶å’Œå…¶ä»–ç±»å‹çš„äº‹ä»¶</li>
<li>Viewå¯ä»¥å®‰è£…æ‰‹åŠ¿è¯†åˆ«å™¨æ¥å¤„ç†æ‰‹åŠ¿</li>
</ul>
</li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œsubviewçš„å¯è§åŒºåŸŸè¶…å‡ºsuperviewçš„è¾¹ç•Œæ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†ä¸ä¼šè¢«è£å‰ªï¼Œå¯ä»¥é€šè¿‡è®¾ç½®clipsToBoundså±æ€§æ¥æ”¹å˜è¿™ç§è¡Œä¸ºã€‚</p>
<ul>
<li>frameï¼šåœ¨superviewçš„åæ ‡ç³»ä¸­å®šä¹‰äº†Viewçš„åŸç‚¹å’Œå°ºå¯¸</li>
<li>boundsï¼šå®šä¹‰äº†Viewè‡ªå·±çœ‹åˆ°çš„å†…éƒ¨å°ºå¯¸ï¼Œå‡ ä¹ä¸“é—¨ç”¨äºè‡ªå®šä¹‰ç»˜åˆ¶ä»£ç </li>
<li>centerï¼šæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„é‡æ–°å®šä½Viewçš„æ–¹æ³•ï¼Œæ— éœ€ç›´æ¥æ›´æ”¹frameæˆ–boundså±æ€§</li>
</ul>
<h2 id="åˆ›å»ºView"><a href="#åˆ›å»ºView" class="headerlink" title="åˆ›å»ºView"></a>åˆ›å»ºView</h2><ul>
<li>é€šè¿‡Storyboardåˆ›å»º</li>
<li>é€šè¿‡ä»£ç åˆ›å»º</li>
</ul>
<p>ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç æŠŠViewæ”¾ç½®åœ¨superviewåæ ‡ç³»ç»Ÿçš„å·¦ä¸Šè§’(10, 10)çš„åæ ‡ä¸Šï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> rect <span class="operator">=</span> <span class="type">CGRect</span>(x: <span class="number">10</span>, y: <span class="number">10</span>, width: <span class="number">100</span>, height: <span class="number">100</span>)</span><br><span class="line"><span class="keyword">let</span> myView <span class="operator">=</span> <span class="type">UIView</span>(frame: rect)</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡è°ƒç”¨<code>addSubview(_:)</code>æ–¹æ³•ï¼Œå¯ä»¥æŠŠViewæ·»åŠ åˆ°superviewä¸­ï¼Œæ¯æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œä¼šæŠŠæ–°çš„Viewæ”¾ç½®åœ¨æ‰€æœ‰siblingsçš„æœ€ä¸Šé¢ã€‚</p>
<p>å¯ä»¥é€šè¿‡è°ƒç”¨<code>insertSubview(_:aboveSUbview:)</code>æˆ–è€…<code>insertSubview(_:belowSubview:)</code>æ–¹æ³•æ¥æ”¹å˜zè½´é¡ºåºã€‚</p>
<h2 id="ç»˜åˆ¶View"><a href="#ç»˜åˆ¶View" class="headerlink" title="ç»˜åˆ¶View"></a>ç»˜åˆ¶View</h2><p>Viewçš„ç»˜åˆ¶æ˜¯åœ¨éœ€è¦æ—¶è¿›è¡Œçš„ã€‚å½“ä¸€ä¸ª<code>View</code>é¦–æ¬¡æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ–è€…ç”±äºå¸ƒå±€å˜åŒ–è€Œä½¿å…¶å…¨éƒ¨æˆ–éƒ¨åˆ†å˜å¾—å¯è§æ—¶ï¼Œç³»ç»Ÿä¼šè¦æ±‚<code>View</code>ç»˜åˆ¶å…¶å†…å®¹ã€‚å¯¹äºåŒ…å«ä½¿ç”¨UIKitæˆ–Core Graphicsè¿›è¡Œè‡ªå®šä¹‰å†…å®¹çš„<code>View</code>ï¼Œç³»ç»Ÿä¼šè°ƒç”¨<code>View</code>çš„<code>draw(_:)</code>æ–¹æ³•ã€‚ä½ å®ç°è¿™ä¸ªæ–¹æ³•è´Ÿè´£å°†<code>View</code>çš„å†…å®¹ç»˜åˆ¶åˆ°å½“å‰çš„å›¾å½¢ä¸Šä¸‹æ–‡ä¸­ï¼Œè¯¥å›¾å½¢ä¸Šä¸‹æ–‡ç”±ç³»ç»Ÿåœ¨è°ƒç”¨æ­¤æ–¹æ³•ä¹‹å‰è‡ªåŠ¨è®¾ç½®ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ª<code>View</code>å†…å®¹çš„static representationï¼Œå¹¶å¯ä»¥åœ¨å±å¹•ä¸Šæ˜¾ç¤ºã€‚</p>
<p>å½“Viewçš„å®é™…å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä½ éœ€è¦è´Ÿè´£é€šçŸ¥ç³»ç»Ÿé‡æ–°ç»˜åˆ¶Viewã€‚ä½ å¯ä»¥é€šè¿‡è°ƒç”¨Viewçš„<code>setNeedsDisplay()</code>æˆ–<code>setNeedsDisplay(_:)</code>æ–¹æ³•æ¥å®ç°ã€‚è¿™äº›æ–¹æ³•å‘Šè¯‰ç³»ç»Ÿåœ¨ä¸‹ä¸€ä¸ªç»˜åˆ¶å‘¨æœŸä¸­æ›´æ–°<code>View</code>ã€‚ç”±äºå®ƒç­‰å¾…åˆ°ä¸‹ä¸€ä¸ªç»˜åˆ¶å‘¨æœŸæ‰æ›´æ–°<code>View</code>ï¼Œä½ å¯ä»¥åœ¨å¤šä¸ª<code>View</code>ä¸Šè°ƒç”¨è¿™äº›æ–¹æ³•ï¼ŒåŒæ—¶æ›´æ–°å®ƒä»¬ã€‚</p>
<h2 id="åŠ¨ç”»View"><a href="#åŠ¨ç”»View" class="headerlink" title="åŠ¨ç”»View"></a>åŠ¨ç”»View</h2><p>å¯åŠ¨ç”»çš„å±æ€§ï¼š</p>
<ul>
<li>frame</li>
<li>bounds</li>
<li>center</li>
<li>transform</li>
<li>alpha</li>
<li>backgroundColor</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ª<code>UIViewPropertyAnimator</code>å¯¹è±¡ï¼Œç”¨å®ƒçš„handler blockæ¥æ”¹å˜Viewçš„å±æ€§</p>
<h2 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h2><p>å¿…é¡»åœ¨ä¸»çº¿ç¨‹</p>
<h2 id="Overrideçš„æ–¹æ³•"><a href="#Overrideçš„æ–¹æ³•" class="headerlink" title="Overrideçš„æ–¹æ³•"></a>Overrideçš„æ–¹æ³•</h2><ul>
<li>Initialization<ul>
<li>init(frame:) - æ¨èä½¿ç”¨</li>
<li>init(coder:) - ä»storyboardæˆ–è€…nibæ–‡ä»¶ä¸­åŠ è½½æ—¶ä½¿ç”¨</li>
<li>layerClass - åªåœ¨æƒ³è¦ä½¿ç”¨ä¸åŒçš„Core Animation layeræ—¶æ‰éœ€è¦ä½¿ç”¨</li>
</ul>
</li>
<li>Drawing and painting<ul>
<li>draw(_:) - å¦‚æœViewéœ€è¦è‡ªå®šä¹‰å†…å®¹ï¼Œéœ€è¦å®ç°è¿™ä¸ªæ–¹æ³•ã€‚å¦‚æœViewä¸è¿›è¡Œä»»ä½•è‡ªå®šä¹‰ç»˜åˆ¶ï¼Œä¸è¦å®ç°è¿™ä¸ªæ–¹æ³•</li>
<li>draw(_:for:) - ä»…åœ¨ä½ æƒ³åœ¨æ‰“å°æ—¶ä»¥ä¸åŒæ–¹å¼ç»˜åˆ¶Viewå†…å®¹æ—¶æ‰å®ç°è¿™ä¸ªæ–¹æ³•</li>
</ul>
</li>
<li>Layout and Constraints<ul>
<li>requiresConstraintBasedLayout - å¦‚æœéœ€è¦constraints</li>
<li>updateConstraints - å¦‚æœviewå’Œsubviewsä¹‹é—´éœ€è¦è‡ªå®šä¹‰constraints</li>
<li>alignmentRect(forFrame:), frame(forAlignmentRect:) - viewå’Œå…¶ä»–viewå¯¹é½æ—¶ä½¿ç”¨</li>
<li>didAddSubview(<em>:), willRemoveSubview(</em>:) - ç”¨æ¥track subviewçš„æ·»åŠ å’Œåˆ é™¤</li>
<li>willMove(toSuperview:), didMoveToSuperview() - ç”¨æ¥trackä½ çš„viewåœ¨view hierarchyä¹‹é—´çš„å˜åŒ–</li>
</ul>
</li>
<li>Event Handling<ul>
<li>gestureRecognizerShouldBegin(_:) - å¦‚æœä½ çš„è§†å›¾ç›´æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ï¼Œå¹¶ä¸”å¯èƒ½å¸Œæœ›é˜»æ­¢é™„åŠ çš„æ‰‹åŠ¿è¯†åˆ«å™¨è§¦å‘å…¶ä»–æ“ä½œï¼Œè¯·å®ç°è¿™ä¸ªæ–¹æ³•</li>
<li>touchesBegan(<em>:with:), touchesMoved(</em>:with:), touchesEnded(<em>:with:), touchesCancelled(</em>:with:) - å¦‚æœæƒ³ç”¨æ¥ç›´æ¥å¤„ç†è§¦æ‘¸äº‹ä»¶ ï¼ˆå¯¹äºæ‰‹åŠ¿åŸºæœ¬è¾“å…¥ï¼Œä½¿ç”¨gesture recognizersï¼‰</li>
</ul>
</li>
</ul>
<h2 id="Subclassingçš„æ›¿ä»£æ–¹æ¡ˆ"><a href="#Subclassingçš„æ›¿ä»£æ–¹æ¡ˆ" class="headerlink" title="Subclassingçš„æ›¿ä»£æ–¹æ¡ˆ"></a>Subclassingçš„æ›¿ä»£æ–¹æ¡ˆ</h2><ul>
<li>addConstraints(_:)</li>
<li>autoresizingMask</li>
<li>contentMode</li>
<li>isHiddenæˆ–alpha</li>
<li>backgroundColor</li>
<li>Subviews</li>
<li>Gesture recognizers</li>
<li>Animations</li>
<li>Image-based backgrounds</li>
</ul>
<h1 id="å¸¸ç”¨çš„View"><a href="#å¸¸ç”¨çš„View" class="headerlink" title="å¸¸ç”¨çš„View"></a>å¸¸ç”¨çš„View</h1><h2 id="Container-views"><a href="#Container-views" class="headerlink" title="Container views"></a>Container views</h2><h3 id="Collection-views"><a href="#Collection-views" class="headerlink" title="Collection views"></a>Collection views</h3><p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/views_and_controls/collection_views">Documentation</a></p>
<ul>
<li>Cells</li>
<li>Layouts</li>
<li>Data source object</li>
<li>Delegate object</li>
<li>Collection view controller</li>
</ul>
<img src="/2023/08/02/ios-ui-view/collection-views@2x.png" class="">

<h3 id="Table-views"><a href="#Table-views" class="headerlink" title="Table views"></a>Table views</h3><p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/views_and_controls/table_views">Documentation</a></p>
<ul>
<li>Cells</li>
<li>Table view controller</li>
<li>Data source object</li>
<li>Delegate object</li>
</ul>
<img src="/2023/08/02/ios-ui-view/table-views@2x.png" class="">

<h3 id="UICollectionView"><a href="#UICollectionView" class="headerlink" title="UICollectionView"></a>UICollectionView</h3><p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/uicollectionview">Documentation</a></p>
<img src="/2023/08/02/ios-ui-view/ui-collection-view@2x.png" class="">

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MainActor</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UICollectionView</span> : <span class="title class_">UIScrollView</span></span><br></pre></td></tr></table></figure>

<h3 id="UIStackView"><a href="#UIStackView" class="headerlink" title="UIStackView"></a>UIStackView</h3><p><a target="_blank" rel="noopener" href="https://developer.apple.com/documentation/uikit/uistackview">Documentation</a></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MainActor</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UIStackView</span> : <span class="title class_">UIView</span></span><br></pre></td></tr></table></figure>

<h3 id="UIScrollView"><a href="#UIScrollView" class="headerlink" title="UIScrollView"></a>UIScrollView</h3><h2 id="Content-views"><a href="#Content-views" class="headerlink" title="Content views"></a>Content views</h2><h3 id="UIActivityIndicatorView"><a href="#UIActivityIndicatorView" class="headerlink" title="UIActivityIndicatorView"></a>UIActivityIndicatorView</h3><h3 id="UICalendarView"><a href="#UICalendarView" class="headerlink" title="UICalendarView"></a>UICalendarView</h3><h3 id="UIImageView"><a href="#UIImageView" class="headerlink" title="UIImageView"></a>UIImageView</h3><h3 id="UIPickerView"><a href="#UIPickerView" class="headerlink" title="UIPickerView"></a>UIPickerView</h3><h3 id="UIProgressView"><a href="#UIProgressView" class="headerlink" title="UIProgressView"></a>UIProgressView</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/02/ios-ui-view/" data-id="cm6rqgi2a0006m6q2f5w2bnzl" data-title="iOSä¸­çš„View" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-ios-view-controllers" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/08/01/ios-view-controllers/" class="article-date">
  <time class="dt-published" datetime="2023-08-01T10:49:57.000Z" itemprop="datePublished">2023-08-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/iOS/">iOS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/08/01/ios-view-controllers/">iOSä¸­çš„View Controller</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><code>View controller</code>ç”¨æ¥ç®¡ç†<code>UIKit</code> appçš„ç•Œé¢ã€‚æ¯ä¸ª<code>View Controller</code>ç®¡ç†ä¸€ä¸ªroot viewï¼Œè¿™ä¸ªroot viewå¯ä»¥åŒ…å«ä¸€äº›subviewsã€‚</p>
<p>æ¯ä¸ªappè‡³å°‘æœ‰ä¸€ä¸ª<code>View Controller</code>ï¼Œè¿™ä¸ª<code>View Controller</code>çš„å†…å®¹å¡«æ»¡ä¸»<code>Window</code>ã€‚<br>å¦‚æœä½ çš„appæœ‰æ›´å¤šå†…å®¹éœ€è¦å±•ç¤ºï¼Œä½ å¯ä»¥åˆ›å»ºæ›´å¤šçš„<code>View Controller</code>ï¼Œæ¯ä¸ª<code>View Controller</code>ç®¡ç†ä¸€ä¸ªå­ç•Œé¢ã€‚</p>
<p><code>UIKit</code>æä¾›äº†ä¸€äº›æ ‡å‡†çš„<code>View Controller</code>ï¼Œä¾‹å¦‚å¯¼èˆªæ§åˆ¶å™¨ï¼ˆnavigation controllerï¼‰å’Œåˆ†æ æ§åˆ¶å™¨ï¼ˆsplit view controllerï¼‰ã€‚</p>
<h1 id="ç®¡ç†appçš„Windowé‡Œçš„å†…å®¹"><a href="#ç®¡ç†appçš„Windowé‡Œçš„å†…å®¹" class="headerlink" title="ç®¡ç†appçš„Windowé‡Œçš„å†…å®¹"></a>ç®¡ç†appçš„Windowé‡Œçš„å†…å®¹</h1><p>ä½ çš„åº”ç”¨ç¨‹åºç•Œé¢ä¸­çš„æ¯ä¸ªåœºæ™¯éƒ½åŒ…å«ä¸€ä¸ªçª—å£å¯¹è±¡ï¼ˆ<code>Window</code>ï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªè§†å›¾å¯¹è±¡ï¼ˆ<code>View</code>ï¼‰ã€‚<code>Window</code>ä½œä¸ºä¸å¯è§çš„å®¹å™¨ï¼Œç”¨äºåŒ…å«å…¶ä½™çš„UIå…ƒç´ ï¼Œå®ƒæ˜¯<code>View</code>çš„é¡¶çº§å®¹å™¨ï¼Œå¹¶å°†äº‹ä»¶è·¯ç”±åˆ°<code>View</code>ã€‚</p>
<p><code>View</code>åˆ™æä¾›ç”¨æˆ·åœ¨å±å¹•ä¸Šçœ‹åˆ°æ–‡æœ¬ã€å›¾åƒå’Œå…¶ä»–ç±»å‹çš„è‡ªå®šä¹‰å†…å®¹ç­‰å®é™…å†…å®¹ã€‚<code>Window</code>æ˜¯é•¿æœŸå­˜åœ¨çš„å¯¹è±¡ï¼Œåªæœ‰åœ¨é”€æ¯æ•´ä¸ªåœºæ™¯çš„UIæ—¶æ‰ä¼šå°†å…¶é”€æ¯ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä½ å¯èƒ½ä¼šé¢‘ç¹åœ°æ›´æ”¹Windowä¸­çš„Viewï¼Œç‰¹åˆ«æ˜¯å½“ä½ æƒ³è¦æ˜¾ç¤ºæ–°çš„å†…å®¹æ—¶ã€‚</p>
<img src="/2023/08/01/ios-view-controllers/view-controller-architecture@2x.png" class="">

<p>ä¸ºäº†æœ‰æ•ˆçš„ç®¡ç†ä½ çš„Viewï¼Œå¹¶ä¸”èƒ½å¤Ÿè½»æ¾çš„å°†å®ƒä»¬ä»Windowä¸­æ·»åŠ æˆ–åˆ é™¤ï¼ŒUIKitæä¾›äº†<code>View Controller</code>ã€‚<code>View Controller</code>ç®¡ç†appçš„ä¸€ç»„<code>View</code>ï¼Œå¹¶ä¿æŒæ›´æ–°è¿™äº›<code>View</code>ä¸­çš„ä¿¡æ¯ã€‚</p>
<p>æ¯ä¸ª<code>Window</code>éƒ½æœ‰ä¸€ä¸ª<code>Root View Controller</code>ï¼Œå¯ä»¥ç”¨å®ƒæ¥æŒ‡å®šWindowçš„åˆè¯•<code>View</code>çš„é›†åˆã€‚å½“éœ€è¦æ”¹å˜è¿™ç»„<code>View</code>æ—¶ï¼Œå‘Šè¯‰<code>UIKit</code>å±•ç¤ºæˆ–è€…ç§»é™¤å…¶ä»–çš„<code>View Controller</code>ã€‚<code>UIKit</code>ä¼šæŠŠä¸€ç»„<code>View</code>æ¢æˆå¦ä¸€ç»„ï¼Œå¹¶é€šè¿‡<code>View Controller</code>å¯¹è±¡æ¥ç®¡ç†æ•´ä¸ªappçš„ç•Œé¢</p>
<h2 id="ä¸ºæ¯ä¸ªå•ç‹¬çš„é¡µé¢å®šä¹‰View-Controller"><a href="#ä¸ºæ¯ä¸ªå•ç‹¬çš„é¡µé¢å®šä¹‰View-Controller" class="headerlink" title="ä¸ºæ¯ä¸ªå•ç‹¬çš„é¡µé¢å®šä¹‰View Controller"></a>ä¸ºæ¯ä¸ªå•ç‹¬çš„é¡µé¢å®šä¹‰View Controller</h2><p>åœ¨è®¾è®¡appçš„UIæ—¶ï¼Œé¦–å…ˆè¦æŠŠUIåˆ†æˆä¸åŒå†…å®¹çš„é¡µé¢ã€‚æ¯ä¸ªé¡µé¢ä¼šæœ‰ä¸åŒçš„æ–¹å¼å»å±•ç¤ºæ•°æ®ã€‚</p>
<p>é‡è¦çš„æ˜¯æ¯ä¸ªé¡µé¢çš„ç»“æ„å’Œæ•´ä½“å¤–è§‚ï¼Œè€Œéæ‰€è¦å±•ç¤ºçš„å…·ä½“æ•°æ®ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªappå¯èƒ½æœ‰ä¸€ä¸ªé¡µé¢å±•ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼Œå¦ä¸€ä¸ªé¡µé¢å±•ç¤ºä¸€ä¸ªè¡¨æ ¼ï¼Œä½†æ˜¯è¿™ä¸¤ä¸ªé¡µé¢éƒ½æ˜¯ç”¨æ¥å±•ç¤ºæ•°æ®çš„ã€‚</p>
<img src="/2023/08/01/ios-view-controllers/view-controller-types@2x.png" class="">

<p>æ¯ä¸ªView Controlleréœ€è¦åšä»¥ä¸‹çš„äº‹æƒ…ï¼š</p>
<ul>
<li>ä¸ºViewæä¾›æ•°æ®ï¼Œå¹¶ä¸”åœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–°View</li>
<li>å°†æ•°æ®å˜åŒ–åé¦ˆç»™æ•°æ®æ¨¡å‹å¯¹è±¡</li>
<li>è°ƒæ•´å¤§å°ã€ä½ç½®å’ŒViewçš„å¯è§æ€§æ¥é€‚é…å½“å‰ç¯å¢ƒ</li>
<li>ä¿ƒè¿›åˆ‡æ¢åˆ°å…¶ä»–å†…å®¹é¡µé¢çš„è¿‡æ¸¡</li>
</ul>
<h2 id="ä¸ºä½ çš„å†…å®¹é€‰æ‹©Navigation-model"><a href="#ä¸ºä½ çš„å†…å®¹é€‰æ‹©Navigation-model" class="headerlink" title="ä¸ºä½ çš„å†…å®¹é€‰æ‹©Navigation model"></a>ä¸ºä½ çš„å†…å®¹é€‰æ‹©Navigation model</h2><p>UIKitæä¾›äº†<code>Container View Controller</code>ï¼Œå®ç°äº†é€šç”¨çš„å¯¼èˆªï¼ˆNavigationï¼‰æ¨¡å‹</p>
<p><code>Container View Controller</code>æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„<code>View Controller</code>ï¼Œå®ƒç”¨æ¥ç®¡ç†å…¶ä»–çš„å­<code>View Controller</code></p>
<p>æ°¸è¿œä½¿ç”¨UIKitçš„<code>Container View Controller</code>æ¥å®ç°é€šç”¨çš„å¯¼èˆªæ¨¡å‹ï¼š</p>
<ul>
<li>UINavigationController</li>
<li>UISplitViewController</li>
<li>UITabBarController</li>
<li>UIPageViewController</li>
</ul>
<img src="/2023/08/01/ios-view-controllers/interface-types@2x.png" class="">

<h2 id="ç»™æ¯ä¸ªWindowåˆ†é…ä¸€ä¸ªRoot-View-Controller"><a href="#ç»™æ¯ä¸ªWindowåˆ†é…ä¸€ä¸ªRoot-View-Controller" class="headerlink" title="ç»™æ¯ä¸ªWindowåˆ†é…ä¸€ä¸ªRoot View Controller"></a>ç»™æ¯ä¸ªWindowåˆ†é…ä¸€ä¸ªRoot View Controller</h2><p>å¦‚æœ</p>
<p>å¦‚æœç”¨ä»£ç åˆ›å»ºä½ çš„appçš„UIï¼Œä½ éœ€è¦åœ¨åˆ›å»ºWindowåï¼Œç»™Windowçš„<code>rootViewController</code>å±æ€§èµ‹å€¼ã€‚è¿™ä¸ªå±æ€§çš„å€¼æ˜¯ä¸€ä¸ª<code>View Controller</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ç®¡ç†Windowçš„æ ¹Viewã€‚</p>
<img src="/2023/08/01/ios-view-controllers/view-controller-hierarchy@2x.png" class="">

<h2 id="Content-View-Controller"><a href="#Content-View-Controller" class="headerlink" title="Content View Controller"></a>Content View Controller</h2><p>æ‰€æœ‰çš„UIKit appéå¸¸ä¾èµ–äº<code>View Controller</code>æ¥å±•ç¤ºå†…å®¹ã€‚æˆ‘ä»¬é€šå¸¸ä¼šè‡ªå®šä¹‰<code>View Controller</code>æ¥ç®¡ç†æˆ‘ä»¬çš„<code>View</code>ã€‚</p>
<p>ç»å¤§å¤šæ•°çš„è‡ªå®šä¹‰<code>View Controller</code>éƒ½æ˜¯<code>Content View Controller</code>ã€‚<code>Content View Controller</code>æ‹¥æœ‰å®ƒä»¬æ‰€æœ‰çš„<code>View</code>ï¼Œå¹¶ä¸”ç®¡ç†è¿™äº›<code>View</code>çš„äº¤äº’ã€‚</p>
<p>ä¸<code>Content View Controller</code>ç›¸å¯¹çš„æ˜¯<code>Container View Controller</code>ï¼Œå®ƒå°†å…¶ä»–çš„<code>View Controller</code>å†…å®¹æ•´åˆåˆ°å®ƒçš„<code>View</code>å±‚çº§ä¸­ã€‚</p>
<img src="/2023/08/01/ios-view-controllers/VCPG-custom-subclasses@2x.png" class="">

<p>ä¸ºäº†å®šä¹‰ä¸€ä¸ª<code>Content View Controller</code>ï¼Œé¦–å…ˆéœ€è¦ç»§æ‰¿<code>UIViewController</code>ã€‚å¦‚æœä½ çš„ç•Œé¢æœ‰table viewæˆ–è€…collection viewï¼Œä½ å¯ä»¥ç»§æ‰¿<code>UITableViewController</code>æˆ–è€…<code>UICollectionViewController</code>ã€‚</p>
<h2 id="å¾€View-Controllerä¸­æ·»åŠ View"><a href="#å¾€View-Controllerä¸­æ·»åŠ View" class="headerlink" title="å¾€View Controllerä¸­æ·»åŠ View"></a>å¾€View Controllerä¸­æ·»åŠ View</h2><p>UIViewControllerç±»æœ‰ä¸€ä¸ª<code>view</code>å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ª<code>UIView</code>å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯<code>View Controller</code>ç®¡ç†çš„<code>View</code>å±‚çº§çš„<code>root view</code>ã€‚<br>ä½ å¯ä»¥å¾€é‚£ä¸ª<code>root view</code>ä¸Šæ·»åŠ è‡ªå®šä¹‰çš„<code>view</code>ã€‚</p>
<img src="/2023/08/01/ios-view-controllers/storyboard-add-views@2x.png" class="">

<p>å¾€view controlleråŠ å®Œviewåï¼Œæ°¸è¿œä½¿ç”¨Auto Layout constriantsæ¥è®¾ç½®å¤§å°å’Œä½ç½®ã€‚</p>
<h2 id="å­˜å‚¨é‡è¦viewçš„å¼•ç”¨"><a href="#å­˜å‚¨é‡è¦viewçš„å¼•ç”¨" class="headerlink" title="å­˜å‚¨é‡è¦viewçš„å¼•ç”¨"></a>å­˜å‚¨é‡è¦viewçš„å¼•ç”¨</h2><p>æœ‰æ—¶éœ€è¦åœ¨è¿è¡Œæ—¶è®¿é—®view controllerçš„æŸäº›viewã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦åœ¨è¿è¡Œæ—¶æ”¹å˜viewçš„å¤–è§‚ï¼Œæˆ–è€…åœ¨ç”¨æˆ·ç‚¹å‡»viewæ—¶æ‰§è¡ŒæŸäº›æ“ä½œã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> imageView : <span class="type">UIImageView</span>?</span><br><span class="line"><span class="keyword">@IBOutlet</span> <span class="keyword">weak</span> <span class="keyword">var</span> button : <span class="type">UIButton</span>?</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½¿ç”¨storyboardï¼Œoutletä¼šåœ¨storyboardåŠ è½½æ—¶è¢«è‡ªåŠ¨è®¾ç½®ã€‚UIKitåœ¨viewDidLoad()æ–¹æ³•ä¹‹å‰é‡å»ºè¿æ¥outletsï¼Œå› æ­¤å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•é‡Œè®¿é—®è¿™äº›å±æ€§çš„å¯¹è±¡ã€‚<br>å¦‚æœä½¿ç”¨ä»£ç åˆ›å»ºview controllerï¼Œä½ éœ€è¦åœ¨view controllerçš„åˆå§‹åŒ–æ–¹æ³•é‡Œè®¾ç½®é€‚å½“çš„å±æ€§ã€‚</p>
<h2 id="å¤„ç†viewså’Œcontrolsé‡Œçš„äº‹ä»¶"><a href="#å¤„ç†viewså’Œcontrolsé‡Œçš„äº‹ä»¶" class="headerlink" title="å¤„ç†viewså’Œcontrolsé‡Œçš„äº‹ä»¶"></a>å¤„ç†viewså’Œcontrolsé‡Œçš„äº‹ä»¶</h2><p>Controlsä½¿ç”¨target-actionè®¾è®¡æ¨¡å¼æ¥æŠ¥å‘Šç”¨æˆ·äº¤äº’ï¼Œä¸€äº›viewä¼špost notificationæˆ–è€…è°ƒç”¨delegateæ–¹æ³•æ¥å“åº”è¿™äº›æ”¹åŠ¨ã€‚<br>View controlleréœ€è¦çŸ¥é“è¿™äº›äº¤äº’ï¼Œä»¥ä¾¿æ›´æ–°Viewã€‚æœ‰è‹¥å¹²ç§æ–¹æ³•ï¼š</p>
<ul>
<li>åœ¨View Controllerå®ç°delegateå’Œactionæ–¹æ³•<ul>
<li>ç®€å•æ˜“å®ç°ï¼Œä½†ä¸çµæ´»éš¾ä»¥æµ‹è¯•</li>
</ul>
</li>
<li>åœ¨View Controllerç±»çš„extensionä¸­å®ç°delegateå’Œactionæ–¹æ³•<ul>
<li>åˆ†ç¦»äº†äº‹ä»¶å¤„ç†çš„ä»£ç ï¼Œæ›´å®¹æ˜“æµ‹è¯•</li>
</ul>
</li>
<li>åœ¨ä¸“ç”¨å¯¹è±¡ä¸­å®ç°delegateå’Œactionæ–¹æ³•ï¼Œç„¶åå°†ç›¸å…³ä¿¡æ¯è½¬å‘ç»™View Controller<ul>
<li>æœ€å…·æœ‰çµæ´»æ€§å’Œå¯å¤ç”¨æ€§ï¼Œå®¹æ˜“æµ‹è¯•</li>
</ul>
</li>
</ul>
<p>ä¸ºäº†å“åº”ç”¨æˆ·ä¸controlsçš„äº¤äº’ï¼Œå®šä¹‰ä¸€ä¸ªactionæ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@IBAction</span> <span class="keyword">func</span> <span class="title function_">doSomthing</span>()</span><br><span class="line"><span class="keyword">@IBAction</span> <span class="keyword">func</span> <span class="title function_">doSomething</span>(<span class="params">sender</span>: <span class="type">UIControl</span>)</span><br><span class="line"><span class="keyword">@IBAction</span> <span class="keyword">func</span> <span class="title function_">doSomething</span>(<span class="params">sender</span>: <span class="type">UIControl</span>, <span class="params">forEvent</span> <span class="params">event</span>: <span class="type">UIEvent</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Viewçš„å±•ç¤º"><a href="#Viewçš„å±•ç¤º" class="headerlink" title="Viewçš„å±•ç¤º"></a>Viewçš„å±•ç¤º</h2><p>å½“ä½ æŠŠview controllerå±•ç¤ºåˆ°å±å¹•ä¸Šæ—¶ï¼ŒUIKitéœ€è¦é¦–å…ˆåŠ è½½å’Œé…ç½®ç›¸åº”çš„Viewï¼š</p>
<ol>
<li>ä½¿ç”¨<code>init(coder:)</code>æ–¹æ³•åˆ›å»ºæ¯ä¸ªview</li>
<li>åœ¨View Controllerä¸­è¿æ¥viewåˆ°å¯¹åº”çš„actionå’Œoutlet</li>
<li>è°ƒç”¨æ¯ä¸ªviewå’ŒView Controllerçš„<code>awakeFromNib()</code>æ–¹æ³•</li>
<li>ç»™View Controllerçš„<code>view</code>å±æ€§èµ‹å€¼<code>view hierarchy</code></li>
<li>è°ƒç”¨View Controllerçš„<code>viewDidLoad()</code>æ–¹æ³•</li>
</ol>
<p>å½“ä½ çš„è§†å›¾é¦–æ¬¡å‡ºç°åœ¨å±å¹•ä¸Šæ—¶ï¼Œæ‰§è¡Œä»»ä½•æœ€ç»ˆä¸è§†å›¾ç›¸å…³çš„ä»»åŠ¡ã€‚UIKitåœ¨ä»¥ä¸‹æ–¹å¼ä¸­é€šçŸ¥æ‹¥æœ‰è§†å›¾æ§åˆ¶å™¨çš„å¯¹è±¡å®ƒçš„è§†å›¾å³å°†å‡ºç°åœ¨å±å¹•ä¸Šï¼Œå¹¶æ›´æ–°è¿™äº›è§†å›¾çš„å¸ƒå±€ä»¥é€‚åº”å½“å‰ç¯å¢ƒï¼š</p>
<ol>
<li>åœ¨è¿‡æ¸¡å¼€å§‹æ—¶è°ƒç”¨<code>viewWillAppear(_:)</code></li>
<li>å°†<code>View</code>æ·»åŠ åˆ°<code>view hierarchy</code></li>
<li>æ›´æ–°<code>View Controller</code>åŠå…¶<code>View</code>çš„trait collectionsï¼ˆç‰¹æ€§é›†åˆï¼‰</li>
<li>æ›´æ–°<code>View</code>çš„å‡ ä½•å±æ€§ï¼ŒåŒ…æ‹¬å…¶åœ¨å…¶<code>superview</code>ä¸­çš„å¤§å°å’Œä½ç½®ã€‚æ›´æ–°å¸ƒå±€è¾¹è·ï¼ˆlayout marginsï¼‰å’Œå®‰å…¨åŒºåŸŸï¼ˆsafe areaï¼‰ï¼Œå¹¶åœ¨éœ€è¦æ—¶è°ƒç”¨ <code>viewLayoutMarginsDidChange()</code> å’Œ <code>viewSafeAreaInsetsDidChange()</code></li>
<li>è°ƒç”¨<code>viewIsAppearing(_:)</code>æ–¹æ³•ï¼Œè®©ä½ çŸ¥é“<code>View Controller</code>çš„<code>View</code>æ­£åœ¨å‡ºç°åœ¨å±å¹•ä¸Š</li>
<li>è°ƒç”¨<code>viewWillLayoutSubviews()</code>æ–¹æ³•</li>
<li>æ›´æ–°<code>view hierarchy</code>çš„å¸ƒå±€</li>
<li>è°ƒç”¨<code>viewDidLayoutSubviews()</code>æ–¹æ³•</li>
<li>å°†<code>View</code>æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</li>
<li>åœ¨ä»»ä½•åŠ¨ç”»å®Œæˆåè°ƒç”¨<code>View Controller</code>çš„<code>viewDidAppear(_:)</code>æ–¹æ³•</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/08/01/ios-view-controllers/" data-id="cm6rqgi2b0009m6q2d8dw1mid" data-title="iOSä¸­çš„View Controller" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/">Swift</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bug/" rel="tag">Bug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/02/05/js-lhs-rhs/">JavaScriptä¸­LHSå’ŒRHSçš„åŒºåˆ«</a>
          </li>
        
          <li>
            <a href="/2024/11/18/redis-skip-list/">Redisä¸­çš„è·³è·ƒè¡¨(skiplist)</a>
          </li>
        
          <li>
            <a href="/2024/11/17/android-appcrash-nullexception/">Androidå¼€å‘ä¸­java.lang.NullableExceptionå¯¼è‡´çš„app crash</a>
          </li>
        
          <li>
            <a href="/2023/08/07/auto-layout/">iOSä¸­çš„Auto Layout</a>
          </li>
        
          <li>
            <a href="/2023/08/04/react-children-re-render/">React Component - å­ç»„ä»¶ä»€ä¹ˆæ—¶å€™ä¼šre-render</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 xuexiangxu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>