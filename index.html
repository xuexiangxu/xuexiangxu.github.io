<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Xuexiang&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Xuexiang&#39;s Blog">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Xuexiang&#39;s Blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="xuexiangxu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Xuexiang's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<!-- hexo injector head_end start --><script type="module" src="https://cdn.jsdelivr.net/npm/mermaid@latest/dist/mermaid.esm.min.mjs">
    mermaid.initialize(
      startOnLoad: true,
    );
    </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Xuexiang&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-js-promise" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/18/js-promise/" class="article-date">
  <time class="dt-published" datetime="2025-02-18T15:12:42.000Z" itemprop="datePublished">2025-02-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/18/js-promise/">æ‰‹å†™Promise</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyPromise</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">executor</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;pending&#x27;</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">value</span> = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">reason</span> = <span class="literal">undefined</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">onFulfilledCallbacks</span> = [];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">onRejectedCallbacks</span> = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">resolve</span> = (<span class="params">value</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === <span class="string">&#x27;pending&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;fulfilled&#x27;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span> = value;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">onFulfilledCallbacks</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">fn</span>) =&gt;</span> <span class="title function_">fn</span>(value));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">reject</span> = (<span class="params">reason</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === <span class="string">&#x27;pending&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = <span class="string">&#x27;rejected&#x27;</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">reason</span> = reason;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">onRejectedCallbacks</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">fn</span>) =&gt;</span> <span class="title function_">fn</span>(reason));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="title function_">executor</span>(resolve, reject);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="title function_">reject</span>(error);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">then</span>(<span class="params">onFulfilled, onRejected</span>) &#123;</span><br><span class="line">    onFulfilled =</span><br><span class="line">      <span class="keyword">typeof</span> onFulfilled === <span class="string">&#x27;function&#x27;</span> ? onFulfilled : <span class="function">(<span class="params">value</span>) =&gt;</span> value;</span><br><span class="line">    onRejected =</span><br><span class="line">      <span class="keyword">typeof</span> onRejected === <span class="string">&#x27;function&#x27;</span></span><br><span class="line">        ? onRejected</span><br><span class="line">        : <span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> error;</span><br><span class="line">          &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === <span class="string">&#x27;fulfilled&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">queueMicrotask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> x = <span class="title function_">onFulfilled</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">            <span class="title function_">resolvePromise</span>(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span> === <span class="string">&#x27;rejected&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">queueMicrotask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> x = <span class="title function_">onRejected</span>(<span class="variable language_">this</span>.<span class="property">reason</span>);</span><br><span class="line">            <span class="title function_">resolvePromise</span>(promise2, x, resolve, reject);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">            <span class="title function_">reject</span>(error);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">onFulfilledCallbacks</span>.<span class="title function_">push</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">queueMicrotask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> x = <span class="title function_">onFulfilled</span>(value);</span><br><span class="line">              <span class="title function_">resolvePromise</span>(promise2, x, resolve, reject);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              <span class="title function_">reject</span>(error);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">onRejectedCallbacks</span>.<span class="title function_">push</span>(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">queueMicrotask</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> x = <span class="title function_">onRejected</span>(reason);</span><br><span class="line">              <span class="title function_">resolvePromise</span>(promise2, x, resolve, reject);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">              <span class="title function_">reject</span>(error);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> promise2;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">catch</span>(onRejected) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">then</span>(<span class="literal">null</span>, onRejected);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">resolve</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="title function_">resolve</span>(value));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">reject</span>(<span class="params">reason</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> <span class="title function_">reject</span>(reason));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">resolvePromise</span>(<span class="params">promise2, x, resolve, reject</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (promise2 === x) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">TypeError</span>(<span class="string">&#x27;Chaining cycle detected for promise&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (x <span class="keyword">instanceof</span> <span class="title class_">MyPromise</span>) &#123;</span><br><span class="line">    x.<span class="title function_">then</span>(</span><br><span class="line">      <span class="function">(<span class="params">value</span>) =&gt;</span> <span class="title function_">resolve</span>(value),</span><br><span class="line">      <span class="function">(<span class="params">reason</span>) =&gt;</span> <span class="title function_">reject</span>(reason)</span><br><span class="line">    );</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æµ‹è¯•ç”¨ä¾‹"><a href="#æµ‹è¯•ç”¨ä¾‹" class="headerlink" title="æµ‹è¯•ç”¨ä¾‹"></a>æµ‹è¯•ç”¨ä¾‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">MyPromise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="string">&#x27;Hello, Promise!&#x27;</span>), <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Next Step&#x27;</span>;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/18/js-promise/" data-id="cm7bdn3hm0016lipy61gw2685" data-title="æ‰‹å†™Promise" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-spa-first-paint" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/17/spa-first-paint/" class="article-date">
  <time class="dt-published" datetime="2025-02-17T15:31:01.000Z" itemprop="datePublished">2025-02-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/17/spa-first-paint/">SPAé¦–å±åŠ è½½ä¼˜åŒ–</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>å•é¡µé¢åº”ç”¨ï¼ˆSPAï¼‰åœ¨é¦–æ¬¡åŠ è½½æ—¶é€šå¸¸éœ€è¦åŠ è½½å¤§é‡çš„ JavaScriptã€CSS å’Œ API è¯·æ±‚ï¼Œå¯¼è‡´<strong>é¦–å±æ¸²æŸ“ï¼ˆFirst Paint, FPï¼‰å’Œé¦–å±å¯äº¤äº’æ—¶é—´ï¼ˆTime to Interactive, TTIï¼‰è¾ƒæ…¢</strong>ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<hr>
<h2 id="1-èµ„æºä¼˜åŒ–"><a href="#1-èµ„æºä¼˜åŒ–" class="headerlink" title="1. èµ„æºä¼˜åŒ–"></a><strong>1. èµ„æºä¼˜åŒ–</strong></h2><h3 id="1-1-ä»£ç åˆ†å‰²ï¼ˆCode-Splittingï¼‰"><a href="#1-1-ä»£ç åˆ†å‰²ï¼ˆCode-Splittingï¼‰" class="headerlink" title="1.1 ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰"></a><strong>1.1 ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰</strong></h3><p><strong>é—®é¢˜</strong>ï¼šSPA éœ€è¦åŠ è½½å¤§é‡ JavaScript æ–‡ä»¶ï¼Œå¯¼è‡´é¦–å±åŠ è½½å˜æ…¢ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ <strong>Webpack&#x2F;Vite</strong> è¿›è¡Œä»£ç åˆ†å‰²ï¼ŒæŒ‰éœ€åŠ è½½ï¼ˆæ‡’åŠ è½½ï¼‰ã€‚<br>ğŸ”¹ <strong>ä½¿ç”¨åŠ¨æ€ <code>import()</code> è¿›è¡Œè·¯ç”±æ‡’åŠ è½½</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; lazy, <span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Home</span> = <span class="title function_">lazy</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./Home&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Home</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>âœ… <strong>å‡å°‘é¦–å±éœ€è¦ä¸‹è½½çš„ JS ä½“ç§¯ï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚</strong></p>
<hr>
<h3 id="1-2-èµ„æºå‹ç¼©ï¼ˆMinification-Compressionï¼‰"><a href="#1-2-èµ„æºå‹ç¼©ï¼ˆMinification-Compressionï¼‰" class="headerlink" title="1.2 èµ„æºå‹ç¼©ï¼ˆMinification &amp; Compressionï¼‰"></a><strong>1.2 èµ„æºå‹ç¼©ï¼ˆMinification &amp; Compressionï¼‰</strong></h3><p><strong>é—®é¢˜</strong>ï¼šæœªå‹ç¼©çš„ JSã€CSSã€HTML ä½“ç§¯è¾ƒå¤§ï¼Œå½±å“åŠ è½½é€Ÿåº¦ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>JS&#x2F;CSS å‹ç¼©</strong>ï¼šä½¿ç”¨ Webpack <code>TerserPlugin</code> æˆ– Vite å†…ç½®å‹ç¼©ã€‚</li>
<li><strong>Gzip&#x2F;Brotli</strong> å‹ç¼©ï¼šåœ¨æœåŠ¡å™¨ç«¯å¼€å¯å‹ç¼©ï¼Œå‡å°‘ä¼ è¾“ä½“ç§¯ã€‚  <ul>
<li><p><strong>Nginx é…ç½® Gzip</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">gzip_types</span> text/css application/javascript;</span><br><span class="line"><span class="attribute">gzip_min_length</span> <span class="number">1024</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Brotliï¼ˆæ›´ä¼˜ï¼‰</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">brotli</span> <span class="literal">on</span>;</span><br><span class="line"><span class="attribute">brotli_types</span> text/html text/css application/javascript;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<p>âœ… <strong>å‡å°‘èµ„æºä½“ç§¯ï¼Œæé«˜ä¼ è¾“é€Ÿåº¦ã€‚</strong></p>
<hr>
<h3 id="1-3-Tree-Shakingï¼ˆå»é™¤æ— ç”¨ä»£ç ï¼‰"><a href="#1-3-Tree-Shakingï¼ˆå»é™¤æ— ç”¨ä»£ç ï¼‰" class="headerlink" title="1.3 Tree Shakingï¼ˆå»é™¤æ— ç”¨ä»£ç ï¼‰"></a><strong>1.3 Tree Shakingï¼ˆå»é™¤æ— ç”¨ä»£ç ï¼‰</strong></h3><p><strong>é—®é¢˜</strong>ï¼šé¡¹ç›®å¯èƒ½å¼•å…¥äº†ä¸å¿…è¦çš„ä»£ç ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ Webpack&#x2F;Vite <strong>Tree Shaking</strong>ï¼Œå»é™¤æœªä½¿ç”¨çš„ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; add &#125; <span class="keyword">from</span> <span class="string">&quot;lodash&quot;</span>;  <span class="comment">// åªå¯¼å…¥ addï¼Œé¿å…å¯¼å…¥æ•´ä¸ª lodash</span></span><br></pre></td></tr></table></figure>

<p>âœ… <strong>å‡å°‘ JS ä½“ç§¯ï¼Œé¿å…åŠ è½½æ— ç”¨ä»£ç ã€‚</strong></p>
<hr>
<h2 id="2-é™æ€èµ„æºä¼˜åŒ–"><a href="#2-é™æ€èµ„æºä¼˜åŒ–" class="headerlink" title="2. é™æ€èµ„æºä¼˜åŒ–"></a><strong>2. é™æ€èµ„æºä¼˜åŒ–</strong></h2><h3 id="2-1-å›¾ç‰‡ä¼˜åŒ–"><a href="#2-1-å›¾ç‰‡ä¼˜åŒ–" class="headerlink" title="2.1 å›¾ç‰‡ä¼˜åŒ–"></a><strong>2.1 å›¾ç‰‡ä¼˜åŒ–</strong></h3><p><strong>é—®é¢˜</strong>ï¼šå¤§å›¾ç‰‡åŠ è½½ç¼“æ…¢ï¼Œå½±å“é¦–å±æ¸²æŸ“ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><p><strong>ä½¿ç”¨ WebP&#x2F;AVIF æ ¼å¼</strong>ï¼ˆæ¯” PNG&#x2F;JPG ä½“ç§¯æ›´å°ï¼‰</p>
</li>
<li><p><strong>å›¾ç‰‡æ‡’åŠ è½½</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;placeholder.jpg&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;large-image.jpg&quot;</span> <span class="attr">loading</span>=<span class="string">&quot;lazy&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>CDN åŠ é€Ÿå›¾ç‰‡</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.example.com/image.webp&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ… <strong>å‡å°‘å›¾ç‰‡åŠ è½½æ—¶é—´ï¼Œæé«˜é¦–å±é€Ÿåº¦ã€‚</strong></p>
<hr>
<h3 id="2-2-CSS-ä¼˜åŒ–"><a href="#2-2-CSS-ä¼˜åŒ–" class="headerlink" title="2.2 CSS ä¼˜åŒ–"></a><strong>2.2 CSS ä¼˜åŒ–</strong></h3><p><strong>é—®é¢˜</strong>ï¼šCSS è¿‡å¤§ï¼Œå¯¼è‡´é˜»å¡æ¸²æŸ“ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><p><strong>Critical CSS</strong>ï¼ˆå…³é”® CSS å†…è”ï¼Œå‡å°‘é˜»å¡ï¼‰</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="selector-tag">body</span> &#123; <span class="attribute">font-size</span>: <span class="number">16px</span>; &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä½¿ç”¨ Tailwind CSS &#x2F; CSS Modules</strong>ï¼Œé¿å…åŠ è½½æ— ç”¨æ ·å¼ã€‚</p>
</li>
<li><p><strong>CSS ä»£ç åˆ†å‰²</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./styles.css&quot;</span>;  <span class="comment">// ä»…åœ¨éœ€è¦çš„é¡µé¢åŠ è½½</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ… <strong>æé«˜é¦–å±æ¸²æŸ“é€Ÿåº¦ï¼Œå‡å°‘ CSS é˜»å¡ã€‚</strong></p>
<hr>
<h2 id="3-ç½‘ç»œä¼˜åŒ–"><a href="#3-ç½‘ç»œä¼˜åŒ–" class="headerlink" title="3. ç½‘ç»œä¼˜åŒ–"></a><strong>3. ç½‘ç»œä¼˜åŒ–</strong></h2><h3 id="3-1-HTTP-2-å’Œ-HTTP-3"><a href="#3-1-HTTP-2-å’Œ-HTTP-3" class="headerlink" title="3.1 HTTP&#x2F;2 å’Œ HTTP&#x2F;3"></a><strong>3.1 HTTP&#x2F;2 å’Œ HTTP&#x2F;3</strong></h3><p><strong>é—®é¢˜</strong>ï¼šä¼ ç»Ÿ HTTP&#x2F;1.1 éœ€è¦å¤šæ¬¡è¯·æ±‚æ‰èƒ½åŠ è½½å¤šä¸ªèµ„æºã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨ HTTP&#x2F;2 æˆ– HTTP&#x2F;3</strong> è¿›è¡Œå¤šè·¯å¤ç”¨ï¼Œå‡å°‘è¯·æ±‚å¼€é”€ã€‚</li>
</ul>
<p>âœ… <strong>å‡å°‘è¯·æ±‚é˜»å¡ï¼Œæé«˜èµ„æºåŠ è½½æ•ˆç‡ã€‚</strong></p>
<hr>
<h3 id="3-2-ä½¿ç”¨-CDN"><a href="#3-2-ä½¿ç”¨-CDN" class="headerlink" title="3.2 ä½¿ç”¨ CDN"></a><strong>3.2 ä½¿ç”¨ CDN</strong></h3><p><strong>é—®é¢˜</strong>ï¼šèµ„æºè¯·æ±‚é€Ÿåº¦å—æœåŠ¡å™¨ç‰©ç†è·ç¦»å½±å“ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><p><strong>ä½¿ç”¨ CDN</strong>ï¼ˆå¦‚ Cloudflareã€Fastlyã€é˜¿é‡Œäº‘ CDNï¼‰</p>
</li>
<li><p><strong>ç¼“å­˜é™æ€èµ„æº</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">location</span> /static/ &#123;</span><br><span class="line">    <span class="attribute">expires</span> <span class="number">30d</span>;</span><br><span class="line">    <span class="attribute">add_header</span> Cache-Control <span class="string">&quot;public, max-age=2592000&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ… <strong>åŠ é€Ÿèµ„æºåŠ è½½ï¼Œå‡å°‘æœåŠ¡å™¨å‹åŠ›ã€‚</strong></p>
<hr>
<h3 id="3-3-é¢„åŠ è½½-é¢„æ¸²æŸ“"><a href="#3-3-é¢„åŠ è½½-é¢„æ¸²æŸ“" class="headerlink" title="3.3 é¢„åŠ è½½ &amp; é¢„æ¸²æŸ“"></a><strong>3.3 é¢„åŠ è½½ &amp; é¢„æ¸²æŸ“</strong></h3><p><strong>é—®é¢˜</strong>ï¼šSPA éœ€è¦ç­‰ JS è§£æå®Œåå†åŠ è½½é¡µé¢ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><p><strong>é¢„åŠ è½½é‡è¦èµ„æº</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;preload&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span> <span class="attr">as</span>=<span class="string">&quot;style&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>DNS é¢„è§£æ</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;dns-prefetch&quot;</span> <span class="attr">href</span>=<span class="string">&quot;//cdn.example.com&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ… <strong>å‡å°‘å…³é”®èµ„æºåŠ è½½æ—¶é—´ã€‚</strong></p>
<hr>
<h2 id="4-é¦–å±æ¸²æŸ“ä¼˜åŒ–"><a href="#4-é¦–å±æ¸²æŸ“ä¼˜åŒ–" class="headerlink" title="4. é¦–å±æ¸²æŸ“ä¼˜åŒ–"></a><strong>4. é¦–å±æ¸²æŸ“ä¼˜åŒ–</strong></h2><h3 id="4-1-æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰"><a href="#4-1-æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰" class="headerlink" title="4.1 æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰"></a><strong>4.1 æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</strong></h3><p><strong>é—®é¢˜</strong>ï¼šSPA éœ€è¦ç­‰ JavaScript åŠ è½½åæ‰èƒ½æ¸²æŸ“ï¼Œå½±å“<strong>é¦–å±ç™½å±æ—¶é—´</strong>ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><p><strong>ä½¿ç”¨ Next.js è¿›è¡Œ SSR</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getServerSideProps</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetchData</span>();</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">props</span>: &#123; data &#125; &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ… <strong>SSR æå‰æ¸²æŸ“ HTMLï¼Œæé«˜é¦–å±åŠ è½½é€Ÿåº¦ã€‚</strong></p>
<hr>
<h3 id="4-2-é¢„æ¸²æŸ“ï¼ˆPrerenderingï¼‰"><a href="#4-2-é¢„æ¸²æŸ“ï¼ˆPrerenderingï¼‰" class="headerlink" title="4.2 é¢„æ¸²æŸ“ï¼ˆPrerenderingï¼‰"></a><strong>4.2 é¢„æ¸²æŸ“ï¼ˆPrerenderingï¼‰</strong></h3><p><strong>é—®é¢˜</strong>ï¼šSSR é€‚åˆåŠ¨æ€é¡µé¢ï¼Œä½†æœ‰æ—¶å†…å®¹æ˜¯å›ºå®šçš„ã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><p><strong>ä½¿ç”¨ prerender-spa-plugin è¿›è¡Œé™æ€é¢„æ¸²æŸ“</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">PrerenderSPAPlugin</span>(&#123;</span><br><span class="line">    <span class="attr">staticDir</span>: path.<span class="title function_">join</span>(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">routes</span>: [<span class="string">&#x27;/home&#x27;</span>, <span class="string">&#x27;/about&#x27;</span>]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ… <strong>é€‚ç”¨äºé™æ€é¡µé¢ï¼Œé¿å… SSR æœåŠ¡å™¨å‹åŠ›ã€‚</strong></p>
<hr>
<h3 id="4-3-éª¨æ¶å±ï¼ˆSkeleton-Screenï¼‰"><a href="#4-3-éª¨æ¶å±ï¼ˆSkeleton-Screenï¼‰" class="headerlink" title="4.3 éª¨æ¶å±ï¼ˆSkeleton Screenï¼‰"></a><strong>4.3 éª¨æ¶å±ï¼ˆSkeleton Screenï¼‰</strong></h3><p><strong>é—®é¢˜</strong>ï¼šæ•°æ®æœªåŠ è½½æ—¶ï¼Œç”¨æˆ·çœ‹åˆ°ç™½å±ï¼Œå½±å“ä½“éªŒã€‚<br><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li><p><strong>ä½¿ç”¨ CSS å ä½</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;skeleton&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ä½¿ç”¨ React&#x2F;Vue ç»„ä»¶</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Skeleton</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;skeleton&quot;</span>&gt;</span>Loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>âœ… <strong>æå‡ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘ç™½å±æ—¶é—´ã€‚</strong></p>
<hr>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><table>
<thead>
<tr>
<th>ä¼˜åŒ–æ–¹å¼</th>
<th>æ–¹æ³•</th>
</tr>
</thead>
<tbody><tr>
<td><strong>èµ„æºä¼˜åŒ–</strong></td>
<td>ä»£ç åˆ†å‰²ã€JS&#x2F;CSS å‹ç¼©ã€Tree Shaking</td>
</tr>
<tr>
<td><strong>é™æ€èµ„æºä¼˜åŒ–</strong></td>
<td>å›¾ç‰‡ä¼˜åŒ–ã€å…³é”® CSS å†…è”ã€CDN</td>
</tr>
<tr>
<td><strong>ç½‘ç»œä¼˜åŒ–</strong></td>
<td>HTTP&#x2F;2ã€é¢„åŠ è½½ã€ç¼“å­˜ä¼˜åŒ–</td>
</tr>
<tr>
<td><strong>é¦–å±æ¸²æŸ“ä¼˜åŒ–</strong></td>
<td>SSRã€é¢„æ¸²æŸ“ã€éª¨æ¶å±</td>
</tr>
</tbody></table>
<p>âœ… <strong>æœ€é‡è¦çš„ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨ <code>&lt;!DOCTYPE html&gt;</code> è§¦å‘æ ‡å‡†æ¨¡å¼</strong>ï¼ˆé¿å…æµè§ˆå™¨æ¸²æŸ“å¼‚å¸¸ï¼‰</li>
<li><strong>å‡å°‘ JS ä½“ç§¯</strong>ï¼ˆä»£ç åˆ†å‰²ã€Tree Shakingã€Gzip å‹ç¼©ï¼‰</li>
<li><strong>ä¼˜åŒ–å›¾ç‰‡ &amp; CSS èµ„æºåŠ è½½</strong>ï¼ˆWebP&#x2F;CDN&#x2F;æ‡’åŠ è½½ï¼‰</li>
<li><strong>ä½¿ç”¨ SSR &#x2F; é¢„æ¸²æŸ“ &#x2F; éª¨æ¶å±</strong>ï¼ˆå‡å°‘é¦–å±ç™½å±æ—¶é—´ï¼‰</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/17/spa-first-paint/" data-id="cm7bdn3hp001klipyevqb722s" data-title="SPAé¦–å±åŠ è½½ä¼˜åŒ–" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Frontend/" rel="tag">Frontend</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SPA/" rel="tag">SPA</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-dom-event-target" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/14/dom-event-target/" class="article-date">
  <time class="dt-published" datetime="2025-02-14T16:38:47.000Z" itemprop="datePublished">2025-02-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/14/dom-event-target/">event.target å’Œ event.currentTarget</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><code>event.target</code> å’Œ <code>event.currentTarget</code> éƒ½æ˜¯äº‹ä»¶å¯¹è±¡ (<code>event</code>) çš„å±æ€§ï¼Œå®ƒä»¬éƒ½å¯ä»¥ç”¨æ¥è·å–äº‹ä»¶çš„ç›®æ ‡å…ƒç´ ï¼Œä½†æœ‰ä»¥ä¸‹å…³é”®åŒºåˆ«ï¼š</p>
<h3 id="1-event-target"><a href="#1-event-target" class="headerlink" title="1. event.target"></a>1. <code>event.target</code></h3><ul>
<li><code>event.target</code> è¿”å›çš„æ˜¯<strong>è§¦å‘äº‹ä»¶çš„å®é™…å…ƒç´ </strong>ï¼Œå³äº‹ä»¶çš„<strong>ç›®æ ‡å…ƒç´ </strong>ã€‚</li>
<li>è¿™æ˜¯äº‹ä»¶å†’æ³¡è¿‡ç¨‹ä¸­çš„é‚£ä¸ªå…ƒç´ ï¼Œé€šå¸¸æ˜¯ç”¨æˆ·ä¸ä¹‹äº¤äº’çš„å…ƒç´ ï¼ˆå¦‚æŒ‰é’®ã€é“¾æ¥ã€è¾“å…¥æ¡†ç­‰ï¼‰ã€‚</li>
</ul>
<p><strong>ä¾‹å­</strong>ï¼š<br>å‡è®¾æœ‰ä»¥ä¸‹ HTML ç»“æ„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;child&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”ä¸ºçˆ¶å…ƒç´ å’Œå­å…ƒç´ ç»‘å®šäº†äº‹ä»¶ç›‘å¬å™¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">target</span>);  <span class="comment">// æ‰“å°è§¦å‘äº‹ä»¶çš„å®é™…å…ƒç´ </span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å½“ç‚¹å‡» <code>button</code> æ—¶ï¼Œ<code>event.target</code> ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;child&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸º <code>button</code> å…ƒç´ æ˜¯è§¦å‘äº‹ä»¶çš„ç›®æ ‡ã€‚</p>
<h3 id="2-event-currentTarget"><a href="#2-event-currentTarget" class="headerlink" title="2. event.currentTarget"></a>2. <code>event.currentTarget</code></h3><ul>
<li><code>event.currentTarget</code> è¿”å›çš„æ˜¯<strong>å½“å‰å¤„ç†äº‹ä»¶çš„å…ƒç´ </strong>ï¼Œå³äº‹ä»¶ç›‘å¬å™¨ç»‘å®šçš„å…ƒç´ ã€‚</li>
<li>æ— è®ºäº‹ä»¶æ˜¯ä»å“ªä¸ªå…ƒç´ è§¦å‘çš„ï¼Œ<code>currentTarget</code> å§‹ç»ˆæŒ‡å‘å½“å‰æ­£åœ¨æ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°çš„å…ƒç´ ã€‚</li>
</ul>
<p><strong>ä¾‹å­</strong>ï¼š<br>ç»§ç»­ä»¥ä¸Šçš„ HTML ç»“æ„å’Œäº‹ä»¶ç›‘å¬å™¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(event.<span class="property">currentTarget</span>);  <span class="comment">// æ‰“å°ç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼ˆçˆ¶å…ƒç´ ï¼‰</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å½“ç‚¹å‡» <code>button</code> æ—¶ï¼Œ<code>event.currentTarget</code> ä¼šè¾“å‡ºï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;child&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å› ä¸ºäº‹ä»¶ç›‘å¬å™¨ç»‘å®šåœ¨çˆ¶å…ƒç´  <code>div</code> ä¸Šï¼Œ<code>event.currentTarget</code> å§‹ç»ˆæŒ‡å‘ <code>div</code> å…ƒç´ ã€‚</p>
<h3 id="å…³é”®åŒºåˆ«"><a href="#å…³é”®åŒºåˆ«" class="headerlink" title="å…³é”®åŒºåˆ«"></a>å…³é”®åŒºåˆ«</h3><ul>
<li><strong><code>event.target</code></strong> æ˜¯<strong>è§¦å‘äº‹ä»¶çš„å…ƒç´ </strong>ï¼Œå³äº‹ä»¶å‘ç”Ÿçš„æºå¤´ã€‚</li>
<li><strong><code>event.currentTarget</code></strong> æ˜¯<strong>äº‹ä»¶ç›‘å¬å™¨ç»‘å®šçš„å…ƒç´ </strong>ï¼Œå³æ­£åœ¨å¤„ç†å½“å‰äº‹ä»¶çš„å…ƒç´ ã€‚</li>
</ul>
<h3 id="ä»€ä¹ˆæ—¶å€™ç”¨-event-target-å’Œ-event-currentTargetï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™ç”¨-event-target-å’Œ-event-currentTargetï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™ç”¨ event.target å’Œ event.currentTargetï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™ç”¨ <code>event.target</code> å’Œ <code>event.currentTarget</code>ï¼Ÿ</h3><ul>
<li><strong><code>event.target</code></strong> ç”¨æ¥è·å–äº‹ä»¶çš„å…·ä½“ç›®æ ‡å…ƒç´ ï¼Œé€‚ç”¨äºä½ æƒ³çŸ¥é“äº‹ä»¶æ˜¯åœ¨å“ªä¸ªå…ƒç´ ä¸Šè§¦å‘çš„ã€‚</li>
<li><strong><code>event.currentTarget</code></strong> ç”¨æ¥è·å–äº‹ä»¶å¤„ç†å‡½æ•°å½“å‰ç»‘å®šçš„å…ƒç´ ï¼Œé€‚ç”¨äºä½ æƒ³çŸ¥é“äº‹ä»¶æ˜¯åœ¨å“ªä¸ªå…ƒç´ ä¸Šè¢«å¤„ç†çš„ï¼Œé€šå¸¸ç”¨äºå§”æ‰˜äº‹ä»¶ã€‚</li>
</ul>
<h3 id="äº‹ä»¶å§”æ‰˜çš„ç¤ºä¾‹"><a href="#äº‹ä»¶å§”æ‰˜çš„ç¤ºä¾‹" class="headerlink" title="äº‹ä»¶å§”æ‰˜çš„ç¤ºä¾‹"></a>äº‹ä»¶å§”æ‰˜çš„ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›®æ ‡å…ƒç´ ï¼š&#x27;</span>, event.<span class="property">target</span>);  <span class="comment">// ç›®æ ‡å…ƒç´ æ˜¯ç‚¹å‡»çš„å­å…ƒç´ </span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰å¤„ç†å…ƒç´ ï¼š&#x27;</span>, event.<span class="property">currentTarget</span>);  <span class="comment">// å½“å‰å¤„ç†å…ƒç´ æ˜¯çˆ¶å…ƒç´ </span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœä½ ç‚¹å‡»äº† <code>button</code>ï¼Œ<code>event.target</code> ä¼šæ˜¯ <code>button</code> å…ƒç´ ï¼Œè€Œ <code>event.currentTarget</code> ä¼šæ˜¯ <code>parent</code> å…ƒç´ ã€‚</li>
</ul>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><ul>
<li><strong><code>event.target</code></strong>: è§¦å‘äº‹ä»¶çš„å®é™…å…ƒç´ ã€‚</li>
<li><strong><code>event.currentTarget</code></strong>: å½“å‰æ­£åœ¨å¤„ç†äº‹ä»¶çš„å…ƒç´ ï¼ˆç›‘å¬å™¨ç»‘å®šçš„å…ƒç´ ï¼‰ã€‚</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/14/dom-event-target/" data-id="cm7bdn3h60005lipy3aopc5eh" data-title="event.target å’Œ event.currentTarget" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-dom-event-bubbling" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/14/dom-event-bubbling/" class="article-date">
  <time class="dt-published" datetime="2025-02-14T16:18:55.000Z" itemprop="datePublished">2025-02-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/14/dom-event-bubbling/">äº‹ä»¶å†’æ³¡</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>äº‹ä»¶å†’æ³¡ï¼ˆEvent Bubblingï¼‰</strong> æ˜¯ DOM äº‹ä»¶ä¼ æ’­çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒæè¿°äº†äº‹ä»¶ä»ç›®æ ‡å…ƒç´ å¼€å§‹ï¼Œé€çº§å‘ä¸Šå†’æ³¡åˆ°çˆ¶å…ƒç´ ã€ç¥–å…ˆå…ƒç´ ï¼Œç›´åˆ° <code>document</code> å¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>
<h3 id="äº‹ä»¶å†’æ³¡çš„è¿‡ç¨‹"><a href="#äº‹ä»¶å†’æ³¡çš„è¿‡ç¨‹" class="headerlink" title="äº‹ä»¶å†’æ³¡çš„è¿‡ç¨‹"></a>äº‹ä»¶å†’æ³¡çš„è¿‡ç¨‹</h3><ol>
<li>å½“ç”¨æˆ·åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šè§¦å‘äº‹ä»¶æ—¶ï¼Œäº‹ä»¶é¦–å…ˆä¼šåœ¨è¯¥å…ƒç´ ä¸Šè¢«å¤„ç†ï¼ˆç›®æ ‡å…ƒç´ ï¼‰ã€‚</li>
<li>ç„¶åäº‹ä»¶ä¼šå†’æ³¡åˆ°è¯¥å…ƒç´ çš„çˆ¶å…ƒç´ ï¼Œæ¥ç€æ˜¯çˆ¶å…ƒç´ çš„çˆ¶å…ƒç´ ï¼Œç›´åˆ° <code>document</code> å¯¹è±¡ã€‚</li>
<li>äº‹ä»¶ä¼šæŒ‰ç…§è¿™ä¸ªé¡ºåºè¿›è¡Œä¼ æ’­ï¼Œç›´åˆ°äº‹ä»¶åˆ°è¾¾æœ€é¡¶å±‚çš„å…ƒç´ æˆ–è€…è¢«é˜»æ­¢ã€‚</li>
</ol>
<h3 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a>ä¾‹å­</h3><p>å‡è®¾æœ‰å¦‚ä¸‹çš„ HTML ç»“æ„ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;parent&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;child&quot;</span>&gt;</span>ç‚¹å‡»æˆ‘<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¹¶ä¸”åœ¨ JavaScript ä¸­ç»™çˆ¶å…ƒç´ å’Œå­å…ƒç´ åˆ†åˆ«ç»‘å®šäº†äº‹ä»¶ç›‘å¬å™¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;parent&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;çˆ¶å…ƒç´ è¢«ç‚¹å‡»&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;child&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;å­å…ƒç´ è¢«ç‚¹å‡»&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å½“ä½ ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œäº‹ä»¶é¦–å…ˆä¼šåœ¨æŒ‰é’®ä¸Šè§¦å‘ï¼ˆç›®æ ‡å…ƒç´ ï¼‰ï¼Œç„¶åå†’æ³¡åˆ°çˆ¶å…ƒç´  <code>div</code> ä¸Šã€‚è¾“å‡ºç»“æœå°†æ˜¯ï¼š</p>
<ol>
<li><code>&quot;å­å…ƒç´ è¢«ç‚¹å‡»&quot;</code>ï¼ˆæŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ï¼‰</li>
<li><code>&quot;çˆ¶å…ƒç´ è¢«ç‚¹å‡»&quot;</code>ï¼ˆçˆ¶ <code>div</code> çš„ç‚¹å‡»äº‹ä»¶ï¼‰</li>
</ol>
<h3 id="ä¸ºä»€ä¹ˆå«â€œå†’æ³¡â€ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆå«â€œå†’æ³¡â€ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆå«â€œå†’æ³¡â€ï¼Ÿ"></a>ä¸ºä»€ä¹ˆå«â€œå†’æ³¡â€ï¼Ÿ</h3><p>å°±åƒæ°´æ»´ä»æ°´é¢æ»´ä¸‹ï¼Œäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å†’æ³¡åˆ°æœ€é¡¶å±‚ä¸€æ ·ï¼Œå› æ­¤å«åšâ€œäº‹ä»¶å†’æ³¡â€ã€‚</p>
<h3 id="é˜»æ­¢äº‹ä»¶å†’æ³¡"><a href="#é˜»æ­¢äº‹ä»¶å†’æ³¡" class="headerlink" title="é˜»æ­¢äº‹ä»¶å†’æ³¡"></a>é˜»æ­¢äº‹ä»¶å†’æ³¡</h3><p>ä½ å¯ä»¥ä½¿ç”¨ <code>event.stopPropagation()</code> æ¥é˜»æ­¢äº‹ä»¶ç»§ç»­å†’æ³¡åˆ°çˆ¶å…ƒç´ ã€‚</p>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;child&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;å­å…ƒç´ è¢«ç‚¹å‡»&#x27;</span>);</span><br><span class="line">  event.<span class="title function_">stopPropagation</span>();  <span class="comment">// é˜»æ­¢å†’æ³¡</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶ï¼Œç‚¹å‡»æŒ‰é’®æ—¶ï¼Œåªä¼šæ˜¾ç¤º <code>&quot;å­å…ƒç´ è¢«ç‚¹å‡»&quot;</code>ï¼Œçˆ¶å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ä¸ä¼šè¢«è§¦å‘ã€‚</p>
<h2 id="event-preventDefault-å’Œ-event-stopPropagation-çš„åŒºåˆ«"><a href="#event-preventDefault-å’Œ-event-stopPropagation-çš„åŒºåˆ«" class="headerlink" title="event.preventDefault() å’Œ event.stopPropagation()çš„åŒºåˆ«"></a><code>event.preventDefault()</code> å’Œ <code>event.stopPropagation()</code>çš„åŒºåˆ«</h2><p><code>event.preventDefault()</code> å’Œ <code>event.stopPropagation()</code> éƒ½æ˜¯ç”¨æ¥æ§åˆ¶äº‹ä»¶æµçš„ï¼Œä½†å®ƒä»¬çš„ä½œç”¨ä¸åŒï¼š</p>
<ol>
<li><p><strong><code>event.preventDefault()</code></strong>:</p>
<ul>
<li>è¿™ä¸ªæ–¹æ³•ç”¨æ¥<strong>é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º</strong>ã€‚ä¾‹å¦‚ï¼Œç‚¹å‡»ä¸€ä¸ªé“¾æ¥æ—¶ï¼Œæµè§ˆå™¨é»˜è®¤ä¼šè·³è½¬åˆ°é“¾æ¥åœ°å€ã€‚å¦‚æœä½ è°ƒç”¨äº† <code>event.preventDefault()</code>ï¼Œæµè§ˆå™¨å°±ä¸ä¼šæ‰§è¡Œè¿™ä¸ªè·³è½¬æ“ä½œã€‚</li>
<li>å®ƒä¸ä¼šåœæ­¢äº‹ä»¶çš„ä¼ æ’­ï¼ˆå³äº‹ä»¶ä»ç„¶ä¼šå†’æ³¡æˆ–æ•è·ï¼‰ã€‚</li>
</ul>
<p><strong>ä¾‹å­</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;form&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>();  <span class="comment">// é˜»æ­¢è¡¨å•æäº¤</span></span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;è¡¨å•æœªæäº¤&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong><code>event.stopPropagation()</code></strong>:</p>
<ul>
<li>è¿™ä¸ªæ–¹æ³•ç”¨æ¥<strong>åœæ­¢äº‹ä»¶çš„ä¼ æ’­</strong>ï¼Œå³<strong>é˜»æ­¢äº‹ä»¶å†’æ³¡</strong>ï¼ˆä»ç›®æ ‡å…ƒç´ åˆ°æ ¹å…ƒç´ ï¼‰æˆ–<strong>æ•è·</strong>ï¼ˆä»æ ¹å…ƒç´ åˆ°ç›®æ ‡å…ƒç´ ï¼‰ã€‚</li>
<li>è¿™æ„å‘³ç€äº‹ä»¶ä¸ä¼šç»§ç»­å‘ä¸Šä¼ æ’­åˆ°çˆ¶å…ƒç´ ï¼Œä¹Ÿä¸ä¼šä¼ é€’ç»™å…¶ä»–ç›‘å¬è¯¥äº‹ä»¶çš„å…ƒç´ ã€‚</li>
</ul>
<p><strong>ä¾‹å­</strong>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;button&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span><br><span class="line">  event.<span class="title function_">stopPropagation</span>();  <span class="comment">// é˜»æ­¢äº‹ä»¶å†’æ³¡</span></span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;æŒ‰é’®è¢«ç‚¹å‡»&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;DIV è¢«ç‚¹å‡»&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç‚¹å‡»æŒ‰é’®æ—¶ï¼Œåªä¼šæ˜¾ç¤º <code>&quot;æŒ‰é’®è¢«ç‚¹å‡»&quot;</code>ï¼Œè€Œä¸ä¼šè§¦å‘ <code>div</code> çš„ç‚¹å‡»äº‹ä»¶ã€‚</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/14/dom-event-bubbling/" data-id="cm7bdn3h10001lipy6nl30ag9" data-title="äº‹ä»¶å†’æ³¡" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-js-debounce-throttle" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/12/js-debounce-throttle/" class="article-date">
  <time class="dt-published" datetime="2025-02-12T14:04:28.000Z" itemprop="datePublished">2025-02-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/12/js-debounce-throttle/">JavaScript é˜²æŠ–ï¼ˆDebounceï¼‰å’ŒèŠ‚æµï¼ˆThrottleï¼‰</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> å’Œ <strong>èŠ‚æµï¼ˆThrottleï¼‰</strong> æ˜¯ä¸¤ç§ä¼˜åŒ–é«˜é¢‘æ‰§è¡Œå‡½æ•°çš„æŠ€æœ¯ï¼Œä¸»è¦ç”¨äº<strong>å‡å°‘å‡½æ•°è°ƒç”¨é¢‘ç‡ï¼Œæé«˜æ€§èƒ½</strong>ï¼Œæ¯”å¦‚å¤„ç†ï¼š</p>
<ul>
<li><strong>çª—å£ <code>resize</code> äº‹ä»¶</strong></li>
<li><strong>æœç´¢æ¡†è¾“å…¥</strong></li>
<li><strong>æŒ‰é’®ç‚¹å‡»</strong></li>
<li><strong>æ»šåŠ¨äº‹ä»¶ <code>scroll</code></strong></li>
<li><strong>é¼ æ ‡ç§»åŠ¨ <code>mousemove</code></strong></li>
</ul>
<hr>
<h2 id="1-é˜²æŠ–ï¼ˆDebounceï¼‰"><a href="#1-é˜²æŠ–ï¼ˆDebounceï¼‰" class="headerlink" title="1. é˜²æŠ–ï¼ˆDebounceï¼‰"></a><strong>1. é˜²æŠ–ï¼ˆDebounceï¼‰</strong></h2><p><strong>æ¦‚å¿µï¼š</strong>  </p>
<blockquote>
<p><strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong> ä½¿å¾—æŸä¸ªå‡½æ•°åœ¨<strong>ä¸€æ®µæ—¶é—´å†…</strong>ï¼ˆå¦‚ 500msï¼‰<strong>æ²¡æœ‰å†æ¬¡è°ƒç”¨</strong>æ—¶æ‰ä¼šæ‰§è¡Œã€‚å¦‚æœåœ¨ç­‰å¾…æ—¶é—´å†…åˆè§¦å‘äº†å‡½æ•°ï¼Œåˆ™é‡æ–°è®¡æ—¶ã€‚</p>
</blockquote>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong>  </p>
<ul>
<li><strong>æœç´¢è¾“å…¥æ¡†</strong>ï¼šåªåœ¨ç”¨æˆ·<strong>åœæ­¢è¾“å…¥</strong>åæ‰å‘é€è¯·æ±‚ã€‚</li>
<li><strong>çª—å£ <code>resize</code> äº‹ä»¶</strong>ï¼šç”¨æˆ·åœæ­¢è°ƒæ•´çª—å£å¤§å°åæ‰§è¡Œè®¡ç®—ã€‚</li>
</ul>
<h3 id="ğŸ”¹-é˜²æŠ–å®ç°"><a href="#ğŸ”¹-é˜²æŠ–å®ç°" class="headerlink" title="ğŸ”¹ é˜²æŠ–å®ç°"></a><strong>ğŸ”¹ é˜²æŠ–å®ç°</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">fn, delay</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer; <span class="comment">// è®¡æ—¶å™¨</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer); <span class="comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args); <span class="comment">// åœ¨ delay æ—¶é—´åæ‰§è¡Œ</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”¹-ä½¿ç”¨é˜²æŠ–"><a href="#ğŸ”¹-ä½¿ç”¨é˜²æŠ–" class="headerlink" title="ğŸ”¹ ä½¿ç”¨é˜²æŠ–"></a><strong>ğŸ”¹ ä½¿ç”¨é˜²æŠ–</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">onSearchInput</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æœç´¢å†…å®¹ï¼š&quot;</span>, e.<span class="property">target</span>.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> debouncedSearch = <span class="title function_">debounce</span>(onSearchInput, <span class="number">500</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;search&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;input&quot;</span>, debouncedSearch);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç”¨æˆ·<strong>è¿ç»­è¾“å…¥æ—¶ä¸ä¼šè§¦å‘</strong> <code>onSearchInput</code>ï¼Œ<strong>åªæœ‰åœæ­¢è¾“å…¥ 500ms åæ‰æ‰§è¡Œ</strong>ã€‚</p>
</blockquote>
<hr>
<h2 id="2-èŠ‚æµï¼ˆThrottleï¼‰"><a href="#2-èŠ‚æµï¼ˆThrottleï¼‰" class="headerlink" title="2. èŠ‚æµï¼ˆThrottleï¼‰"></a><strong>2. èŠ‚æµï¼ˆThrottleï¼‰</strong></h2><p><strong>æ¦‚å¿µï¼š</strong>  </p>
<blockquote>
<p><strong>èŠ‚æµï¼ˆThrottleï¼‰</strong> ä½¿å¾—æŸä¸ªå‡½æ•°<strong>åœ¨ä¸€å®šæ—¶é—´é—´éš”å†…</strong>ï¼ˆå¦‚ 500msï¼‰<strong>åªæ‰§è¡Œä¸€æ¬¡</strong>ï¼Œæ— è®ºå®ƒåœ¨è¿™æ®µæ—¶é—´å†…è¢«è°ƒç”¨äº†å¤šå°‘æ¬¡ã€‚</p>
</blockquote>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong>  </p>
<ul>
<li><strong>æŒ‰é’®ç‚¹å‡»</strong>ï¼šé˜²æ­¢<strong>ç”¨æˆ·è¿ç‚¹</strong>æŒ‰é’®é€ æˆé‡å¤è¯·æ±‚ã€‚</li>
<li><strong>æ»šåŠ¨äº‹ä»¶</strong>ï¼šé˜²æ­¢<strong>é«˜é¢‘è§¦å‘ <code>scroll</code></strong> å½±å“æ€§èƒ½ã€‚</li>
<li>**é¼ æ ‡ç§»åŠ¨ <code>mousemove</code>**ï¼šé˜²æ­¢è§¦å‘æ¬¡æ•°è¿‡å¤šå½±å“é¡µé¢è¡¨ç°ã€‚</li>
</ul>
<h3 id="ğŸ”¹-èŠ‚æµå®ç°"><a href="#ğŸ”¹-èŠ‚æµå®ç°" class="headerlink" title="ğŸ”¹ èŠ‚æµå®ç°"></a><strong>ğŸ”¹ èŠ‚æµå®ç°</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, interval</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> lastTime = <span class="number">0</span>; <span class="comment">// è®°å½•ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="keyword">if</span> (now - lastTime &gt;= interval) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">            lastTime = now; <span class="comment">// æ›´æ–°ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ”¹-ä½¿ç”¨èŠ‚æµ"><a href="#ğŸ”¹-ä½¿ç”¨èŠ‚æµ" class="headerlink" title="ğŸ”¹ ä½¿ç”¨èŠ‚æµ"></a><strong>ğŸ”¹ ä½¿ç”¨èŠ‚æµ</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">onScroll</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;é¡µé¢æ»šåŠ¨ä¸­...&quot;</span>, <span class="title class_">Date</span>.<span class="title function_">now</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> throttledScroll = <span class="title function_">throttle</span>(onScroll, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;scroll&quot;</span>, throttledScroll);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å³ä½¿æ»šåŠ¨äº‹ä»¶<strong>è§¦å‘ä¸Šç™¾æ¬¡</strong>ï¼Œ<code>onScroll</code> <strong>æ¯éš” 1000ms åªæ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p>
</blockquote>
<hr>
<h2 id="3-é˜²æŠ–-vs-èŠ‚æµ"><a href="#3-é˜²æŠ–-vs-èŠ‚æµ" class="headerlink" title="3. é˜²æŠ– vs. èŠ‚æµ"></a><strong>3. é˜²æŠ– vs. èŠ‚æµ</strong></h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>é˜²æŠ–ï¼ˆDebounceï¼‰</th>
<th>èŠ‚æµï¼ˆThrottleï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>è§¦å‘æ—¶æœº</td>
<td><strong>å»¶è¿Ÿæ‰§è¡Œ</strong>ï¼ˆæœ€åä¸€æ¬¡è§¦å‘åæ‰§è¡Œï¼‰</td>
<td><strong>å›ºå®šé—´éš”æ‰§è¡Œ</strong>ï¼ˆé—´éš”æ—¶é—´å†…æœ€å¤šæ‰§è¡Œä¸€æ¬¡ï¼‰</td>
</tr>
<tr>
<td>é€‚ç”¨åœºæ™¯</td>
<td>æœç´¢æ¡†è¾“å…¥ã€è¡¨å•éªŒè¯ã€è°ƒæ•´çª—å£å¤§å°</td>
<td>æŒ‰é’®ç‚¹å‡»ã€æ»šåŠ¨äº‹ä»¶ã€é¼ æ ‡ç§»åŠ¨</td>
</tr>
<tr>
<td>æ§åˆ¶æ–¹å¼</td>
<td>æ¸…é™¤ <code>setTimeout</code> é‡æ–°è®¡æ—¶</td>
<td>è®°å½•æ—¶é—´æˆ³</td>
</tr>
</tbody></table>
<hr>
<h2 id="4-è¿›é˜¶ï¼šèŠ‚æµçš„-setTimeout-ç‰ˆæœ¬"><a href="#4-è¿›é˜¶ï¼šèŠ‚æµçš„-setTimeout-ç‰ˆæœ¬" class="headerlink" title="4. è¿›é˜¶ï¼šèŠ‚æµçš„ setTimeout ç‰ˆæœ¬"></a><strong>4. è¿›é˜¶ï¼šèŠ‚æµçš„ <code>setTimeout</code> ç‰ˆæœ¬</strong></h2><p>é™¤äº† <code>Date.now()</code> ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨ <code>setTimeout</code> å®ç°èŠ‚æµï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">fn, interval</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!timer) &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">                timer = <span class="literal">null</span>; <span class="comment">// æ¸…ç©ºè®¡æ—¶å™¨</span></span><br><span class="line">            &#125;, interval);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>åŒºåˆ«</strong>ï¼š  </p>
</blockquote>
<ul>
<li><code>Date.now()</code> ç‰ˆæœ¬<strong>ç«‹å³æ‰§è¡Œ</strong>ï¼Œé€‚åˆ<strong>ç«‹å³å“åº”</strong>çš„åœºæ™¯ã€‚</li>
<li><code>setTimeout</code> ç‰ˆæœ¬<strong>å»¶è¿Ÿæ‰§è¡Œ</strong>ï¼Œé€‚åˆ<strong>äº‹ä»¶ç»“æŸåå“åº”</strong>çš„åœºæ™¯ã€‚</li>
</ul>
<hr>
<h2 id="5-ç»“åˆé˜²æŠ–å’ŒèŠ‚æµ"><a href="#5-ç»“åˆé˜²æŠ–å’ŒèŠ‚æµ" class="headerlink" title="5. ç»“åˆé˜²æŠ–å’ŒèŠ‚æµ"></a><strong>5. ç»“åˆé˜²æŠ–å’ŒèŠ‚æµ</strong></h2><p>æœ‰äº›æƒ…å†µæˆ‘ä»¬å¸Œæœ›ï¼š</p>
<ul>
<li><strong>çŸ­æ—¶é—´å†…çš„é«˜é¢‘è§¦å‘ä¸è¦æ‰§è¡Œï¼ˆé˜²æŠ–ï¼‰</strong>ã€‚</li>
<li><strong>ä½†ä¿è¯ä¸€å®šæ—¶é—´å†…è‡³å°‘æ‰§è¡Œä¸€æ¬¡ï¼ˆèŠ‚æµï¼‰</strong>ã€‚</li>
</ul>
<p>å¯ä»¥ç»“åˆä¸¤è€…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttleAndDebounce</span>(<span class="params">fn, interval</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> lastTime = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> timer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (now - lastTime &gt;= interval) &#123;</span><br><span class="line">            fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">            lastTime = now;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">                lastTime = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">            &#125;, interval);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a><strong>6. æ€»ç»“</strong></h2><ul>
<li><strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong>ï¼šå¤šæ¬¡è§¦å‘åªæ‰§è¡Œ<strong>æœ€åä¸€æ¬¡</strong>ï¼Œé€‚ç”¨äº<strong>æœç´¢ã€çª—å£ <code>resize</code></strong> ç­‰åœºæ™¯ã€‚</li>
<li><strong>èŠ‚æµï¼ˆThrottleï¼‰</strong>ï¼šå›ºå®šé—´éš”æ‰§è¡Œä¸€æ¬¡ï¼Œé€‚ç”¨äº<strong>æ»šåŠ¨äº‹ä»¶ã€é¼ æ ‡ç§»åŠ¨ã€æŒ‰é’®ç‚¹å‡»</strong>ã€‚</li>
<li><strong>å¯ä»¥ç»“åˆé˜²æŠ–å’ŒèŠ‚æµ</strong>ï¼Œä¿è¯<strong>çŸ­æ—¶é—´å†…ä¸æ‰§è¡Œï¼Œä½†ä¸€å®šæ—¶é—´å†…è‡³å°‘æ‰§è¡Œä¸€æ¬¡</strong>ã€‚</li>
</ul>
<hr>
<p>ğŸ”¥ <strong>æ¨èä½¿ç”¨åœºæ™¯</strong></p>
<table>
<thead>
<tr>
<th>é€‚ç”¨åœºæ™¯</th>
<th>æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td>æœç´¢æ¡†è¾“å…¥</td>
<td><strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong></td>
</tr>
<tr>
<td>æŒ‰é’®é˜²æ­¢å¤šæ¬¡ç‚¹å‡»</td>
<td><strong>èŠ‚æµï¼ˆThrottleï¼‰</strong></td>
</tr>
<tr>
<td>é¡µé¢ <code>resize</code></td>
<td><strong>é˜²æŠ–ï¼ˆDebounceï¼‰</strong></td>
</tr>
<tr>
<td>æ»šåŠ¨ <code>scroll</code> äº‹ä»¶</td>
<td><strong>èŠ‚æµï¼ˆThrottleï¼‰</strong></td>
</tr>
<tr>
<td>é¼ æ ‡ <code>mousemove</code></td>
<td><strong>èŠ‚æµï¼ˆThrottleï¼‰</strong></td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/12/js-debounce-throttle/" data-id="cm7bdn3hd000klipyebey7i3r" data-title="JavaScript é˜²æŠ–ï¼ˆDebounceï¼‰å’ŒèŠ‚æµï¼ˆThrottleï¼‰" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-js-iterator-generator" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/12/js-iterator-generator/" class="article-date">
  <time class="dt-published" datetime="2025-02-12T12:11:17.000Z" itemprop="datePublished">2025-02-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/12/js-iterator-generator/">JavaScriptä¸­çš„è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ JavaScript ä¸­ï¼Œ<strong>è¿­ä»£å™¨ï¼ˆIteratorï¼‰</strong> å’Œ <strong>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰</strong> æ˜¯ç”¨äº <strong>éå†æ•°æ®ç»“æ„</strong> å’Œ <strong>å®ç°æƒ°æ€§è®¡ç®—</strong> çš„å¼ºå¤§å·¥å…·ã€‚å®ƒä»¬ä¸ <code>for...of</code>ã€<code>Symbol.iterator</code> ä»¥åŠ <code>yield</code> å…³é”®å­—å¯†åˆ‡ç›¸å…³ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´é«˜æ•ˆåœ°å¤„ç† <strong>æµæ•°æ®</strong>ã€<strong>è‡ªå®šä¹‰éå†</strong> å’Œ <strong>å¼‚æ­¥ä»»åŠ¡</strong>ã€‚  </p>
<hr>
<h2 id="1-è¿­ä»£å™¨ï¼ˆIteratorï¼‰"><a href="#1-è¿­ä»£å™¨ï¼ˆIteratorï¼‰" class="headerlink" title="1. è¿­ä»£å™¨ï¼ˆIteratorï¼‰"></a><strong>1. è¿­ä»£å™¨ï¼ˆIteratorï¼‰</strong></h2><h3 id="1-1-ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ"></a><strong>1.1 ä»€ä¹ˆæ˜¯è¿­ä»£å™¨ï¼Ÿ</strong></h3><p>è¿­ä»£å™¨ï¼ˆIteratorï¼‰æ˜¯ä¸€ç§ <strong>æŒ‰é¡ºåºè®¿é—®é›†åˆå…ƒç´ </strong> çš„æ–¹å¼ï¼Œä½†ä¸æš´éœ²å…¶åº•å±‚å®ç°ã€‚å®ƒæä¾›äº†ä¸€ä¸ª <code>next()</code> æ–¹æ³•ï¼Œæ¯æ¬¡è°ƒç”¨ <code>next()</code> éƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼š</p>
<ul>
<li><code>&#123; value: æ•°æ®, done: false &#125;</code> â€”â€” <strong>è¡¨ç¤ºå½“å‰å€¼å’Œæœªå®Œæˆçš„çŠ¶æ€</strong></li>
<li><code>&#123; value: undefined, done: true &#125;</code> â€”â€” <strong>è¡¨ç¤ºè¿­ä»£ç»“æŸ</strong></li>
</ul>
<h3 id="1-2-è¿­ä»£å™¨çš„åŸºæœ¬å®ç°"><a href="#1-2-è¿­ä»£å™¨çš„åŸºæœ¬å®ç°" class="headerlink" title="1.2 è¿­ä»£å™¨çš„åŸºæœ¬å®ç°"></a><strong>1.2 è¿­ä»£å™¨çš„åŸºæœ¬å®ç°</strong></h3><p>è¿­ä»£å™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>å®ç°äº† <code>next()</code> æ–¹æ³•çš„å¯¹è±¡</strong>ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createIterator</span>(<span class="params">array</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">next</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (index &lt; array.<span class="property">length</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123; <span class="attr">value</span>: array[index++], <span class="attr">done</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨è¿­ä»£å™¨</span></span><br><span class="line"><span class="keyword">const</span> iterator = <span class="title function_">createIterator</span>([<span class="string">&#x27;apple&#x27;</span>, <span class="string">&#x27;banana&#x27;</span>, <span class="string">&#x27;cherry&#x27;</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;apple&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;banana&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;cherry&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iterator.<span class="title function_">next</span>()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li>è¿­ä»£å™¨ä¸ä¼šè‡ªåŠ¨è¿­ä»£ï¼Œè€Œæ˜¯éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>next()</code>ã€‚</li>
<li>éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ <code>index</code> å˜é‡ã€‚</li>
</ul>
<hr>
<h3 id="1-3-Symbol-iterator-å’Œå¯è¿­ä»£å¯¹è±¡"><a href="#1-3-Symbol-iterator-å’Œå¯è¿­ä»£å¯¹è±¡" class="headerlink" title="1.3 Symbol.iterator å’Œå¯è¿­ä»£å¯¹è±¡"></a><strong>1.3 <code>Symbol.iterator</code> å’Œå¯è¿­ä»£å¯¹è±¡</strong></h3><p>å¦‚æœå¯¹è±¡ <strong>å®ç°äº† <code>Symbol.iterator</code> æ–¹æ³•</strong>ï¼Œå®ƒå°±æ˜¯ <strong>å¯è¿­ä»£å¯¹è±¡ï¼ˆIterableï¼‰</strong>ï¼Œå¯ä»¥è¢« <code>for...of</code>ã€<code>Array.from()</code> è¿™æ ·çš„è¿­ä»£æ–¹æ³•ä½¿ç”¨ã€‚</p>
<h4 id="1-3-1-è‡ªå®šä¹‰å¯è¿­ä»£å¯¹è±¡"><a href="#1-3-1-è‡ªå®šä¹‰å¯è¿­ä»£å¯¹è±¡" class="headerlink" title="1.3.1 è‡ªå®šä¹‰å¯è¿­ä»£å¯¹è±¡"></a><strong>1.3.1 è‡ªå®šä¹‰å¯è¿­ä»£å¯¹è±¡</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> iterable = &#123;</span><br><span class="line">    <span class="attr">data</span>: [<span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;two&#x27;</span>, <span class="string">&#x27;three&#x27;</span>],</span><br><span class="line">    [<span class="title class_">Symbol</span>.<span class="property">iterator</span>]: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">next</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> index &lt; <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">length</span></span><br><span class="line">                    ? &#123; <span class="attr">value</span>: <span class="variable language_">this</span>.<span class="property">data</span>[index++], <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">                    : &#123; <span class="attr">value</span>: <span class="literal">undefined</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡ for...of è¿›è¡Œè¿­ä»£</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(item); <span class="comment">// one, two, three</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„</strong></p>
<ul>
<li><code>Symbol.iterator</code> è¿”å›çš„æ˜¯ä¸€ä¸ª <strong>è¿­ä»£å™¨å¯¹è±¡</strong>ï¼Œè¿™ä¸ªå¯¹è±¡å¿…é¡»å®ç° <code>next()</code> æ–¹æ³•ã€‚</li>
<li><code>for...of</code> ä¼šè‡ªåŠ¨è°ƒç”¨ <code>next()</code>ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ã€‚</li>
</ul>
<hr>
<h3 id="1-4-JavaScript-å†…ç½®å¯è¿­ä»£å¯¹è±¡"><a href="#1-4-JavaScript-å†…ç½®å¯è¿­ä»£å¯¹è±¡" class="headerlink" title="1.4 JavaScript å†…ç½®å¯è¿­ä»£å¯¹è±¡"></a><strong>1.4 JavaScript å†…ç½®å¯è¿­ä»£å¯¹è±¡</strong></h3><p><strong>é»˜è®¤å®ç° <code>Symbol.iterator</code> çš„æ•°æ®ç»“æ„</strong></p>
<ul>
<li><strong>æ•°ç»„ï¼ˆArrayï¼‰</strong></li>
<li><strong>å­—ç¬¦ä¸²ï¼ˆStringï¼‰</strong></li>
<li><strong>Map å’Œ Set</strong></li>
<li><strong>TypedArray</strong></li>
<li><strong>å‡½æ•°å‚æ•°å¯¹è±¡ï¼ˆargumentsï¼‰</strong></li>
<li><strong>NodeListï¼ˆéƒ¨åˆ†æµè§ˆå™¨å®ç°ï¼‰</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> str = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> iter = str[<span class="title class_">Symbol</span>.<span class="property">iterator</span>]();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iter.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;H&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(iter.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;e&#x27;, done: false &#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰"><a href="#2-ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰" class="headerlink" title="2. ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰"></a><strong>2. ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰</strong></h2><h3 id="2-1-ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨ï¼Ÿ"><a href="#2-1-ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨ï¼Ÿ" class="headerlink" title="2.1 ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨ï¼Ÿ"></a><strong>2.1 ä»€ä¹ˆæ˜¯ç”Ÿæˆå™¨ï¼Ÿ</strong></h3><p>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œå®ƒå¯ä»¥ <strong>æš‚åœå’Œæ¢å¤æ‰§è¡Œ</strong>ï¼Œä½¿ç”¨ <code>function*</code> å…³é”®å­—å®šä¹‰ï¼Œå¹¶é€šè¿‡ <code>yield</code> å…³é”®å­—è¿”å›å¤šä¸ªå€¼ã€‚</p>
<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li><strong>è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªè¿­ä»£å™¨</strong>ã€‚</li>
<li><strong>è°ƒç”¨ <code>next()</code> æ—¶ï¼Œæ‰§è¡Œåˆ° <code>yield</code> è¯­å¥å¹¶æš‚åœ</strong>ï¼Œä¸‹æ¬¡è°ƒç”¨æ—¶ä»æš‚åœçš„åœ°æ–¹ç»§ç»­ã€‚</li>
<li><strong><code>yield</code> è¿”å›çš„æ˜¯ä¸€ä¸ªå€¼ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡</strong>ã€‚</li>
</ul>
<h3 id="2-2-ç”Ÿæˆå™¨çš„åŸºæœ¬ä½¿ç”¨"><a href="#2-2-ç”Ÿæˆå™¨çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.2 ç”Ÿæˆå™¨çš„åŸºæœ¬ä½¿ç”¨"></a><strong>2.2 ç”Ÿæˆå™¨çš„åŸºæœ¬ä½¿ç”¨</strong></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">myGenerator</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;A&#x27;</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;B&#x27;</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;C&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = <span class="title function_">myGenerator</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;A&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;B&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>()); <span class="comment">// &#123; value: &#x27;C&#x27;, done: false &#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>()); <span class="comment">// &#123; value: undefined, done: true &#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç‰¹ç‚¹</strong></p>
<ul>
<li><code>yield</code> ä½¿å‡½æ•°æš‚åœæ‰§è¡Œï¼Œä¸‹æ¬¡ <code>next()</code> ç»§ç»­æ‰§è¡Œã€‚</li>
<li>ç”Ÿæˆå™¨è¿”å›çš„æ˜¯ä¸€ä¸ª <strong>è¿­ä»£å™¨å¯¹è±¡</strong>ã€‚</li>
</ul>
<hr>
<h3 id="2-3-for-of-éå†ç”Ÿæˆå™¨"><a href="#2-3-for-of-éå†ç”Ÿæˆå™¨" class="headerlink" title="2.3 for...of éå†ç”Ÿæˆå™¨"></a><strong>2.3 <code>for...of</code> éå†ç”Ÿæˆå™¨</strong></h3><p>ç”Ÿæˆå™¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼Œå¯ä»¥ç”¨ <code>for...of</code> éå†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">countUp</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> <span class="title function_">countUp</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// 1, 2, 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li><code>for...of</code> <strong>è‡ªåŠ¨å¤„ç† <code>done</code> çŠ¶æ€</strong>ï¼Œä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>next()</code>ã€‚</li>
</ul>
<hr>
<h3 id="2-4-ç”Ÿæˆå™¨çš„åº”ç”¨"><a href="#2-4-ç”Ÿæˆå™¨çš„åº”ç”¨" class="headerlink" title="2.4 ç”Ÿæˆå™¨çš„åº”ç”¨"></a><strong>2.4 ç”Ÿæˆå™¨çš„åº”ç”¨</strong></h3><h4 id="2-4-1-ç”Ÿæˆæ— é™åºåˆ—"><a href="#2-4-1-ç”Ÿæˆæ— é™åºåˆ—" class="headerlink" title="2.4.1 ç”Ÿæˆæ— é™åºåˆ—"></a><strong>2.4.1 ç”Ÿæˆæ— é™åºåˆ—</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">infiniteNumbers</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> num = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">yield</span> num++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> infiniteGen = <span class="title function_">infiniteNumbers</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(infiniteGen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(infiniteGen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(infiniteGen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p><strong>é€‚ç”¨åœºæ™¯</strong></p>
<ul>
<li>ç”Ÿæˆ <strong>æ— é™åºåˆ—</strong>ï¼ˆå¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰ã€‚</li>
<li>æŒ‰éœ€ç”Ÿæˆæ•°æ®ï¼ŒèŠ‚çœå†…å­˜ã€‚</li>
</ul>
<h4 id="2-4-2-æ–æ³¢é‚£å¥‘æ•°åˆ—"><a href="#2-4-2-æ–æ³¢é‚£å¥‘æ•°åˆ—" class="headerlink" title="2.4.2 æ–æ³¢é‚£å¥‘æ•°åˆ—"></a><strong>2.4.2 æ–æ³¢é‚£å¥‘æ•°åˆ—</strong></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">fibonacci</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> [prev, curr] = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">yield</span> curr;</span><br><span class="line">        [prev, curr] = [curr, prev + curr];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fib = <span class="title function_">fibonacci</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fib.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fib.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fib.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fib.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="3-è¿­ä»£å™¨-vs-ç”Ÿæˆå™¨"><a href="#3-è¿­ä»£å™¨-vs-ç”Ÿæˆå™¨" class="headerlink" title="3. è¿­ä»£å™¨ vs ç”Ÿæˆå™¨"></a><strong>3. è¿­ä»£å™¨ vs ç”Ÿæˆå™¨</strong></h2><table>
<thead>
<tr>
<th><strong>ç‰¹ç‚¹</strong></th>
<th><strong>è¿­ä»£å™¨ï¼ˆIteratorï¼‰</strong></th>
<th><strong>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>å®šä¹‰æ–¹å¼</strong></td>
<td>æ‰‹åŠ¨å®ç° <code>next()</code></td>
<td>ä½¿ç”¨ <code>function*</code></td>
</tr>
<tr>
<td><strong>çŠ¶æ€ç»´æŠ¤</strong></td>
<td>éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ç´¢å¼•</td>
<td><code>yield</code> è‡ªåŠ¨ç®¡ç†çŠ¶æ€</td>
</tr>
<tr>
<td><strong>æƒ°æ€§è®¡ç®—</strong></td>
<td>éœ€è¦æ‰‹åŠ¨æ§åˆ¶</td>
<td>é»˜è®¤æ”¯æŒ</td>
</tr>
<tr>
<td><strong>ä»£ç ç®€æ´åº¦</strong></td>
<td>ä»£ç è¾ƒç¹ç</td>
<td>ä»£ç æ›´ç®€æ´</td>
</tr>
</tbody></table>
<hr>
<h2 id="4-ç»“è®º"><a href="#4-ç»“è®º" class="headerlink" title="4. ç»“è®º"></a><strong>4. ç»“è®º</strong></h2><ul>
<li><strong>è¿­ä»£å™¨é€‚ç”¨äº</strong> è‡ªå®šä¹‰éå†é€»è¾‘ï¼Œéœ€è¦æ‰‹åŠ¨ç»´æŠ¤ <code>next()</code> ã€‚</li>
<li><strong>ç”Ÿæˆå™¨é€‚ç”¨äº</strong> æƒ°æ€§è®¡ç®—ã€æ•°æ®æµå¤„ç†ï¼Œä»£ç æ›´ç®€æ´ã€‚</li>
<li><strong><code>Symbol.iterator</code> ä½¿å¯¹è±¡å¯è¿­ä»£</strong>ï¼Œç»“åˆ <code>for...of</code> æä¾›æ›´ä¼˜é›…çš„éå†æ–¹å¼ã€‚</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/12/js-iterator-generator/" data-id="cm7bdn3hi000rlipyfi6e6mzx" data-title="JavaScriptä¸­çš„è¿­ä»£å™¨å’Œç”Ÿæˆå™¨" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-js-object" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/11/js-object/" class="article-date">
  <time class="dt-published" datetime="2025-02-11T18:55:59.000Z" itemprop="datePublished">2025-02-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/11/js-object/">JavaScriptä¸­çš„å¯¹è±¡</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-è¯­æ³•"><a href="#1-è¯­æ³•" class="headerlink" title="1. è¯­æ³•"></a>1. è¯­æ³•</h2><p>JavaScript ä¸­çš„å¯¹è±¡å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼å®šä¹‰ï¼šå£°æ˜å½¢å¼å’Œæ„é€ å½¢å¼ã€‚</p>
<p><strong>å£°æ˜å½¢å¼ï¼š</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObj = &#123;</span><br><span class="line">  <span class="attr">key</span>: value</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>æ„é€ å½¢å¼ï¼š</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObj = <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">myObj.<span class="property">key</span> = value;</span><br></pre></td></tr></table></figure>

<h2 id="2-ç±»å‹"><a href="#2-ç±»å‹" class="headerlink" title="2. ç±»å‹"></a>2. ç±»å‹</h2><p>JavaScript ä¸­çš„ä¸»è¦æ•°æ®ç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>string</code></li>
<li><code>number</code></li>
<li><code>boolean</code></li>
<li><code>null</code></li>
<li><code>undefined</code></li>
<li><code>object</code></li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li><strong>åŸºæœ¬ç±»å‹</strong>ï¼ˆstringã€numberã€booleanã€nullã€undefinedï¼‰æœ¬èº«ä¸æ˜¯å¯¹è±¡ã€‚</li>
<li><code>null</code> ä¸æ˜¯å¯¹è±¡ï¼Œä½† <code>typeof null</code> è¿”å› â€œobjectâ€ï¼Œè¿™æ˜¯ JavaScript çš„å†å²é—ç•™ bugã€‚</li>
<li>JavaScript ä¸­è¿˜æœ‰è®¸å¤šç‰¹æ®Šçš„å¯¹è±¡å­ç±»å‹ï¼Œå¯ä»¥ç§°ä¸º<strong>å¤æ‚åŸºæœ¬ç±»å‹</strong>ã€‚</li>
</ul>
<h3 id="å†…ç½®å¯¹è±¡"><a href="#å†…ç½®å¯¹è±¡" class="headerlink" title="å†…ç½®å¯¹è±¡"></a>å†…ç½®å¯¹è±¡</h3><p>JavaScript æä¾›äº†ä¸€äº›å†…ç½®å¯¹è±¡ï¼Œå®ƒä»¬ç±»ä¼¼äºå…¶ä»–è¯­è¨€ä¸­çš„ç±»ï¼ˆclassï¼‰ï¼Œä½†å®é™…ä¸Šåªæ˜¯æ„é€ å‡½æ•°ï¼š</p>
<ul>
<li><code>String</code></li>
<li><code>Number</code></li>
<li><code>Boolean</code></li>
<li><code>Object</code></li>
<li><code>Function</code></li>
<li><code>Array</code></li>
<li><code>Date</code></li>
<li><code>RegExp</code></li>
<li><code>Error</code></li>
</ul>
<h2 id="3-å¯¹è±¡çš„å†…å®¹"><a href="#3-å¯¹è±¡çš„å†…å®¹" class="headerlink" title="3. å¯¹è±¡çš„å†…å®¹"></a>3. å¯¹è±¡çš„å†…å®¹</h2><p>å¯¹è±¡ç”±<strong>å±æ€§</strong>ç»„æˆï¼Œæ¯ä¸ªå±æ€§éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œé”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myObject.<span class="property">a</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myObject[<span class="string">&quot;a&quot;</span>]); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>.</code> è®¿é—®æ–¹å¼ç§°ä¸º<strong>å±æ€§è®¿é—®</strong>ã€‚</li>
<li><code>[]</code> è®¿é—®æ–¹å¼ç§°ä¸º<strong>é”®è®¿é—®</strong>ã€‚</li>
</ul>
<h3 id="3-1-å¯è®¡ç®—å±æ€§å"><a href="#3-1-å¯è®¡ç®—å±æ€§å" class="headerlink" title="3.1 å¯è®¡ç®—å±æ€§å"></a>3.1 å¯è®¡ç®—å±æ€§å</h3><p>ES6 å…è®¸åœ¨å¯¹è±¡å­—é¢é‡ä¸­ä½¿ç”¨è®¡ç®—å±æ€§åã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> key = <span class="string">&quot;name&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  [key]: <span class="string">&quot;John&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myObject.<span class="property">name</span>); <span class="comment">// &quot;John&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-å±æ€§ä¸æ–¹æ³•"><a href="#3-2-å±æ€§ä¸æ–¹æ³•" class="headerlink" title="3.2 å±æ€§ä¸æ–¹æ³•"></a>3.2 å±æ€§ä¸æ–¹æ³•</h3><p>å¯¹è±¡çš„å±æ€§å¯ä»¥å­˜å‚¨å‡½æ•°ï¼Œä½†å‡½æ•°æœ¬èº«ä»ç„¶åªæ˜¯ä¸€ä¸ªå€¼ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  <span class="attr">greet</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Hello!&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myObject.<span class="title function_">greet</span>()); <span class="comment">// &quot;Hello!&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-æ•°ç»„"><a href="#3-3-æ•°ç»„" class="headerlink" title="3.3 æ•°ç»„"></a>3.3 æ•°ç»„</h3><p>æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼Œè™½ç„¶ç´¢å¼•é€šå¸¸æ˜¯æ•´æ•°ï¼Œä½†ä»ç„¶å¯ä»¥æ·»åŠ è‡ªå®šä¹‰å±æ€§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">arr.<span class="property">customProperty</span> = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">length</span>); <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr.<span class="property">customProperty</span>); <span class="comment">// &quot;Hello&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong><br>å¦‚æœå‘æ•°ç»„æ·»åŠ ä¸€ä¸ªçœ‹èµ·æ¥åƒæ•°å­—çš„å±æ€§ï¼Œå®ƒä¼šè¢«è½¬æ¢ä¸ºæ•°å€¼ä¸‹æ ‡ï¼Œè€Œä¸æ˜¯æ™®é€šå±æ€§ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [];</span><br><span class="line">arr[<span class="string">&quot;2&quot;</span>] = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr[<span class="number">2</span>]); <span class="comment">// &quot;hello&quot; (å˜æˆäº†æ•°ç»„ç´¢å¼•)</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-å¤åˆ¶å¯¹è±¡"><a href="#3-4-å¤åˆ¶å¯¹è±¡" class="headerlink" title="3.4 å¤åˆ¶å¯¹è±¡"></a>3.4 å¤åˆ¶å¯¹è±¡</h3><p>å¯¹è±¡çš„å¤åˆ¶å¯ä»¥åˆ†ä¸º<strong>æµ…å¤åˆ¶</strong>å’Œ<strong>æ·±å¤åˆ¶</strong>ã€‚</p>
<h4 id="æµ…å¤åˆ¶"><a href="#æµ…å¤åˆ¶" class="headerlink" title="æµ…å¤åˆ¶"></a><strong>æµ…å¤åˆ¶</strong></h4><p>æµ…å¤åˆ¶åªå¤åˆ¶å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼ŒåµŒå¥—å¯¹è±¡ä»ç„¶å…±äº«å¼•ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, obj1);</span><br><span class="line"></span><br><span class="line">obj2.<span class="property">b</span>.<span class="property">c</span> = <span class="number">42</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">b</span>.<span class="property">c</span>); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure>

<h4 id="æ·±å¤åˆ¶"><a href="#æ·±å¤åˆ¶" class="headerlink" title="æ·±å¤åˆ¶"></a><strong>æ·±å¤åˆ¶</strong></h4><p>æ·±å¤åˆ¶åˆ›å»ºå¯¹è±¡çš„å®Œå…¨ç‹¬ç«‹å‰¯æœ¬ã€‚</p>
<p><strong>æ–¹æ³• 1ï¼šä½¿ç”¨ JSON</strong>ï¼ˆä¸é€‚ç”¨äºåŒ…å«å‡½æ•°çš„å¯¹è±¡ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(obj1));</span><br><span class="line"></span><br><span class="line">obj2.<span class="property">b</span>.<span class="property">c</span> = <span class="number">42</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">b</span>.<span class="property">c</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p><strong>æ–¹æ³• 2ï¼šä½¿ç”¨é€’å½’æ‰‹åŠ¨å¤åˆ¶</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">deepClone</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj !== <span class="string">&quot;object&quot;</span> || obj === <span class="literal">null</span>) <span class="keyword">return</span> obj;</span><br><span class="line">  <span class="keyword">let</span> newObj = <span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj) ? [] : &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(key)) &#123;</span><br><span class="line">      newObj[key] = <span class="title function_">deepClone</span>(obj[key]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**æ–¹æ³• 3ï¼šä½¿ç”¨ <code>structuredClone</code>**ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: &#123; <span class="attr">c</span>: <span class="number">2</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = <span class="title function_">structuredClone</span>(obj1);</span><br><span class="line"></span><br><span class="line">obj2.<span class="property">b</span>.<span class="property">c</span> = <span class="number">42</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">b</span>.<span class="property">c</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<h3 id="3-5-å±æ€§æè¿°ç¬¦"><a href="#3-5-å±æ€§æè¿°ç¬¦" class="headerlink" title="3.5 å±æ€§æè¿°ç¬¦"></a>3.5 å±æ€§æè¿°ç¬¦</h3><p>JavaScript å…è®¸é€šè¿‡ <code>Object.defineProperty</code> æ§åˆ¶å¯¹è±¡çš„å±æ€§è¡Œä¸ºã€‚</p>
<ul>
<li><strong>Writable</strong>ï¼šå±æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚</li>
<li><strong>Configurable</strong>ï¼šå±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤æˆ–é‡æ–°å®šä¹‰ã€‚</li>
<li><strong>Enumerable</strong>ï¼šå±æ€§æ˜¯å¦å¯è¢«æšä¸¾ï¼ˆéå†ï¼‰ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, <span class="string">&quot;a&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">42</span>,</span><br><span class="line">  <span class="attr">writable</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">configurable</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">enumerable</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">a</span>); <span class="comment">// 42</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-ä¸å˜æ€§"><a href="#3-6-ä¸å˜æ€§" class="headerlink" title="3.6 ä¸å˜æ€§"></a>3.6 ä¸å˜æ€§</h3><p>JavaScript æä¾›äº†ä¸åŒçº§åˆ«çš„å¯¹è±¡ä¸å˜æ€§ï¼š</p>
<ul>
<li><strong>å¯¹è±¡å¸¸é‡</strong>ï¼šä½¿ç”¨ <code>const</code> å˜é‡åä¸èƒ½å˜ï¼Œä½†å¯¹è±¡å†…å®¹å¯å˜ã€‚</li>
<li><strong>ç¦æ­¢æ‰©å±•</strong>ï¼š<code>Object.preventExtensions(obj)</code> é˜»æ­¢æ–°å¢å±æ€§ã€‚</li>
<li><strong>å¯†å°</strong>ï¼š<code>Object.seal(obj)</code> ä½¿å¯¹è±¡ä¸å¯æ‰©å±•ï¼Œä¸”ç°æœ‰å±æ€§ä¸å¯åˆ é™¤ã€‚</li>
<li><strong>å†»ç»“</strong>ï¼š<code>Object.freeze(obj)</code> ä½¿å¯¹è±¡ä¸å¯æ‰©å±•ï¼Œå±æ€§ä¸å¯ä¿®æ”¹æˆ–åˆ é™¤ã€‚</li>
</ul>
<h3 id="3-7-Getter-å’Œ-Setter"><a href="#3-7-Getter-å’Œ-Setter" class="headerlink" title="3.7 Getter å’Œ Setter"></a>3.7 Getter å’Œ Setter</h3><p>å¯¹è±¡é»˜è®¤çš„<code>[[Put]]</code>å’Œ<code>[[Get]]</code>æ“ä½œåˆ†åˆ«å¯ä»¥æ§åˆ¶å±æ€§å€¼çš„è®¾ç½®å’Œè·å–ã€‚<br>åœ¨ES5ä¸­å¯ä»¥ä½¿ç”¨<code>getter</code>å’Œ<code>setter</code>éƒ¨åˆ†æ”¹å†™é»˜è®¤æ“ä½œï¼Œä½†æ˜¯åªèƒ½åº”ç”¨åœ¨å•ä¸ªå±æ€§ä¸Šï¼Œæ— æ³•åº”ç”¨åœ¨æ•´ä¸ªå¯¹è±¡ä¸Š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">_name</span>: <span class="string">&quot;John&quot;</span>,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">name</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_name</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">_name</span> = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">// &quot;John&quot;</span></span><br><span class="line">obj.<span class="property">name</span> = <span class="string">&quot;Doe&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">name</span>); <span class="comment">// &quot;Doe&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-8-å­˜åœ¨æ€§"><a href="#3-8-å­˜åœ¨æ€§" class="headerlink" title="3.8 å­˜åœ¨æ€§"></a>3.8 å­˜åœ¨æ€§</h3><p>æ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰æŸä¸ªå±æ€§ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a&quot;</span> <span class="keyword">in</span> obj); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;a&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">a</span> !== <span class="literal">undefined</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="4-éå†"><a href="#4-éå†" class="headerlink" title="4. éå†"></a>4. éå†</h2><p><code>for..in</code>å¾ªç¯å¯ä»¥ç”¨æ¥éå†å¯¹è±¡çš„å¯æšä¸¾å±æ€§åˆ—è¡¨<br>åªæœ‰å±æ€§æ˜¯å¯æšä¸¾çš„<code>enumerable:true</code>ï¼Œæ‰ä¼šå‡ºç°åœ¨<code>for..in</code>åˆ—è¡¨ä¸­<br>æ•°ç»„ä¸Šåº”ç”¨<code>for..in</code>å¾ªç¯ä¼šäº§ç”Ÿå‡ºäººæ„æ–™çš„ç»“æœï¼Œå› ä¸ºè¿™ç§ç¾å‰§ä¸ä»…ä¼šåŒ…å«æ‰€æœ‰æ•°å€¼ç´¢å¼•ï¼Œè¿˜ä¼šåŒ…å«æ‰€æœ‰å¯æšä¸¾ç´¢å¼•ã€‚æœ€å¥½åªåœ¨å¯¹è±¡ä¸Šåº”ç”¨<code>for..in</code>å¾ªç¯</p>
<p>å¦‚æœéå†å±æ€§çš„å€¼å‘¢ï¼Ÿ<br>ES6å¢åŠ äº†ä¸€ç§ç”¨æ¥éå†æ•°ç»„çš„<code>for..of</code>è¯­æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> v <span class="keyword">of</span> myArray) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(v);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p><code>for..of</code>å¾ªç¯é¦–å…ˆä¼šå‘è¢«è®¿é—®å¯¹è±¡è¯·æ±‚ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œç„¶åé€šè¿‡è°ƒç”¨è¿­ä»£å™¨å¯¹è±¡çš„<code>next()</code>æ–¹æ³•æ¥éå†æ‰€æœ‰è¿”å›å€¼<br>æ•°ç»„æœ‰å†…ç½®çš„<code>@@iterator</code>ï¼Œå› æ­¤<code>for..of</code>å¯ä»¥ç›´æ¥åº”ç”¨åœ¨æ•°ç»„ä¸Šã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/11/js-object/" data-id="cm7bdn3hl0012lipydso1a3fx" data-title="JavaScriptä¸­çš„å¯¹è±¡" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-js-this" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/11/js-this/" class="article-date">
  <time class="dt-published" datetime="2025-02-11T16:50:57.000Z" itemprop="datePublished">2025-02-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/11/js-this/">JavaScript ä¸­çš„ this</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>JavaScript ä¸­çš„ <code>this</code> æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œå®ƒçš„å€¼å–å†³äº<strong>å‡½æ•°çš„è°ƒç”¨æ–¹å¼</strong>ï¼Œè€Œä¸æ˜¯å®ƒçš„å®šä¹‰æ–¹å¼ã€‚è®¸å¤šå¼€å‘è€…å¯¹ <code>this</code> å­˜åœ¨è¯¯è§£ï¼Œå°¤å…¶æ˜¯åœ¨ä¸åŒçš„è°ƒç”¨åœºæ™¯ä¸‹å®ƒçš„æŒ‡å‘å¯èƒ½ä¼šå˜åŒ–ã€‚</p>
<hr>
<h2 id="ğŸŒŸ-å…³äº-this-çš„å¸¸è§è¯¯è§£"><a href="#ğŸŒŸ-å…³äº-this-çš„å¸¸è§è¯¯è§£" class="headerlink" title="ğŸŒŸ å…³äº this çš„å¸¸è§è¯¯è§£"></a>ğŸŒŸ <strong>å…³äº <code>this</code> çš„å¸¸è§è¯¯è§£</strong></h2><ol>
<li><p><strong>â€œ<code>this</code> æŒ‡å‘å‡½æ•°çš„ä½œç”¨åŸŸâ€</strong> âŒ<br>â†’ <strong>å®é™…ä¸Š</strong> <code>this</code> å¹¶ä¸æŒ‡å‘è¯æ³•ä½œç”¨åŸŸï¼Œè€Œæ˜¯å–å†³äº<strong>è°ƒç”¨æ–¹å¼</strong>ã€‚</p>
</li>
<li><p><strong>â€œ<code>this</code> æ€»æ˜¯æŒ‡å‘è°ƒç”¨å®ƒçš„å¯¹è±¡â€</strong> âŒ<br>â†’ <strong>ä¸å®Œå…¨æ­£ç¡®</strong>ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ã€ç‹¬ç«‹å‡½æ•°è°ƒç”¨ç­‰æƒ…å†µä¸‹ï¼Œå®ƒå¯èƒ½æ˜¯ <code>undefined</code> æˆ– <code>window</code>ï¼ˆæµè§ˆå™¨ï¼‰&#x2F;<code>global</code>ï¼ˆNode.jsï¼‰ã€‚</p>
</li>
<li><p><strong>â€œç®­å¤´å‡½æ•°çš„ <code>this</code> å’Œæ™®é€šå‡½æ•°ä¸€æ ·â€</strong> âŒ<br>â†’ <strong>é”™è¯¯</strong>ï¼Œç®­å¤´å‡½æ•°çš„ <code>this</code> ç»‘å®šåˆ°<strong>å®šä¹‰æ—¶çš„è¯æ³•ä½œç”¨åŸŸ</strong>ï¼Œä¸ä¼šå› ä¸ºè°ƒç”¨æ–¹å¼è€Œæ”¹å˜ã€‚</p>
</li>
</ol>
<hr>
<h2 id="ğŸ¯-this-çš„ä¸åŒç»‘å®šè§„åˆ™"><a href="#ğŸ¯-this-çš„ä¸åŒç»‘å®šè§„åˆ™" class="headerlink" title="ğŸ¯ this çš„ä¸åŒç»‘å®šè§„åˆ™"></a>ğŸ¯ <strong><code>this</code> çš„ä¸åŒç»‘å®šè§„åˆ™</strong></h2><h3 id="1ï¸âƒ£-é»˜è®¤ç»‘å®šï¼ˆéä¸¥æ ¼æ¨¡å¼-vs-ä¸¥æ ¼æ¨¡å¼ï¼‰"><a href="#1ï¸âƒ£-é»˜è®¤ç»‘å®šï¼ˆéä¸¥æ ¼æ¨¡å¼-vs-ä¸¥æ ¼æ¨¡å¼ï¼‰" class="headerlink" title="1ï¸âƒ£ é»˜è®¤ç»‘å®šï¼ˆéä¸¥æ ¼æ¨¡å¼ vs ä¸¥æ ¼æ¨¡å¼ï¼‰"></a>1ï¸âƒ£ <strong>é»˜è®¤ç»‘å®šï¼ˆéä¸¥æ ¼æ¨¡å¼ vs ä¸¥æ ¼æ¨¡å¼ï¼‰</strong></h3><p><strong>ç‹¬ç«‹è°ƒç”¨æ—¶</strong>ï¼ˆä¸é€šè¿‡å¯¹è±¡è°ƒç”¨ï¼‰ï¼š  </p>
<ul>
<li><strong>éä¸¥æ ¼æ¨¡å¼</strong>ï¼š<code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨æ˜¯ <code>window</code>ï¼ŒNode.js æ˜¯ <code>global</code>ï¼‰ã€‚</li>
<li><strong>ä¸¥æ ¼æ¨¡å¼</strong>ï¼š<code>this</code> ä¸º <code>undefined</code>ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// éä¸¥æ ¼æ¨¡å¼ä¸‹: window / global</span></span><br><span class="line">       <span class="comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹: undefined</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="2ï¸âƒ£-éšå¼ç»‘å®š"><a href="#2ï¸âƒ£-éšå¼ç»‘å®š" class="headerlink" title="2ï¸âƒ£ éšå¼ç»‘å®š"></a>2ï¸âƒ£ <strong>éšå¼ç»‘å®š</strong></h3><p>å¦‚æœå‡½æ•°ä½œä¸º<strong>å¯¹è±¡çš„æ–¹æ³•</strong>è°ƒç”¨ï¼Œ<code>this</code> ç»‘å®šåˆ°è¯¥å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;JavaScript&quot;</span>,</span><br><span class="line">  <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.<span class="title function_">showName</span>(); <span class="comment">// &quot;JavaScript&quot;</span></span><br></pre></td></tr></table></figure>

<p>ğŸš¨ <strong>éšå¼ä¸¢å¤±</strong>ï¼ˆå¸¸è§é—®é¢˜ï¼‰ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = obj.<span class="property">showName</span>;</span><br><span class="line"><span class="title function_">fn</span>(); <span class="comment">// undefinedï¼ˆé»˜è®¤ç»‘å®šï¼šwindow æˆ– undefinedï¼‰</span></span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œ <code>fn()</code> ç‹¬ç«‹è°ƒç”¨ï¼Œ<code>this</code> å˜ä¸ºé»˜è®¤ç»‘å®šã€‚</p>
<hr>
<h3 id="3ï¸âƒ£-æ˜¾ç¤ºç»‘å®šï¼ˆcall-apply-bindï¼‰"><a href="#3ï¸âƒ£-æ˜¾ç¤ºç»‘å®šï¼ˆcall-apply-bindï¼‰" class="headerlink" title="3ï¸âƒ£ æ˜¾ç¤ºç»‘å®šï¼ˆcall &#x2F; apply &#x2F; bindï¼‰"></a>3ï¸âƒ£ <strong>æ˜¾ç¤ºç»‘å®šï¼ˆcall &#x2F; apply &#x2F; bindï¼‰</strong></h3><ul>
<li><code>call</code> &#x2F; <code>apply</code> ç›´æ¥æ‰§è¡Œå‡½æ•°ï¼Œå¹¶æ˜¾å¼æŒ‡å®š <code>this</code>ã€‚</li>
<li><code>bind</code> è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œç»‘å®š <code>this</code> ä½†ä¸ä¼šç«‹å³æ‰§è¡Œã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">greet.<span class="title function_">call</span>(person);  <span class="comment">// &quot;Alice&quot;</span></span><br><span class="line">greet.<span class="title function_">apply</span>(person); <span class="comment">// &quot;Alice&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> boundGreet = greet.<span class="title function_">bind</span>(person);</span><br><span class="line"><span class="title function_">boundGreet</span>(); <span class="comment">// &quot;Alice&quot;</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="4ï¸âƒ£-new-ç»‘å®š"><a href="#4ï¸âƒ£-new-ç»‘å®š" class="headerlink" title="4ï¸âƒ£ new ç»‘å®š"></a>4ï¸âƒ£ <strong><code>new</code> ç»‘å®š</strong></h3><p>é€šè¿‡ <code>new</code> å…³é”®å­—è°ƒç”¨å‡½æ•°æ—¶ï¼š</p>
<ul>
<li><code>this</code> ç»‘å®šåˆ°<strong>æ–°åˆ›å»ºçš„å¯¹è±¡</strong>ï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡ï¼ˆé™¤éæ‰‹åŠ¨è¿”å›å…¶ä»–å¯¹è±¡ï¼‰ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;John&quot;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p1.<span class="property">name</span>); <span class="comment">// &quot;John&quot;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âš–-ç»‘å®šè§„åˆ™ä¼˜å…ˆçº§"><a href="#âš–-ç»‘å®šè§„åˆ™ä¼˜å…ˆçº§" class="headerlink" title="âš– ç»‘å®šè§„åˆ™ä¼˜å…ˆçº§"></a>âš– <strong>ç»‘å®šè§„åˆ™ä¼˜å…ˆçº§</strong></h2><p>å½“å¤šä¸ªç»‘å®šè§„åˆ™å†²çªæ—¶ï¼ŒæŒ‰ä»¥ä¸‹ä¼˜å…ˆçº§æ‰§è¡Œï¼š</p>
<ol>
<li><strong><code>new</code> ç»‘å®š</strong>ï¼ˆæœ€é«˜ï¼‰</li>
<li><strong><code>call</code> &#x2F; <code>apply</code> &#x2F; <code>bind</code> ç»‘å®š</strong></li>
<li><strong>éšå¼ç»‘å®š</strong></li>
<li><strong>é»˜è®¤ç»‘å®š</strong></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123; <span class="attr">name</span>: <span class="string">&quot;obj1&quot;</span>, foo &#125;;</span><br><span class="line"><span class="keyword">const</span> obj2 = &#123; <span class="attr">name</span>: <span class="string">&quot;obj2&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">obj1.<span class="property">foo</span>.<span class="title function_">call</span>(obj2); <span class="comment">// &quot;obj2&quot;ï¼ˆæ˜¾ç¤ºç»‘å®šä¼˜å…ˆäºéšå¼ç»‘å®šï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> boundFoo = foo.<span class="title function_">bind</span>(obj1);</span><br><span class="line">boundFoo.<span class="title function_">call</span>(obj2); <span class="comment">// &quot;obj1&quot;ï¼ˆbind ç»‘å®šæ— æ³•è¢« call / apply è¦†ç›–ï¼‰</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸš¨-ç»‘å®šä¾‹å¤–"><a href="#ğŸš¨-ç»‘å®šä¾‹å¤–" class="headerlink" title="ğŸš¨ ç»‘å®šä¾‹å¤–"></a>ğŸš¨ <strong>ç»‘å®šä¾‹å¤–</strong></h2><h3 id="ğŸ”¹-ç»‘å®šå¯¹è±¡ä¸º-undefined-æˆ–-null"><a href="#ğŸ”¹-ç»‘å®šå¯¹è±¡ä¸º-undefined-æˆ–-null" class="headerlink" title="ğŸ”¹ ç»‘å®šå¯¹è±¡ä¸º undefined æˆ– null"></a>ğŸ”¹ <strong>ç»‘å®šå¯¹è±¡ä¸º <code>undefined</code> æˆ– <code>null</code></strong></h3><p>åœ¨ <code>call</code>ã€<code>apply</code> æˆ– <code>bind</code> æ–¹æ³•ä¸­ï¼Œå¦‚æœæ˜¾å¼ç»‘å®šçš„å¯¹è±¡æ˜¯ <code>null</code> æˆ– <code>undefined</code>ï¼Œ<strong>é»˜è®¤ä¼šå›é€€åˆ°å…¨å±€å¯¹è±¡</strong>ï¼ˆåœ¨æµè§ˆå™¨ä¸­æ˜¯ <code>window</code>ï¼Œåœ¨ Node.js ä¸­æ˜¯ <code>globalThis</code>ï¼‰ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo.<span class="title function_">call</span>(<span class="literal">null</span>); <span class="comment">// åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼šwindow / globalThis</span></span><br><span class="line">foo.<span class="title function_">call</span>(<span class="literal">undefined</span>); <span class="comment">// åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼šwindow / globalThis</span></span><br></pre></td></tr></table></figure>

<h4 id="ä¸¥æ ¼æ¨¡å¼ä¸‹"><a href="#ä¸¥æ ¼æ¨¡å¼ä¸‹" class="headerlink" title="ä¸¥æ ¼æ¨¡å¼ä¸‹"></a><strong>ä¸¥æ ¼æ¨¡å¼ä¸‹</strong></h4><p>åœ¨ <code>use strict</code> æ¨¡å¼ä¸‹ï¼Œç»‘å®š <code>null</code> æˆ– <code>undefined</code> ä¼šä¿æŒ <code>this</code> ä¸º <code>null</code> æˆ– <code>undefined</code>ï¼Œä¸ä¼šå›é€€åˆ°å…¨å±€å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo.<span class="title function_">call</span>(<span class="literal">null</span>); <span class="comment">// null</span></span><br><span class="line">foo.<span class="title function_">call</span>(<span class="literal">undefined</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ğŸ”¹-é—´æ¥å¼•ç”¨ï¼ˆImplicit-Referenceï¼‰"><a href="#ğŸ”¹-é—´æ¥å¼•ç”¨ï¼ˆImplicit-Referenceï¼‰" class="headerlink" title="ğŸ”¹ é—´æ¥å¼•ç”¨ï¼ˆImplicit Referenceï¼‰"></a>ğŸ”¹ <strong>é—´æ¥å¼•ç”¨ï¼ˆImplicit Referenceï¼‰</strong></h3><p><strong>é—´æ¥å¼•ç”¨</strong>æŒ‡çš„æ˜¯å½“å±æ€§è®¿é—®çš„ç»“æœæ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œ**<code>this</code> ç»‘å®šçš„æ˜¯è¯¥æ–¹æ³•æ‰€å±çš„å¯¹è±¡<strong>ï¼Œä½†</strong>å¦‚æœèµ‹å€¼ç»™ä¸€ä¸ªå˜é‡åè°ƒç”¨ï¼Œ<code>this</code> å¯èƒ½ä¼šä¸¢å¤±**ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;Alice&quot;</span>,</span><br><span class="line">  <span class="title function_">getName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®€ä»‹å¼•ç”¨ï¼š`this` ç»‘å®šåˆ° `obj`</span></span><br><span class="line">obj.<span class="title function_">getName</span>(); <span class="comment">// &quot;Alice&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = obj.<span class="property">getName</span>; <span class="comment">// `fn` èµ‹å€¼åä¸¢å¤± `this` ç»‘å®š</span></span><br><span class="line"><span class="title function_">fn</span>(); <span class="comment">// `this` å˜æˆé»˜è®¤ç»‘å®šï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯ `window`ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹æ˜¯ `undefined`ï¼‰</span></span><br></pre></td></tr></table></figure>

<hr>
<h3 id="ğŸ”¹-è½¯ç»‘å®šï¼ˆSoft-Bindingï¼‰"><a href="#ğŸ”¹-è½¯ç»‘å®šï¼ˆSoft-Bindingï¼‰" class="headerlink" title="ğŸ”¹ è½¯ç»‘å®šï¼ˆSoft Bindingï¼‰"></a>ğŸ”¹ <strong>è½¯ç»‘å®šï¼ˆSoft Bindingï¼‰</strong></h3><p>è½¯ç»‘å®šï¼ˆSoft Bindingï¼‰æ˜¯ä¸€ç§åœ¨ <code>this</code> ç»‘å®šä¸¢å¤±æ—¶<strong>æä¾›é»˜è®¤å¯¹è±¡</strong>çš„æ–¹æ³•ï¼Œé˜²æ­¢ <code>this</code> å˜æˆ <code>undefined</code> æˆ– <code>window</code>ã€‚</p>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<strong>å°è£…ä¸€ä¸ªè‡ªå®šä¹‰ <code>bind</code> æ–¹æ³•</strong>æ¥å®ç°è½¯ç»‘å®šï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">softBind</span>) &#123;</span><br><span class="line">  <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">softBind</span> = <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> fn = <span class="variable language_">this</span>;</span><br><span class="line">    <span class="keyword">const</span> boundArgs = <span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">apply</span>(</span><br><span class="line">        (!<span class="variable language_">this</span> || <span class="variable language_">this</span> === <span class="variable language_">window</span> || <span class="variable language_">this</span> === globalThis) ? obj : <span class="variable language_">this</span>,</span><br><span class="line">        boundArgs.<span class="title function_">concat</span>(<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>.<span class="title function_">call</span>(<span class="variable language_">arguments</span>))</span><br><span class="line">      );</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è½¯ç»‘å®šçš„ä½œç”¨"><a href="#è½¯ç»‘å®šçš„ä½œç”¨" class="headerlink" title="è½¯ç»‘å®šçš„ä½œç”¨"></a><strong>è½¯ç»‘å®šçš„ä½œç”¨</strong></h4><ol>
<li>å¦‚æœ <code>this</code> è¢«é»˜è®¤ç»‘å®šï¼ˆå¦‚ç‹¬ç«‹è°ƒç”¨ï¼‰ï¼Œåˆ™ä½¿ç”¨æä¾›çš„é»˜è®¤å¯¹è±¡ã€‚</li>
<li>å¦‚æœ <code>this</code> æ˜¯ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ï¼Œåˆ™ä¸å½±å“ã€‚</li>
</ol>
<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> defaultObj = &#123; <span class="attr">name</span>: <span class="string">&quot;Default&quot;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> person = &#123; <span class="attr">name</span>: <span class="string">&quot;John&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> boundGreet = greet.<span class="title function_">softBind</span>(defaultObj);</span><br><span class="line"></span><br><span class="line"><span class="title function_">boundGreet</span>(); <span class="comment">// &quot;Default&quot;ï¼ˆå› ä¸º `this` ç»‘å®šä¸¢å¤±ï¼‰</span></span><br><span class="line">boundGreet.<span class="title function_">call</span>(person); <span class="comment">// &quot;John&quot;ï¼ˆå› ä¸º `this` ç»‘å®šåˆ° `person`ï¼‰</span></span><br></pre></td></tr></table></figure>

<h4 id="è½¯ç»‘å®š-vs-bind"><a href="#è½¯ç»‘å®š-vs-bind" class="headerlink" title="è½¯ç»‘å®š vs bind"></a><strong>è½¯ç»‘å®š vs <code>bind</code></strong></h4><ul>
<li><code>bind()</code> ä¼šåˆ›å»ºä¸€ä¸ª<strong>æ°¸ä¹…ç»‘å®š</strong>ï¼Œæ— è®ºæ€ä¹ˆè°ƒç”¨ <code>this</code> éƒ½ä¸ä¼šæ”¹å˜ã€‚</li>
<li>è½¯ç»‘å®š<strong>åªåœ¨ <code>this</code> ç»‘å®šä¸¢å¤±æ—¶</strong>æä¾›é»˜è®¤å€¼ï¼Œä¸ä¼šè¦†ç›–å·²æœ‰ç»‘å®šã€‚</li>
</ul>
<hr>
<h2 id="ğŸ¯-ç®­å¤´å‡½æ•°ä¸­çš„-thisï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰"><a href="#ğŸ¯-ç®­å¤´å‡½æ•°ä¸­çš„-thisï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰" class="headerlink" title="ğŸ¯ ç®­å¤´å‡½æ•°ä¸­çš„ thisï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰"></a>ğŸ¯ <strong>ç®­å¤´å‡½æ•°ä¸­çš„ <code>this</code>ï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰</strong></h2><p>ç®­å¤´å‡½æ•°çš„ <code>this</code> å–å†³äº<strong>å®šä¹‰ä½ç½®</strong>ï¼Œä¸ä¼šå› è°ƒç”¨æ–¹å¼æ”¹å˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">method</span>: <span class="title function_">outer</span>() &#125;;</span><br><span class="line">obj.<span class="title function_">method</span>(); <span class="comment">// outer() çš„ `this` ç»‘å®šäºå®šä¹‰æ—¶çš„ä½œç”¨åŸŸï¼Œè€Œé obj</span></span><br></pre></td></tr></table></figure>

<p>âœ… <strong>å¸¸è§ç”¨é€”</strong>ï¼šé¿å… <code>this</code> ä¸¢å¤±</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Timer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">seconds</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">seconds</span>++;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">seconds</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Timer</span>(); <span class="comment">// `this` ç»‘å®š Timer å®ä¾‹ï¼Œè€Œä¸æ˜¯ `setInterval` å†…éƒ¨</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-æ€»ç»“"><a href="#âœ…-æ€»ç»“" class="headerlink" title="âœ… æ€»ç»“"></a>âœ… <strong>æ€»ç»“</strong></h2><table>
<thead>
<tr>
<th>ç»‘å®šæ–¹å¼</th>
<th><code>this</code> æŒ‡å‘</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é»˜è®¤ç»‘å®š</strong></td>
<td><code>window</code>ï¼ˆéä¸¥æ ¼ï¼‰&#x2F; <code>undefined</code>ï¼ˆä¸¥æ ¼æ¨¡å¼ï¼‰</td>
</tr>
<tr>
<td><strong>éšå¼ç»‘å®š</strong></td>
<td>è°ƒç”¨å®ƒçš„å¯¹è±¡</td>
</tr>
<tr>
<td><strong>æ˜¾ç¤ºç»‘å®š</strong>ï¼ˆ<code>call</code> &#x2F; <code>apply</code> &#x2F; <code>bind</code>ï¼‰</td>
<td>ç»‘å®šçš„å¯¹è±¡</td>
</tr>
<tr>
<td><strong><code>new</code> ç»‘å®š</strong></td>
<td>æ–°åˆ›å»ºçš„å¯¹è±¡</td>
</tr>
<tr>
<td><strong>ç®­å¤´å‡½æ•°</strong></td>
<td>ç»§æ‰¿å¤–éƒ¨ä½œç”¨åŸŸçš„ <code>this</code>ï¼ˆè¯æ³•ç»‘å®šï¼‰</td>
</tr>
</tbody></table>
<p>ğŸ”¹ <strong>ä¼˜å…ˆçº§ï¼š<code>new</code> ç»‘å®š &gt; <code>call</code> &#x2F; <code>apply</code> &#x2F; <code>bind</code> &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š</strong><br>ğŸ”¹ <strong>ç®­å¤´å‡½æ•°ä¸ç»‘å®š <code>this</code>ï¼Œå®ƒç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„ <code>this</code></strong>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/11/js-this/" data-id="cm7bdn3hn001alipy4iykgp01" data-title="JavaScript ä¸­çš„ this" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-js-closure" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/10/js-closure/" class="article-date">
  <time class="dt-published" datetime="2025-02-10T16:26:37.000Z" itemprop="datePublished">2025-02-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/10/js-closure/">JavaScriptä¸­çš„é—­åŒ…</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="é—­åŒ…ï¼ˆClosureï¼‰ç®€ä»‹"><a href="#é—­åŒ…ï¼ˆClosureï¼‰ç®€ä»‹" class="headerlink" title="é—­åŒ…ï¼ˆClosureï¼‰ç®€ä»‹"></a>é—­åŒ…ï¼ˆClosureï¼‰ç®€ä»‹</h3><p>é—­åŒ…ï¼ˆClosureï¼‰æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œå®ƒæŒ‡çš„æ˜¯ä¸€ä¸ªå‡½æ•°å’Œå®ƒçš„è¯æ³•ç¯å¢ƒï¼ˆå³å‡½æ•°å®šä¹‰æ—¶çš„ä½œç”¨åŸŸï¼‰ç»‘å®šåœ¨ä¸€èµ·çš„ç°è±¡ã€‚æ¢å¥è¯è¯´ï¼Œé—­åŒ…ä½¿å¾—ä¸€ä¸ªå‡½æ•°å¯ä»¥è®¿é—®å…¶å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œå³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚</p>
<h3 id="é—­åŒ…çš„å½¢æˆ"><a href="#é—­åŒ…çš„å½¢æˆ" class="headerlink" title="é—­åŒ…çš„å½¢æˆ"></a>é—­åŒ…çš„å½¢æˆ</h3><p>é—­åŒ…çš„å½¢æˆéœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><strong>å‡½æ•°å†…éƒ¨å®šä¹‰äº†å¦ä¸€ä¸ªå‡½æ•°</strong>ã€‚</li>
<li><strong>å†…å±‚å‡½æ•°å¼•ç”¨äº†å¤–å±‚å‡½æ•°çš„å˜é‡</strong>ã€‚</li>
</ol>
<h3 id="é—­åŒ…çš„ç‰¹ç‚¹"><a href="#é—­åŒ…çš„ç‰¹ç‚¹" class="headerlink" title="é—­åŒ…çš„ç‰¹ç‚¹"></a>é—­åŒ…çš„ç‰¹ç‚¹</h3><ul>
<li><strong>è®¿é—®å¤–éƒ¨å˜é‡</strong>ï¼šé—­åŒ…å…è®¸å†…å±‚å‡½æ•°è®¿é—®å¤–å±‚å‡½æ•°çš„å˜é‡ï¼Œå³ä½¿å¤–å±‚å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ã€‚</li>
<li><strong>æŒæœ‰å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨</strong>ï¼šå†…å±‚å‡½æ•°æŒæœ‰å¤–å±‚å‡½æ•°ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œæ‰€ä»¥å³ä½¿å¤–å±‚å‡½æ•°å·²ç»è¿”å›ï¼Œå¤–å±‚å‡½æ•°çš„å˜é‡ä¾ç„¶ä¼šå­˜åœ¨ã€‚</li>
</ul>
<h3 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h3>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;  <span class="comment">// å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">inner</span>(<span class="params"></span>) &#123;  <span class="comment">// è¿”å›ä¸€ä¸ªå†…éƒ¨å‡½æ•°</span></span><br><span class="line">    count++;  <span class="comment">// å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å±€éƒ¨å˜é‡</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(count);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">outer</span>();  <span class="comment">// è°ƒç”¨å¤–éƒ¨å‡½æ•°ï¼Œè¿”å›å†…éƒ¨å‡½æ•°</span></span><br><span class="line"><span class="title function_">counter</span>();  <span class="comment">// è¾“å‡º 1</span></span><br><span class="line"><span class="title function_">counter</span>();  <span class="comment">// è¾“å‡º 2</span></span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>inner</code> å‡½æ•°æ˜¯ <code>outer</code> å‡½æ•°çš„é—­åŒ…ï¼Œå®ƒèƒ½å¤Ÿè®¿é—® <code>outer</code> å‡½æ•°ä¸­çš„ <code>count</code> å˜é‡ã€‚å³ä½¿ <code>outer</code> å‡½æ•°å·²ç»æ‰§è¡Œç»“æŸï¼Œ<code>count</code> å˜é‡ä¾ç„¶å­˜åœ¨ï¼Œå› ä¸º <code>inner</code> å‡½æ•°ä»ç„¶æŒæœ‰å¯¹ <code>count</code> çš„å¼•ç”¨ã€‚</p>
<h3 id="é—­åŒ…çš„å¸¸è§ç”¨é€”"><a href="#é—­åŒ…çš„å¸¸è§ç”¨é€”" class="headerlink" title="é—­åŒ…çš„å¸¸è§ç”¨é€”"></a>é—­åŒ…çš„å¸¸è§ç”¨é€”</h3><ol>
<li><strong>æ•°æ®å°è£…</strong>ï¼šä½¿ç”¨é—­åŒ…å¯ä»¥åˆ›å»ºç§æœ‰å˜é‡ï¼Œä½¿å¾—å¤–éƒ¨ä»£ç æ— æ³•ç›´æ¥è®¿é—®å’Œä¿®æ”¹è¿™äº›å˜é‡ï¼Œåªèƒ½é€šè¿‡é—­åŒ…æä¾›çš„æ–¹æ³•è®¿é—®æˆ–ä¿®æ”¹ã€‚</li>
</ol>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createCounter</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;  <span class="comment">// ç§æœ‰å˜é‡</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">increment</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      count++;</span><br><span class="line">      <span class="keyword">return</span> count;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">decrement</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      count--;</span><br><span class="line">      <span class="keyword">return</span> count;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getCount</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">createCounter</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="title function_">increment</span>());  <span class="comment">// è¾“å‡º 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="title function_">getCount</span>());   <span class="comment">// è¾“å‡º 1</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>å»¶è¿Ÿæ‰§è¡Œ</strong>ï¼šé—­åŒ…å¸¸ç”¨äºå¼‚æ­¥ç¼–ç¨‹ï¼Œå¦‚å›è°ƒå‡½æ•°æˆ–äº‹ä»¶å¤„ç†ç¨‹åºä¸­ã€‚ç”±äºé—­åŒ…å¯ä»¥ä¿æŒå¯¹å¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨ï¼Œå®ƒèƒ½å¤Ÿç¡®ä¿åœ¨æœªæ¥æŸä¸ªæ—¶åˆ»è®¿é—®è¿™äº›å˜é‡æ—¶ï¼Œå€¼ä¸ä¼šä¸¢å¤±ã€‚</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/10/js-closure/" data-id="cm7bdn3hc000glipy63n2c0zu" data-title="JavaScriptä¸­çš„é—­åŒ…" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-js-hoisting" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2025/02/10/js-hoisting/" class="article-date">
  <time class="dt-published" datetime="2025-02-10T13:56:02.000Z" itemprop="datePublished">2025-02-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2025/02/10/js-hoisting/">JavaScript æå‡ï¼ˆHoistingï¼‰</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-ä»€ä¹ˆæ˜¯æå‡ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯æå‡ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯æå‡ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯æå‡ï¼Ÿ</h2><p><strong>æå‡ï¼ˆHoistingï¼‰</strong> æ˜¯æŒ‡ JavaScript åœ¨æ‰§è¡Œä»£ç ä¹‹å‰ï¼Œä¼š<strong>å°†å˜é‡å’Œå‡½æ•°çš„å£°æ˜æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€é¡¶ç«¯</strong>ã€‚ä½†å˜é‡çš„<strong>èµ‹å€¼ä¸ä¼šè¢«æå‡</strong>ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æ„æƒ³ä¸åˆ°çš„è¡Œä¸ºã€‚</p>
<hr>
<h2 id="2-JavaScript-ä»£ç æ‰§è¡Œè¿‡ç¨‹"><a href="#2-JavaScript-ä»£ç æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="2. JavaScript ä»£ç æ‰§è¡Œè¿‡ç¨‹"></a>2. JavaScript ä»£ç æ‰§è¡Œè¿‡ç¨‹</h2><p>JavaScript ä»£ç æ‰§è¡Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><p><strong>ç¼–è¯‘é˜¶æ®µï¼ˆParsing &amp; Compilationï¼‰</strong></p>
<ul>
<li>å˜é‡å’Œå‡½æ•°å£°æ˜è¢«å­˜å…¥å†…å­˜ã€‚</li>
<li><code>var</code> å£°æ˜çš„å˜é‡ä¼šè¢«é»˜è®¤åˆå§‹åŒ–ä¸º <code>undefined</code>ã€‚</li>
<li>å‡½æ•°å£°æ˜ä¼šå®Œæ•´æå‡ï¼Œå…è®¸åœ¨å®šä¹‰å‰è°ƒç”¨ã€‚</li>
</ul>
</li>
<li><p><strong>æ‰§è¡Œé˜¶æ®µï¼ˆExecutionï¼‰</strong></p>
<ul>
<li>ä»£ç æŒ‰ç…§ä¹¦å†™é¡ºåºæ‰§è¡Œã€‚</li>
<li>å˜é‡èµ‹å€¼å‘ç”Ÿåœ¨æ­¤é˜¶æ®µã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="3-å˜é‡æå‡"><a href="#3-å˜é‡æå‡" class="headerlink" title="3. å˜é‡æå‡"></a>3. å˜é‡æå‡</h2><h3 id="3-1-var-å˜é‡çš„æå‡"><a href="#3-1-var-å˜é‡çš„æå‡" class="headerlink" title="3.1 var å˜é‡çš„æå‡"></a>3.1 <code>var</code> å˜é‡çš„æå‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// undefinedï¼ˆå˜é‡æå‡ï¼Œä½†æœªèµ‹å€¼ï¼‰</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h4 id="3-1-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"><a href="#3-1-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†" class="headerlink" title="3.1.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"></a>3.1.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†</h4><ul>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript è§£é‡Šå™¨çœ‹åˆ° `var a = 10;`ï¼Œä¼šå°† `var a;` æå‡åˆ°é¡¶éƒ¨ï¼š</span></span><br><span class="line"><span class="keyword">var</span> a;  <span class="comment">// å˜é‡å£°æ˜è¢«æå‡ï¼Œä½†ä¸ä¼šèµ‹å€¼</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// undefinedï¼ˆå˜é‡å·²ç»å­˜åœ¨ï¼Œä½†æœªèµ‹å€¼ï¼‰</span></span><br><span class="line">a = <span class="number">10</span>;         <span class="comment">// èµ‹å€¼</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<h4 id="3-1-2-ç»“è®º"><a href="#3-1-2-ç»“è®º" class="headerlink" title="3.1.2 ç»“è®º"></a>3.1.2 ç»“è®º</h4><ul>
<li><code>var</code>å£°æ˜çš„å˜é‡ä¼šè¢«<strong>æå‡</strong>ï¼Œä½†ä¸ä¼šæå‡èµ‹å€¼éƒ¨åˆ†ï¼Œæ‰€ä»¥ä¼šå¾—åˆ°<code>undefined</code></li>
</ul>
<h3 id="3-2-let-å’Œ-const-çš„æå‡"><a href="#3-2-let-å’Œ-const-çš„æå‡" class="headerlink" title="3.2 let å’Œ const çš„æå‡"></a>3.2 <code>let</code> å’Œ <code>const</code> çš„æå‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// âŒ ReferenceError: Cannot access &#x27;b&#x27; before initialization</span></span><br><span class="line"><span class="keyword">let</span> b = <span class="number">20</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"><a href="#3-2-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†" class="headerlink" title="3.2.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"></a>3.2.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†</h4><ul>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> b;  <span class="comment">// å˜é‡ b è¢«å­˜å‚¨ï¼Œä½†ä¸ä¼šåˆå§‹åŒ–</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// âŒ è®¿é—® b æ—¶ä¼šæŠ¥é”™ï¼ˆè¿›å…¥ &quot;æš‚æ—¶æ€§æ­»åŒº&quot;ï¼‰</span></span><br><span class="line">b = <span class="number">20</span>; <span class="comment">// èµ‹å€¼</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<h4 id="3-2-2-ç»“è®º"><a href="#3-2-2-ç»“è®º" class="headerlink" title="3.2.2 ç»“è®º"></a>3.2.2 ç»“è®º</h4><ul>
<li><code>let</code> å’Œ <code>const</code> ä¹Ÿä¼šè¢«æå‡ï¼Œä½†ä¸ä¼šåˆå§‹åŒ–ã€‚</li>
<li>åœ¨å˜é‡å£°æ˜ä¹‹å‰è®¿é—® <code>let</code> æˆ– <code>const</code> å˜é‡ä¼šè§¦å‘ **â€æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal Dead Zone, TDZï¼‰â€**ï¼Œå¯¼è‡´ <code>ReferenceError</code>ã€‚</li>
</ul>
<hr>
<h2 id="4-å‡½æ•°æå‡"><a href="#4-å‡½æ•°æå‡" class="headerlink" title="4. å‡½æ•°æå‡"></a>4. å‡½æ•°æå‡</h2><h3 id="4-1-å‡½æ•°å£°æ˜ï¼ˆFunction-Declarationï¼‰"><a href="#4-1-å‡½æ•°å£°æ˜ï¼ˆFunction-Declarationï¼‰" class="headerlink" title="4.1 å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰"></a><strong>4.1 å‡½æ•°å£°æ˜ï¼ˆFunction Declarationï¼‰</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">foo</span>(); <span class="comment">// âœ… è¾“å‡º &quot;Hello&quot;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"><a href="#4-1-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†" class="headerlink" title="4.1.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"></a>4.1.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†</h4><ul>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">&#125; <span class="comment">// å‡½æ•°æ•´ä¸ªè¢«æå‡</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">foo</span>(); <span class="comment">// &quot;Hello&quot; âœ… å¯ä»¥åœ¨å®šä¹‰å‰è°ƒç”¨</span></span><br></pre></td></tr></table></figure>

<h4 id="4-1-2-ç»“è®º"><a href="#4-1-2-ç»“è®º" class="headerlink" title="4.1.2 ç»“è®º"></a>4.1.2 ç»“è®º</h4><ul>
<li>å‡½æ•°å£°æ˜ä¼šè¢«<strong>å®Œæ•´æå‡</strong>ï¼ŒåŒ…æ‹¬å‡½æ•°ä½“ï¼Œå› æ­¤å¯ä»¥åœ¨<strong>å®šä¹‰å‰è°ƒç”¨</strong>ã€‚</li>
</ul>
<h3 id="4-2-å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction-Expressionï¼‰"><a href="#4-2-å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction-Expressionï¼‰" class="headerlink" title="4.2 å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰"></a><strong>4.2 å‡½æ•°è¡¨è¾¾å¼ï¼ˆFunction Expressionï¼‰</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">bar</span>(); <span class="comment">// âŒ TypeError: bar is not a function</span></span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"><a href="#4-2-1-ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†" class="headerlink" title="4.2.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†"></a><strong>4.2.1 ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†</strong></h4><ul>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bar; <span class="comment">// å˜é‡ bar è¢«æå‡ï¼Œä½†æœªèµ‹å€¼</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong></li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">bar</span>(); <span class="comment">// âŒ è¿™é‡Œ bar è¿˜æ˜¯ undefinedï¼Œæ‰€ä»¥ä¼šæŠ¥é”™</span></span><br><span class="line">bar = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hi&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-ç»“è®º"><a href="#4-2-2-ç»“è®º" class="headerlink" title="4.2.2 ç»“è®º"></a>4.2.2 ç»“è®º</h4><ul>
<li>åªæœ‰ <code>var</code> å£°æ˜çš„å˜é‡éƒ¨åˆ†ä¼šè¢«æå‡ï¼Œè€Œå‡½æ•°èµ‹å€¼ä¸ä¼šè¢«æå‡ã€‚</li>
<li>è®¿é—® <code>var</code> å£°æ˜çš„å‡½æ•°è¡¨è¾¾å¼å˜é‡æ—¶ï¼Œå€¼æ˜¯ <code>undefined</code>ï¼Œè°ƒç”¨æ—¶ä¼šè§¦å‘ <code>TypeError</code>ã€‚</li>
</ul>
<hr>
<h2 id="5-å…³é”®æ€»ç»“"><a href="#5-å…³é”®æ€»ç»“" class="headerlink" title="5. å…³é”®æ€»ç»“"></a>5. å…³é”®æ€»ç»“</h2><table>
<thead>
<tr>
<th>å˜é‡&#x2F;å‡½æ•°ç±»å‹</th>
<th>æ˜¯å¦æå‡ï¼Ÿ</th>
<th>æ˜¯å¦åˆå§‹åŒ–ï¼Ÿ</th>
<th>æ˜¯å¦å¯æå‰ä½¿ç”¨ï¼Ÿ</th>
</tr>
</thead>
<tbody><tr>
<td><code>var</code> å˜é‡</td>
<td>âœ… æ˜¯</td>
<td>âœ… <code>undefined</code></td>
<td>âš ï¸ åªèƒ½è®¿é—® <code>undefined</code></td>
</tr>
<tr>
<td><code>let</code> å˜é‡</td>
<td>âœ… æ˜¯</td>
<td>âŒ å¦ï¼ˆTDZï¼‰</td>
<td>âŒ è®¿é—®ä¼šæŠ¥é”™</td>
</tr>
<tr>
<td><code>const</code> å˜é‡</td>
<td>âœ… æ˜¯</td>
<td>âŒ å¦ï¼ˆTDZï¼‰</td>
<td>âŒ è®¿é—®ä¼šæŠ¥é”™</td>
</tr>
<tr>
<td>å‡½æ•°å£°æ˜ <code>function foo() &#123;&#125;</code></td>
<td>âœ… æ˜¯</td>
<td>âœ… æ˜¯</td>
<td>âœ… å¯ä»¥æå‰è°ƒç”¨</td>
</tr>
<tr>
<td>å‡½æ•°è¡¨è¾¾å¼ <code>var bar = function() &#123;&#125;</code></td>
<td>âœ… æ˜¯ï¼ˆ<code>var bar</code> æå‡ï¼‰</td>
<td>âŒ å¦</td>
<td>âŒ è®¿é—® <code>undefined</code>ï¼Œè°ƒç”¨æ—¶æŠ¥é”™</td>
</tr>
</tbody></table>
<hr>
<h2 id="6-æœ€ä½³å®è·µ"><a href="#6-æœ€ä½³å®è·µ" class="headerlink" title="6. æœ€ä½³å®è·µ"></a>6. æœ€ä½³å®è·µ</h2><ol>
<li>**ä½¿ç”¨ <code>let</code> å’Œ <code>const</code> ä»£æ›¿ <code>var</code>**ï¼Œé¿å…å˜é‡æå‡å¸¦æ¥çš„é—®é¢˜ã€‚</li>
<li><strong>å˜é‡å£°æ˜å°½é‡æ”¾åœ¨ä½œç”¨åŸŸçš„é¡¶éƒ¨</strong>ï¼Œå‡å°‘æ„å¤–è¡Œä¸ºã€‚</li>
<li><strong>åœ¨è°ƒç”¨å‰å®šä¹‰å‡½æ•°</strong>ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
<li><strong>é¿å…åœ¨å—çº§ä½œç”¨åŸŸå¤–è®¿é—® <code>let</code> æˆ– <code>const</code> å˜é‡</strong>ï¼Œé˜²æ­¢ <code>TDZ</code> é”™è¯¯ã€‚</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2025/02/10/js-hoisting/" data-id="cm7bdn3hg000nlipydq7bf9eb" data-title="JavaScript æå‡ï¼ˆHoistingï¼‰" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/React/">React</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/">Swift</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bug/" rel="tag">Bug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOM/" rel="tag">DOM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Frontend/" rel="tag">Frontend</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPA/" rel="tag">SPA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/" rel="tag">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/" rel="tag">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/DOM/" style="font-size: 13.33px;">DOM</a> <a href="/tags/Frontend/" style="font-size: 10px;">Frontend</a> <a href="/tags/JavaScript/" style="font-size: 20px;">JavaScript</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/SPA/" style="font-size: 10px;">SPA</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/iOS/" style="font-size: 16.67px;">iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/08/">August 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/02/18/js-promise/">æ‰‹å†™Promise</a>
          </li>
        
          <li>
            <a href="/2025/02/17/spa-first-paint/">SPAé¦–å±åŠ è½½ä¼˜åŒ–</a>
          </li>
        
          <li>
            <a href="/2025/02/14/dom-event-target/">event.target å’Œ event.currentTarget</a>
          </li>
        
          <li>
            <a href="/2025/02/14/dom-event-bubbling/">äº‹ä»¶å†’æ³¡</a>
          </li>
        
          <li>
            <a href="/2025/02/12/js-debounce-throttle/">JavaScript é˜²æŠ–ï¼ˆDebounceï¼‰å’ŒèŠ‚æµï¼ˆThrottleï¼‰</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 xuexiangxu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>