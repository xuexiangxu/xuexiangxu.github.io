---
title: Redis中的跳跃表(skiplist)
date: 2024-11-18 20:58:57
tags: [Redis]
categories:
- [Redis]
---
跳跃表(skiplist)是一种有序数据结构，支持平均O(log(N))，最坏O(N)复杂度的节点查找

查找：平均O(log(N))
插入：平均O(log(N))

Redis使用跳跃表作为有序集合键的底层实现之一，如果一个有序集合包含的元素数量比较多，或者成员是比较长的字符串时，Redis就会使用跳跃表来作为有序集合键的底层实现

# 创建跳跃表

一开始有N个元素，按照从小到大排列：

2 -> 8 -> 10 -> 11 -> 13 -> 19 -> 20 -> 22 -> 26 -> 30

可以用单向列表来存储，链表的缺点在于无法随机访问，查找很慢

现在在链表的基础上改进，首先在开头加一个节点Sentinel

{% asset_img skiplist-l0.png %}

L0层的指针一个接一个，没有跳跃
从L1层开始有跳跃，现在开始添加L1层的指针

跳跃表随机决定节点高度是否增长，进过一轮循环，得到L1层：

{% asset_img skiplist-l1.png %}

再经过一轮循环，得到L2层：

{% asset_img skiplist-l2.png %}

再经过一轮循环，得到L3层：

{% asset_img skiplist-l3.png %}

跳跃列表的层数由用户自己决定
最好用log(N)层，可以保证查找和插入复杂度都是log(N)
